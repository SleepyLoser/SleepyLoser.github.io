(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{1111:function(e,t,i){"use strict";i.r(t),i.d(t,"Behavior",(function(){return h}));var n=i(0),r=i.n(n),a=i(3),s=i.n(a),o=i(25),u=i.n(o),c=i(42),l=i.n(c),h=function(e){function t(e){r()(this,t);var i=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.type=e,i.isReversePlay=!1,i.timeFilter=null,i}return l()(t,e),s()(t,[{key:"getBehaviorType",value:function(){return this.type}},{key:"setTimeFilter",value:function(e){this.timeFilter=e}},{key:"start",value:function(e){}},{key:"init",value:function(){}},{key:"unInit",value:function(){}},{key:"reverse",value:function(){this.isReversePlay=!this.isReversePlay}},{key:"removeEffect",value:function(e){this.isReversePlay=!1}},{key:"hasMasterRel",value:function(){return!1}},{key:"getKeyTimes",value:function(){return[]}},{key:"getKeyTimesPrev",value:function(){return[]}},{key:"getPropName",value:function(){return""}},{key:"getPropValue",value:function(e){return-1}},{key:"getPropValuePrev",value:function(e){return-1}}]),t}(i(4444).a)},1317:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterShape=void 0;var n=i(143),r=i(258),a=function(e){function t(t,i,n){var a=e.call(this,r.TIME_NODE_LIST_ELEMENT.ANIMATE_EFFECT)||this;return a.type=t,a.presetClass=i,a.direction=n,a}return(0,n.__extends)(t,e),t.prototype.setTarget=function(e){this.target=e},t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getType=function(){return this.type},t.prototype.getPresetClass=function(){return this.presetClass},t.prototype.getDirection=function(){return this.direction},t}(i(1111).Behavior);t.FilterShape=a},2508:function(e,t,i){"use strict";i.r(t),i.d(t,"perfixEvent",(function(){return u})),i.d(t,"prefix",(function(){return n}));var n="",r=["webkit","moz","MS","o",""];function a(){}function s(e,t){if(!e)throw new Error(t)}if("undefined"!=typeof document){var o=document.documentElement||document.createElement("div");n=Object.isEmpty(o.style.animation)?"-webkit-":""}var u={add:function(e,t,i){i=i||a,s(e,"element is required"),s(t,"type is required");for(var n=0;n<r.length;n++)r[n]||(t=t.toLowerCase()),e.addEventListener(r[n]+t,i,!1)},remove:function(e,t,i){i=i||a,s(e,"element is required"),s(t,"type is required");for(var n=0;n<r.length;n++)r[n]||(t=t.toLowerCase()),e.removeEventListener(r[n]+t,i,!1)}}},258:function(e,t,i){"use strict";i.r(t),i.d(t,"KwoAnimAttributeName",(function(){return n})),i.d(t,"TransitionType",(function(){return r})),i.d(t,"TIME_NODE_LIST_ELEMENT",(function(){return a})),i.d(t,"VariantType",(function(){return s})),i.d(t,"TIME_NODE_PRESET_CLASS",(function(){return o})),i.d(t,"TIME_NODE_FILL",(function(){return u})),i.d(t,"KsoAnimEffect",(function(){return c})),i.d(t,"TRIGGER_TIME_TYPE",(function(){return l})),i.d(t,"EffectNodeType",(function(){return h})),i.d(t,"RAW_DURATION_INFINITE",(function(){return f})),i.d(t,"INDEFINITE_TIMING",(function(){return p})),i.d(t,"SCENE_NODE_STATUS",(function(){return m})),i.d(t,"AnimAfterType",(function(){return d})),i.d(t,"AnimCategory",(function(){return v})),i.d(t,"AnimTriggerType",(function(){return g})),i.d(t,"AnimSpeed",(function(){return y})),i.d(t,"AnimRepeatTimes",(function(){return E})),i.d(t,"AnimProperty",(function(){return S})),i.d(t,"AnimDirection",(function(){return T})),i.d(t,"AnimLevel",(function(){return A})),i.d(t,"AnimBehaviorType",(function(){return k})),i.d(t,"ShowAdvanceMode",(function(){return _})),i.d(t,"TextRangeType",(function(){return w})),i.d(t,"AnimFilterEffectType",(function(){return N})),i.d(t,"AnimFilterEffectSubtype",(function(){return P})),i.d(t,"SchemeTypeMap",(function(){return C})),i.d(t,"AnimeColorType",(function(){return b})),i.d(t,"FollowType",(function(){return I}));var n={kwoAnimNone:0,kwoAnimX:1,kwoAnimY:2,kwoAnimWidth:3,kwoAnimHeight:4,kwoAnimOpacity:5,kwoAnimRotation:6,kwoAnimColor:7,kwoAnimVisibility:8,kwoAnimXshear:9,kwoAnimTextFontBold:100,kwoAnimTextFontColor:101,kwoAnimTextFontEmboss:102,kwoAnimTextFontItalic:103,kwoAnimTextFontName:104,kwoAnimTextFontShadow:105,kwoAnimTextFontSize:106,kwoAnimTextFontSubscript:107,kwoAnimTextFontSuperscript:108,kwoAnimTextFontUnderline:109,kwoAnimTextFontStrikeThrough:110,kwoAnimTextBulletCharacter:111,kwoAnimTextBulletFontName:112,kwoAnimTextBulletNumber:113,kwoAnimTextBulletColor:114,kwoAnimTextBulletRelativeSize:115,kwoAnimTextBulletStyle:116,kwoAnimTextBulletType:117,kwoAnimShapePictureContrast:1e3,kwoAnimShapePictureBrightness:1001,kwoAnimShapePictureGamma:1002,kwoAnimShapePictureGrayscale:1003,kwoAnimShapeFillOn:1004,kwoAnimShapeFillColor:1005,kwoAnimShapeFillOpacity:1006,kwoAnimShapeFillBackColor:1007,kwoAnimShapeLineOn:1008,kwoAnimShapeLineColor:1009,kwoAnimShapeShadowOn:1010,kwoAnimShapeShadowType:1011,kwoAnimShapeShadowColor:1012,kwoAnimShapeShadowOpacity:1013,kwoAnimShapeShadowOffsetX:1014,kwoAnimShapeShadowOffsetY:1015,kwoAnimShapeFillType:1016,kwoAnimShapeStyleRotation:1017,kwoAnimXY:1018,kwoAnimTextFontTransform:1019,kwoAnimTextFontOutline:1020,kwoAnimTextFontSRotation:1021,kwoAnimShapePictureCropTop:1022,kwoAnimShapePictureCropBottom:1023,kwoAnimShapePictureCropLeft:1024,kwoAnimShapePictureCropRight:1025,kwoAnimShapePictureGain:1026,kwoAnimShapePictureBlackLevel:1027,kwoAnimShapePictureChromakey:1028,kwoAnimShapeFillMethod:1029,kwoAnimShapeFillBackOpacity:1030,kwoAnimShapeFillAngle:1031,kwoAnimShapeFillFocus:1032,kwoAnimShapeFillFocusPositionX:1033,kwoAnimShapeFillFocusPositionY:1034,kwoAnimShapeFillFocussizeX:1035,kwoAnimShapeFillFocussizeY:1036,kwoAnimShapeLineWeight:1037,kwoAnimShapeLineOpacity:1038,kwoAnimShapeLineStyle:1039,kwoAnimShapeLineDashStyle:1040,kwoAnimShapeLineFillType:1041,kwoAnimShapeLineSrc:1042,kwoAnimShapeLineBackColor:1043,kwoAnimShapeLineImagesizeX:1044,kwoAnimShapeLineImagesizeY:1045,kwoAnimShapeLineStratArrow:1046,kwoAnimShapeLineEndArrow:1047,kwoAnimShapeLineStartArrowWidth:1048,kwoAnimShapeLineStartArrowLength:1049,kwoAnimShapeLineEndArrowWidth:1050,kwoAnimShapeLineEndArrowLength:1051,kwoAnimShapeShadowBackColor:1052,kwoAnimShapeShadowBackOffsetX:1053,kwoAnimShapeShadowBackOffsetY:1054,kwoAnimShapeShadowOriginX:1055,kwoAnimShapeShadowOriginY:1056,kwoAnimShapeShadowMatrixXtox:1057,kwoAnimShapeShadowMatrixYtox:1058,kwoAnimShapeShadowMatrixYtoy:1059,kwoAnimShapeShadowMatrixPerspectiveX:1060,kwoAnimShapeShadowMatrixPerspectiveY:1061,kwoAnimShapeSkewOn:1062,kwoAnimShapeSkewOffsetX:1063,kwoAnimShapeSkewOffsetY:1064,kwoAnimShapeSkewOriginX:1065,kwoAnimShapeSkewOriginY:1066,kwoAnimShapeSkewMatrixXtox:1067,kwoAnimShapeSkewMatrixYtox:1068,kwoAnimShapeSkewMatrixYtoy:1069,kwoAnimShapeSkewMatrixPerspectiveX:1070,kwoAnimShapeSkewMatrixPerspectiveY:1071,kwoAnimExtrusionOn:1072,kwoAnimExtrusionType:1073,kwoAnimExtrusionRender:1074,kwoAnimExtrusionViewpointoriginX:1075,kwoAnimExtrusionViewpointoriginY:1076,kwoAnimExtrusionViewpointX:1077,kwoAnimExtrusionViewpointY:1078,kwoAnimExtrusionViewpointZ:1079,kwoAnimExtrusionPlane:1080,kwoAnimExtrusionSkewangle:1081,kwoAnimExtrusionSkewamt:1082,kwoAnimExtrusionBackDepth:1083,kwoAnimExtrusionForeDepth:1084,kwoAnimExtrusionOrientationX:1085,kwoAnimExtrusionOrientationY:1086,kwoAnimExtrusionOrientationZ:1087,kwoAnimExtrusionOrientationAngle:1088,kwoAnimExtrusionColor:1089,kwoAnimExtrusionRotationAngleX:1090,kwoAnimExtrusionRotationAngleY:1091,kwoAnimExtrusionLockRotationCenter:1092,kwoAnimExtrusionAutoRotationCenter:1093,kwoAnimExtrusionRotationCenterX:1094,kwoAnimExtrusionRotationCenterY:1095,kwoAnimExtrusionRotationCenterZ:1096,kwoAnimExtrusionColorMode:1097},r={none:0,cut:257,cutThroughBlack:258,random:513,blindsHorizontal:769,blindsVertical:770,checkerboardAcross:1025,checkerboardDown:1026,coverLeft:1281,coverUp:1282,coverRight:1283,coverDown:1284,coverLeftUp:1285,coverRightUp:1286,coverLeftDown:1287,coverRightDown:1288,dissolve:1537,fade:1793,uncoverLeft:2049,uncoverUp:2050,uncoverRight:2051,uncoverDown:2052,uncoverLeftUp:2053,uncoverRightUp:2054,uncoverLeftDown:2055,uncoverRightDown:2056,randomBarsHorizontal:2305,randomBarsVertical:2306,stripsLeftUp:2565,stripsRightUp:2566,stripsLeftDown:2567,stripsRightDown:2568,wipeLeft:2817,wipeUp:2818,wipeRight:2819,wipeDown:2820,boxOut:3073,boxIn:3074,splitHorizontalOut:3585,splitHorizontalIn:3586,splitVerticalOut:3587,splitVerticalIn:3588,circleOut:3845,diamondOut:3846,combHorizontal:3847,combVertical:3848,fadeSmoothly:3849,newsflash:3850,plusOut:3851,pushDown:3852,pushLeft:3853,pushRight:3854,pushUp:3855,wedge:3856,wheel1Spoke:3857,wheel2Spokes:3858,wheel3Spokes:3859,wheel4Spokes:3860,wheel8Spokes:3861,morphByObject:3954,morphByWord:3955,morphByChar:3956},a={PARALLEL_TIME_NODE:0,SEQUENCE_TIME_NODE:1,ANIMATE_EFFECT:2,SET_TIME_NODE_BEHAVIOR:3,AUDIO:4,ANIMATE_SCALE:5,ANIMATE_MOTION:6,COMMAND:7,EXCLUSIVE:8,ANIMATE:9,ANIMATE_COLOR_BEHAVIOR:10,ANIMATE_ROTATION:11,VIDEO:12,UNSUPPORTED_BEHAVIOR:-1},s={typeString:0,typeFloat:1,typeInteger:2,typeColor:3},o={ENTRANCE_PRESET:"entrance",EXIT_PRESET:"exit",EMPHASIS_PRESET:"emphasis",PATH_PRESET:"path",MEDIA_CALL_PRESET:"mediaCall"},u={REMOVE:1,FREEZE:2,HOLD:3,TRANSITION:4},c={Custom:0,Appear:1,Fly:2,Blinds:3,Box:4,Checkerboard:5,Circle:6,Crawl:7,Diamond:8,Dissolve:9,Fade:10,FlashOnce:11,Peek:12,Plus:13,RandomBars:14,Spiral:15,Split:16,Stretch:17,Strips:18,Swivel:19,Wedge:20,Wheel:21,Wipe:22,Zoom:23,RandomEffects:24,Boomerang:25,Bounce:26,ColorReveal:27,Credits:28,EaseIn:29,Float:30,GrowAndTurn:31,LightSpeed:32,Pinwheel:33,RiseUp:34,Swish:35,ThinLine:36,Unfold:37,Whip:38,Ascend:39,CenterRevolve:40,FadedSwivel:41,Descend:42,Sling:43,Spinner:44,Stretchy:45,Zip:46,ArcUp:47,FadedZoom:48,Glide:49,Expand:50,Flip:51,Shimmer:52,Fold:53,ChangeFillColor:54,ChangeFont:55,ChangeFontColor:56,ChangeFontSize:57,ChangeFontStyle:58,GrowShrink:59,ChangeLineColor:60,Spin:61,Transparency:62,BoldFlash:63,Blast:64,BoldReveal:65,BrushOnColor:66,BrushOnUnderline:67,ColorBlend:68,ColorWave:69,ComplementaryColor:70,ComplementaryColor2:71,ContrastingColor:72,Darken:73,Desaturate:74,FlashBulb:75,Flicker:76,GrowWithColor:77,Lighten:78,StyleEmphasis:79,Teeter:80,VerticalGrow:81,Wave:82,MediaPlay:83,MediaPause:84,MediaStop:85,PathCircle:86,PathRightTriangle:87,PathDiamond:88,PathHexagon:89,Path5PointStar:90,PathCrescentMoon:91,PathSquare:92,PathTrapezoid:93,PathHeart:94,PathOctagon:95,Path6PointStar:96,PathFootball:97,PathEqualTriangle:98,PathParallelogram:99,PathPentagon:100,Path4PointStar:101,Path8PointStar:102,PathTeardrop:103,PathPointyStar:104,PathCurvedSquare:105,PathCurvedX:106,PathVerticalFigure8:107,PathCurvyStar:108,PathLoopdeLoop:109,PathBuzzsaw:110,PathHorizontalFigure8:111,PathPeanut:112,PathFigure8Four:113,PathNeutron:114,PathSwoosh:115,PathBean:116,PathPlus:117,PathInvertedTriangle:118,PathInvertedSquare:119,PathLeft:120,PathTurnRight:121,PathArcDown:122,PathZigzag:123,PathSCurve2:124,PathSineWave:125,PathBounceLeft:126,PathDown:127,PathTurnUp:128,PathArcUp:129,PathHeartbeat:130,PathSpiralRight:131,PathWave:132,PathCurvyLeft:133,PathDiagonalDownRight:134,PathTurnDown:135,PathArcLeft:136,PathFunnel:137,PathSpring:138,PathBounceRight:139,PathSpiralLeft:140,PathDiagonalUpRight:141,PathTurnUpRight:142,PathArcRight:143,PathSCurve1:144,PathDecayingWave:145,PathCurvyRight:146,PathStairsDown:147,PathUp:148,PathRight:149,Wink:150,Flash:151,PathCustom:152},l={presTriggerTimeOnBegin:1,presTriggerTimeOnEnd:2,presTriggerTimeBegin:3,presTriggerTimeEnd:4,presTriggerTimeOnclick:5,presTriggerTimeOnDblClick:6,presTriggerTimeOnMouseOver:7,presTriggerTimeOnMouseOut:8,presTriggerTimeOnpptNext:9,presTriggerTimeOnpptPrev:10,presTriggerTimeOnStopAudio:11,presTriggerTimeOnMediaBmk:12},h={CLICK:0,WITH:1,AFTER:2,TRANS:3},f="infinite",p=Number.MAX_SAFE_INTEGER,m={WAITING:0,RUNNING:1,FINISHED:2},d={Mixed:-1,None:0,Dim:1,Hide:2,HideOnNextClick:3},v={Entrance:1,Exit:2,Emphasis:3,Path:4,MediaCall:6};Object.freeze(v);var g={Mixed:-1,Node:0,OnPageClick:1,WithPrevious:2,AfterPrevious:3,OnShapeClick:4};Object.freeze(g);var y={verySlow:5,slow:3,medium:2,fast:1,veryFast:.5};Object.freeze(y);var E={None:1,Twice:2,Third:3,Fourth:4,Fifth:5,Tenth:10,UntilEndOfSlide:-1,UntilNextClick:-2};Object.freeze(E);var S={Type:0,EffectCategory:1,GroupIndex:2,SerialNumber:3,TriggerType:4,Text:5,GroupText:6,Speed:7,Direction:8,Scale:9,ScaleDirection:10,Rotation:11,RotationDirection:12,FontName:13,FontStyle:14,FontSize:15,FontSizeStyle:16,Transparency:17,ColorFormat1Type:18,ColorFormat1:19,ColorFormat2Type:20,ColorFormat2:21,ColorStyle:22,Relative:23,AfterEffect:24,DimColorFormatType:25,DimColorFormat:26,SoundEffectType:27,SoundEffectBuildInID:28,SoundEffectName:29,ImportFromFile:30,SoundEffectVolume:31,SoundEffectMute:32,IsTextUnitEnable:33,TextUnitEffect:34,TextUnitInterval:35,DelayTime:36,DelayTimeAndSpeed:37,RepeatCount:38,SmoothStart:39,SmoothEnd:40,AutoReverse:41,IsLevelEnable:42,MinIdentLevel:43,MaxIdentLevel:44,BuildByLevel:45,AfterEffectEnable:46,BeginOffset:47,TextUnitCount:48,ItemExpanded:49,TriggerText:50,TriggerShapeObj:51,SmartArtNodeEffect:52};Object.freeze(S);var T={None:0,Up:1,Right:2,Down:3,Left:4,OrdinalMask:5,UpLeft:6,UpRight:7,DownRight:8,DownLeft:9,Top:10,Bottom:11,TopLeft:12,TopRight:13,BottomRight:14,BottomLeft:15,Horizontal:16,Vertical:17,Across:18,In:19,Out:20,Clockwise:21,Counterclockwise:22,HorizontalIn:23,HorizontalOut:24,VerticalIn:25,VerticalOut:26,Slightly:27,Center:28,InSlightly:29,InCenter:30,InBottom:31,OutSlightly:32,OutCenter:33,OutBottom:34,FontBold:35,FontItalic:36,FontUnderline:37,FontStrikethrough:38,FontShadow:39,FontAllCaps:40,Instant:41,Gradual:42,CycleClockwise:43,CycleCounterclockwise:44,Wheel1:45,Wheel2:46,Wheel3:47,Wheel4:48,Wheel8:49};Object.freeze(T);var A={LevelMixed:-1,LevelNone:0,TextByAllLevels:1,TextByFirstLevel:2,TextBySecondLevel:3,TextByThirdLevel:4,TextByFourthLevel:5,TextByFifthLevel:6,ChartAllDirectAtOnce:7,ChartByCategory:8,ChartByCategoryElements:9,ChartBySeries:10,ChartBySeriesElements:11};Object.freeze(A);var k={Mixed:-2,None:0,Motion:1,Color:2,Scale:3,Rotation:4,Property:5,Command:6,Filter:7,Set:8};Object.freeze(k);var _={mixed:-2,onClick:1,onTime:2},w={presTextRangeMixed:-1,presTextRangePara:0,presTextRangeChar:1},N={AnimFilterEffectTypeNone:0,AnimFilterEffectTypeBarn:1,AnimFilterEffectTypeBlinds:2,AnimFilterEffectTypeBox:3,AnimFilterEffectTypeCheckerboard:4,AnimFilterEffectTypeCircle:5,AnimFilterEffectTypeDiamond:6,AnimFilterEffectTypeDissolve:7,AnimFilterEffectTypeFade:8,AnimFilterEffectTypeImage:9,AnimFilterEffectTypePixelate:10,AnimFilterEffectTypePlus:11,AnimFilterEffectTypeRandomBar:12,AnimFilterEffectTypeSlide:13,AnimFilterEffectTypeStretch:14,AnimFilterEffectTypeStrips:15,AnimFilterEffectTypeWedge:16,AnimFilterEffectTypeWheel:17,AnimFilterEffectTypeWipe:18},P={AnimFilterEffectSubtypeNone:0,AnimFilterEffectSubtypeInVertical:1,AnimFilterEffectSubtypeOutVertical:2,AnimFilterEffectSubtypeInHorizontal:3,AnimFilterEffectSubtypeOutHorizontal:4,AnimFilterEffectSubtypeHorizontal:5,AnimFilterEffectSubtypeVertical:6,AnimFilterEffectSubtypeIn:7,AnimFilterEffectSubtypeOut:8,AnimFilterEffectSubtypeAcross:9,AnimFilterEffectSubtypeFromLeft:10,AnimFilterEffectSubtypeFromRight:11,AnimFilterEffectSubtypeFromTop:12,AnimFilterEffectSubtypeFromBottom:13,AnimFilterEffectSubtypeDownLeft:14,AnimFilterEffectSubtypeUpLeft:15,AnimFilterEffectSubtypeDownRight:16,AnimFilterEffectSubtypeUpRight:17,AnimFilterEffectSubtypeSpokes1:18,AnimFilterEffectSubtypeSpokes2:19,AnimFilterEffectSubtypeSpokes3:20,AnimFilterEffectSubtypeSpokes4:21,AnimFilterEffectSubtypeSpokes8:22,AnimFilterEffectSubtypeLeft:23,AnimFilterEffectSubtypeRight:24,AnimFilterEffectSubtypeDown:25,AnimFilterEffectSubtypeUp:26},C={dk1:0,lt1:1,dk2:2,lt2:3,accent1:4,accent2:5,accent3:6,accent4:7,accent5:8,accent6:9,hlink:10,folHlink:11,bg1:1,tx1:0,bg2:3,tx2:2},b={mixed:-2,rgb:1,schemeIndex:2,hls:3,cms:4,ink:5,crgb:6,preset:7,system:8,count:9},I={FollowNone:-1,FollowFirstPara:0,FollowShape:1}},4444:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(0),r=i.n(n),a=i(3),s=i.n(a),o=i(258),u=function(){function e(){r()(this,e),this.delay=0,this.rawDuration=1,this.repeatCount=1,this.fill=o.TIME_NODE_FILL.HOLD}return s()(e,[{key:"getDelay",value:function(){return this.delay}},{key:"setDelay",value:function(e){e>=0&&(this.delay=e)}},{key:"getRawDuration",value:function(){return this.rawDuration}},{key:"setRawDuration",value:function(e){if(!(e<=0))return this.rawDuration=e,this}},{key:"getRepeatCount",value:function(){return this.repeatCount}},{key:"setRepeatCount",value:function(e){this.repeatCount=e}},{key:"getFill",value:function(){return this.fill}},{key:"setFill",value:function(e){this.fill=e}},{key:"setAutoReverse",value:function(e){this.autoReverse=e}},{key:"getAutoReverse",value:function(){return this.autoReverse}},{key:"_isInfinite",value:function(e){return("string"==typeof e||e instanceof String)&&"infinite"===e}},{key:"isInfiniteRepeatCount",value:function(){return this.isInfiniteRepeatUntilEnd()||this.isInfiniteRepeatUntilNextClick()}},{key:"isInfiniteRepeatUntilEnd",value:function(){return-1===this.getRepeatCount()}},{key:"isInfiniteRepeatUntilNextClick",value:function(){return-2===this.getRepeatCount()}},{key:"setUntilEnd",value:function(e){this._isUntilEnd=e}},{key:"setUntilNextClick",value:function(e){this._isUntilNextClick=e}},{key:"isUntilNextClick",value:function(){return this._isUntilNextClick}}]),e}()},6188:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createClipPath=void 0;var n=i(2508);t.createClipPath=function(e){if(0===e.length)return null;var t=e.reduce((function(e,t){return e?e+",".concat(t[0],"% ").concat(t[1],"%"):"".concat(t[0],"% ").concat(t[1],"%")}),null);return"".concat(n.prefix,"clip-path: polygon(").concat(t,")")}},6189:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloneNodeHelper=void 0;var n=(0,i(143).__importDefault)(i(1017)),r=i(167),a=i(258),s=function(){function e(e){var t=e.attrNames,i=e.targetColor,n=e.shape,r=e.scale,a=e.shapeLayout,s=e.gcp,o=e.effectType;this.attrNames=t,this.targetColor=i,this.shape=n,this.scale=r,this.shapeLayout=a,this.gcp=s,this.effectType=o}return e.createEmptyNode=function(e){var t=document.createElement("div");t.id="clone_empty_node",e.appendChild(t);var i=e.style;return window.domTools.setStyle(t,{width:i.width,height:i.height}),t},e.prototype.createAnimNode=function(e){var t=this._cloneOriDiv(e);if(this.shape.getPicture()&&this.isChangeColorAnim()&&t.querySelectorAll("image").forEach((function(e){return e.remove()})),this.needCreateBg()){for(t.firstElementChild.remove(),t.id+="_fill";t.previousElementSibling;)e.insertBefore(t,t.previousElementSibling);return t.style.background=this.targetColor,t}if(this.needSetUnderline())return this.createUnderlineNode(t),t;if(this.needSetFill()){if(this.isLineShape())return t.firstElementChild.remove(),t;for(this.setFillColor(t),t.id+="_fill";t.previousElementSibling&&"svg"!==t.previousElementSibling.tagName&&"animationWrapper"!==t.previousElementSibling.className&&-1===t.previousElementSibling.id.indexOf("clone_fill");)e.insertBefore(t,t.previousElementSibling)}return this.needSetLineFill()&&(this.setStrokeColor(t),t.id+="_stroke"),this.needSetTextFill()&&(this.setTextFillColor(t),t.id+="_text",e.appendChild(t)),t},e.prototype.setFillColor=function(e){var t=this.createGeometryPath(e,"fill");if(!t)return null;t.setAttribute("fill",this.targetColor),t.setAttribute("fill-rule","evenodd"),t.setAttribute("fill-opacity",1)},e.prototype.setStrokeColor=function(e){var t=this.createGeometryPath(e,"stroke");if(!t)return null;if(t.isComplexPath)t.setAttribute("fill",this.targetColor),t.setAttribute("fill-rule","nonzero"),t.setAttribute("fill-opacity",1);else{var i=this.shape,n=i&&i.getOutline(),r=n&&n.dashType,a=this.createDashPattern(r),s=n&&n.width||9525;s=Math.round(s*(1/635)*this.scale),a=a&&a.map((function(e){return e*s}))||[0,0],t.setAttribute("stroke-dasharray","".concat(a[0],",").concat(a[1])),t.setAttribute("stroke-width",s),t.setAttribute("stroke",this.targetColor),t.setAttribute("stroke-opacity",1)}},e.prototype.setTextFillColor=function(e){var t=this;["tspan","text","path.text_path"].forEach((function(i){var n=e.querySelectorAll(i);n.length&&t.setTagsFillColor(n)}))},e.prototype.setTagsFillColor=function(e){for(var t=this.targetColor,i=0,n=e.length;i<n;++i){var r=e[i];r.setAttribute("fill",t),r.getAttribute("stroke-width")||(r.setAttribute("stroke",t),r.setAttribute("stroke-width",1))}},e.prototype.createGeometryPath=function(e,t){var i=this.shape;if(i&&i.isTextBox())return this.createTextBoxPath(e);var r=this.shapeLayout,a=r&&r.shapeVisual,s=a&&a.measureShapeBody,o=s&&s.layout,u=o&&o.paths;if(!u)return null;var c=window.domTools.createSvgNodeByTag("path",{fill:"none",stroke:"none"}),l=new n.default;u.forEach((function(e){var i;"fill"===t?i=e.painterPath:"stroke"===t&&(e.strokerPath&&e.strokerPath!==e.painterPath?(c.isComplexPath=!0,i=e.strokerPath):i=e.painterPath),i&&i.toContextPath(l)}));var h=l.__currentDefaultPath;if(!h)return null;c.setAttribute("d",h);var f=e.querySelector("#s_".concat(i.getId(),"_geomerty")),p=f&&f.querySelector("path"),m=p&&p.parentElement;if(i.isImage){var d=e.querySelector("#image_clip");d&&d.parentElement.insertBefore(c,d)}else if(m){for(;m.firstElementChild;)m.firstElementChild.remove();m&&m.appendChild(c)}else{var v=e.querySelector("#s_".concat(i.getId(),"_geomerty")),g=v&&v.firstElementChild;g&&g.appendChild(c)}return c},e.prototype.createUnderlineNode=function(e){var t=this.gcp,i=this.shapeLayout,n=i&&i.extendList,a=n&&n.typoTextBody,s=a&&a.getGlyphByGcp(t);if(s&&!s.isTailSpace){var u=s.parent,c=window.domTools.createSvgNodeByTag("path",{fill:"black",stroke:"none"}),l=new o,h=u.parent,f=h&&h.getBeginCcp(),p=h.getTypoAutoNum(),m=f&&f.begin===t,d=u.mUnderLineVector;if(d&&d.length)d.forEach((function(e){var t=e.startPos,i=e.endPos,n=e.lineWidth,a=e.verticalType,o=t.x,c=t.y,h=t.height,f=i.x,d=i.y,v=i.height,g=n||1.5;a===r.TextVerticalType.Horizontal?(p&&m&&l.translate(u.x,0),d=s.height-s.y+u.descent+c-s.descent,l.moveTo(o,d).lineTo(o+s.width,d).lineTo(o+s.width,d+g).lineTo(o,d+g).endPath()):a===r.TextVerticalType.Vertical270?(f=o,d-=v,l.moveTo(f,d).lineTo(f,d+s.height).lineTo(f+g,d+s.height).lineTo(f+g,d).endPath()):a===r.TextVerticalType.Vertical?(p&&m&&l.translate(0,u.y),f=o,d+=v,l.moveTo(f,c).lineTo(f,c+s.height).lineTo(f+g,c+s.height).lineTo(f+g,c).endPath()):a===r.TextVerticalType.EastAsianVer?(p&&m&&l.translate(0,u.y),f=o,c-=h,d-=h,d+=v,s.isVerticalRotateChar()&&(o-=s.descent),l.moveTo(o,c).lineTo(o,c+s.height).lineTo(o+g,c+s.height).lineTo(o+g,c).endPath()):(p&&m&&l.translate(0,u.y),f=o,d+=v,l.moveTo(f,c).lineTo(f,c+s.height).lineTo(f+g,c+s.height).lineTo(f+g,c).endPath())}));else{var v=s.getVerticalType(),g=u.descent,y=s.getScriptPosition();0!==y&&(g*=1-y/100);var E=void 0,S=void 0;v===r.TextVerticalType.Horizontal?(E=u.x+s.width+s.spacing,S=s.isThaiChar?s.y-g+s.descent/2:s.y-g+s.descent,l.moveTo(0,S).lineTo(E,S).lineTo(E,S+1.5).lineTo(0,S+1.5).endPath()):v===r.TextVerticalType.EastAsianVer?(E=s.height+s.spacing,S=s.isVerticalRotateChar()?-s.descent:0,l.moveTo(S,0).lineTo(S-1.5,0).lineTo(S-1.5,E).lineTo(S,E).endPath()):v===r.TextVerticalType.Vertical?(E=s.height+s.spacing,S=-s.descent,l.moveTo(S,0).lineTo(S-1.5,0).lineTo(S-1.5,E).lineTo(S,E).endPath()):v===r.TextVerticalType.Vertical270?(E=s.height+s.spacing,S=s.descent+s.height+s.descent,l.moveTo(S,0).lineTo(S+1.5,0).lineTo(S+1.5,E).lineTo(S,E).endPath()):v===r.TextVerticalType.VerticalWordArtRightToLeft&&(S=0,E=s.height+s.spacing,l.moveTo(S,0).lineTo(S-1.5,0).lineTo(S-1.5,E).lineTo(S,E).endPath())}l.mapPath(c);var T=e.querySelector(".clone_text");if(T){var A=T.getAttribute("fill");A&&c.setAttribute("fill",A);var k=T.getAttribute("stroke");k&&c.setAttribute("stroke",k),T.remove()}var _=e.querySelector("#text_autonum");_&&_.remove(),e.querySelector("svg").firstElementChild.appendChild(c)}},e.prototype.createTextBoxPath=function(e){var t=this.shape,i=t.textBoxRect,n=i.x,r=i.y,a=i.width,s=i.height;r/=635,a/=635,s/=635;var o="M ".concat(n/=635," ").concat(r," L ").concat(n+a," ").concat(r," L ").concat(n+a," ").concat(r+s," L ").concat(n," ").concat(r+s," L ").concat(n," ").concat(r),u=window.domTools.createSvgNodeByTag("path",{d:o,fill:"none",stroke:"none"}),c=e.querySelector("#s_".concat(t.getId(),"_geomerty")),l=c&&c.firstElementChild;return l&&l.appendChild(u),u},e.prototype.createDashPattern=function(e){var t=[[],[1,3],[4,3],[8,3],[4,3,1,3],[8,3,1,3],[8,3,1,3,1,3],[3,1],[1,1],[3,1,1,1],[3,1,1,1,1,1]];return e<11?t[e]:t[0]},e.prototype.isLineShape=function(){var e=this.shape;if(!e)return!1;if(e&&e.isTowControlPointShapeType())return!0;var t=e&&e.private&&e.private.flags;return!(!t||!t.isConnector)||!(!t||100!==t.shapeType||t.isCloseCustomPath)},e.prototype._cloneOriDiv=function(e){var t=document.createElement("div"),i=e.style;window.domTools.setStyle(t,{width:i.width,height:i.height});var n=Array.from(e.querySelectorAll("svg")).find((function(e){return!e.classList.contains("clone")}));if(!n)return t;var r=n.cloneNode(!0);return r.classList.add("clone"),t.appendChild(r),e.appendChild(t),t.setAttribute("opacity","0"),t.style.opacity="0",t.setAttribute("id",e.id+"_clone"),t},e.prototype.needSetUnderline=function(){return this.attrNames.includes(a.KwoAnimAttributeName.kwoAnimTextFontUnderline)},e.prototype.needSetFill=function(){var e=this.shape.visual.getAllProperties(),t=e&&e.fill,i=e&&e.outline;if(this.effectType===a.KsoAnimEffect.BrushOnColor){if(this.shape.getShapeType()===r.ShapeType.TextBox&&(!t||!t.type)&&(!i||i.fill&&!i.fill.type))return!1}else if(this.effectType===a.KsoAnimEffect.ColorWave&&this.shape.isTextShape()&&(!t||!t.type))return!1;return this.attrNames.includes(a.KwoAnimAttributeName.kwoAnimShapeFillColor)||this.attrNames.includes(a.KwoAnimAttributeName.kwoAnimShapeFillType)},e.prototype.needSetLineFill=function(){return this.attrNames.includes(a.KwoAnimAttributeName.kwoAnimShapeLineColor)},e.prototype.needSetTextFill=function(){return this.attrNames.includes(a.KwoAnimAttributeName.kwoAnimTextFontColor)},e.prototype.needCreateBg=function(){var e=this.shape;return e&&!e.isTextBox()&&!e.getPicture()&&this.isChangeColorAnim()},e.prototype.isChangeColorAnim=function(){return[a.KsoAnimEffect.ComplementaryColor,a.KsoAnimEffect.ComplementaryColor2,a.KsoAnimEffect.ContrastingColor,a.KsoAnimEffect.Desaturate,a.KsoAnimEffect.Lighten].includes(this.effectType)},e}();t.CloneNodeHelper=s;var o=function(){function e(){this.path="",this.transform=""}return e.prototype.translate=function(e,t){this.transform="translate(".concat(e,", ").concat(t,")")},e.prototype.moveTo=function(e,t){return this.path.indexOf("M")>-1?(console.error("has M"),this):(this.path+="M ".concat(e," ").concat(t," "),this)},e.prototype.lineTo=function(e,t){return this.path+="L ".concat(e," ").concat(t," "),this},e.prototype.endPath=function(){return this.path+="Z",this},e.prototype.getPath=function(){return this.path},e.prototype.getTransform=function(){return this.transform},e.prototype.mapPath=function(e){e.setAttribute("d",this.getPath()),e.setAttribute("transform",this.getTransform())},e}()},6190:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fade=void 0;var n=i(143),r=i(258),a=function(e){function t(t,i,n){var a=e.call(this,r.TIME_NODE_LIST_ELEMENT.ANIMATE_EFFECT)||this;return a.type=t,a.attrName=n,a.presetClass=i,a}return(0,n.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},Object.defineProperty(t.prototype,"isFade",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.start=function(t){e.prototype.start.call(this,t);var i=t.behaviors,n=i&&i.find((function(e){return e.isSet}));if(n){var a=n.getToVal();this.setOpacityVal(a)}t.getType()===r.KsoAnimEffect.FlashBulb&&(this.isFlashBulb=!0)},t.prototype.getRawDuration=function(){return"infinite"===this.rawDuration?1:this.rawDuration},Object.defineProperty(t.prototype,"isAnimateFilter",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.setTarget=function(e){this.target=e},t.prototype.getKeyTimes=function(){return[0,1]},t.prototype.getPropName=function(){return"opacity"},t.prototype.getAttrName=function(){return this.attrName},t.prototype.setOpacityVal=function(e){e=Number(e),this.opacityVal=isNaN(e)?0:e},t.prototype.getPropValue=function(e){return this.presetClass===r.TIME_NODE_PRESET_CLASS.EMPHASIS_PRESET?this.isFlashBulb?0===e?1:e:0===e?1:this.opacityVal:0===e?this.presetClass===r.TIME_NODE_PRESET_CLASS.EXIT_PRESET?1:0:1===e?this.presetClass===r.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET?1:0:this.presetClass===r.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET?e:this.presetClass===r.TIME_NODE_PRESET_CLASS.EXIT_PRESET?1-e:void 0},t}(i(1111).Behavior);t.Fade=a},6191:function(e,t,i){"use strict";var n,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Diamond=void 0;var s=i(143),o=i(258),u=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,s.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(c[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return c[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Diamond=u;var c=((n={})[o.AnimDirection.In]=((r={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,100],[0,100],[0,100],[100,100],[100,100],[100,100],[100,100],[100,0],[100,0],[100,0],[100,0],[100,0],[100,100],[0,100],[0,0]],.5:[[0,0],[50,0],[50,0],[0,50],[0,50],[0,50],[50,100],[50,100],[50,100],[50,100],[100,50],[100,50],[100,50],[100,50],[50,0],[50,0],[100,0],[100,100],[0,100],[0,0]],.999999:[[0,0],[50,0],[50,50],[50,50],[0,50],[50,50],[50,50],[50,100],[50,100],[50,50],[50,50],[100,50],[100,50],[50,50],[50,50],[50,0],[100,0],[100,100],[0,100],[0,0]],1:[]},r[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[0,0],[0,0],[100,0],[100,0],[100,0],[100,100],[100,100],[0,100],[0,100],[0,100],[0,100]],.5:[[0,0],[0,50],[50,0],[50,0],[100,50],[100,0],[100,50],[50,100],[0,100],[50,100],[0,50],[0,100]],1:[[50,50],[50,50],[50,50],[50,50],[50,50],[50,50],[50,50],[50,50],[50,50],[50,50],[50,50],[50,50]]},r),n[o.AnimDirection.Out]=((a={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[50,50],[50,50],[50,50]],.5:[[50,0],[100,50],[50,100],[0,50]],.999999:[[50,-50],[150,50],[50,150],[-50,50]],1:[]},a[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[50,0],[50,50],[50,50],[50,50],[50,50],[50,50],[50,0],[100,0],[100,100],[0,100],[0,0]],.5:[[0,0],[50,0],[50,0],[0,50],[50,100],[100,50],[50,0],[50,0],[100,0],[100,100],[0,100],[0,0]],1:[[-1,-1],[50,-50],[50,-50],[-50,50],[50,150],[150,50],[50,-50],[50,-50],[150,-1],[100,150],[-1,150],[-1,-1]]},a),n)},6192:function(e,t,i){"use strict";var n,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Plus=void 0;var s=i(143),o=i(258),u=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,s.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(c[this.direction][this.presetClass]).map((function(e){return Number(e)})).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return c[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Plus=u;var c=((n={})[o.AnimDirection.In]=((r={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[0,0],[0,0],[0,0],[0,100],[0,100],[0,100],[100,100],[100,100],[100,100],[100,0],[100,0],[100,0],[100,0],[100,100],[0,100],[0,0]],.999999:[[0,0],[50,0],[50,50],[0,50],[0,50],[50,50],[50,100],[50,100],[50,50],[100,50],[100,50],[50,50],[50,0],[100,0],[100,100],[0,100],[0,0]],1:[]},r[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[0,-50],[100,-50],[100,0],[150,0],[150,100],[100,100],[100,150],[0,150],[0,100],[-50,100],[-50,0]],1:[[50,50],[50,0],[50,0],[50,50],[100,50],[100,50],[50,50],[50,100],[50,100],[50,50],[0,50],[0,50]]},r),n[o.AnimDirection.Out]=((a={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[50,0],[50,0],[50,50],[100,50],[100,50],[50,50],[50,100],[50,100],[50,50],[0,50],[0,50]],.999999:[[0,0],[0,-50],[100,-50],[100,0],[150,0],[150,100],[100,100],[100,150],[0,150],[0,100],[-50,100],[-50,0]],1:[]},a[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[50,0],[50,50],[0,50],[0,50],[50,50],[50,100],[50,100],[50,50],[100,50],[100,50],[50,50],[50,0],[100,0],[100,100],[0,100],[0,0]],1:[[0,0],[0,0],[0,0],[0,0],[0,100],[0,100],[0,100],[100,100],[100,100],[100,100],[100,0],[100,0],[100,0],[100,0],[100,100],[0,100],[0,0]]},a),n)},6193:function(e,t,i){"use strict";var n,r,a,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Barn=void 0;var u=i(143),c=i(258),l=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,u.__extends)(t,e),t.prototype.getKeyTimes=function(){return Object.keys(h[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropValue=function(e){return h[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Barn=l;var h=((n={})[c.AnimDirection.HorizontalIn]=((r={})[c.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[100,0],[100,0],[0,0],[0,100],[100,100],[100,100],[0,100]],.999999:[[0,0],[100,0],[100,50],[0,50],[0,50],[100,50],[100,100],[0,100]],1:[]},r[c.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[100,0],[100,50],[0,50],[100,50],[100,100],[0,100]],1:[[0,50],[100,50],[100,50],[0,50],[100,50],[100,50],[0,50]]},r),n[c.AnimDirection.HorizontalOut]=((a={})[c.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,50],[100,50],[100,50],[0,50],[100,50],[100,50],[0,50]],.999999:[[0,0],[100,0],[100,50],[0,50],[100,50],[100,100],[0,100]],1:[]},a[c.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[100,0],[100,50],[0,50],[0,50],[100,50],[100,100],[0,100]],1:[[0,0],[100,0],[100,0],[0,0],[0,100],[100,100],[100,100],[0,100]]},a),n[c.AnimDirection.VerticalIn]=((s={})[c.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[0,100],[0,100],[0,0],[100,0],[100,100],[100,100],[100,0]],.999999:[[0,0],[0,100],[50,100],[50,0],[50,0],[50,100],[100,100],[100,0]],1:[]},s[c.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[0,100],[50,100],[50,0],[50,100],[100,100],[100,0]],1:[[50,0],[50,100],[50,100],[50,0],[50,100],[50,100],[50,0]]},s),n[c.AnimDirection.VerticalOut]=((o={})[c.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,0],[50,100],[50,100],[50,0],[50,100],[50,100],[50,0]],.999999:[[0,0],[0,100],[50,100],[50,0],[50,100],[100,100],[100,0]],1:[]},o[c.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[0,100],[50,100],[50,0],[50,0],[50,100],[100,100],[100,0]],1:[[0,0],[0,100],[0,100],[0,0],[100,0],[100,100],[100,100],[100,0]]},o),n)},6194:function(e,t,i){"use strict";var n,r,a,s,o,u;Object.defineProperty(t,"__esModule",{value:!0}),t.Wheel=void 0;var c=i(143),l=i(258),h=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,c.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(f[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return f[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Wheel=h;var f=((n={})[l.AnimDirection.Wheel1]=((r={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[50,0],[50,0],[50,0],[50,0],[50,0],[50,0]],.125:[[50,50],[50,0],[100,0],[100,0],[100,0],[100,0],[100,0]],.375:[[50,50],[50,0],[100,0],[100,100],[100,100],[100,100],[100,100]],.675:[[50,50],[50,0],[100,0],[100,100],[0,100],[0,100],[0,100]],.875:[[50,50],[50,0],[100,0],[100,100],[0,100],[0,0],[0,0]],.999999:[[50,50],[50,0],[100,0],[100,100],[0,100],[0,0],[50,0]],1:[]},r[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[50,50],[50,0],[0,0],[0,100],[100,100],[100,0],[50,0]],.125:[[50,50],[50,0],[0,0],[0,100],[100,100],[100,0],[100,0]],.375:[[50,50],[50,0],[0,0],[0,100],[100,100],[100,100],[100,100]],.675:[[50,50],[50,0],[0,0],[0,100],[0,100],[0,100],[0,100]],.875:[[50,50],[50,0],[0,0],[0,0],[0,0],[0,0],[0,0]],1:[[50,50],[50,0],[50,0],[50,0],[50,0],[50,0],[50,0]]},r),n[l.AnimDirection.Wheel2]=((a={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[50,0],[50,0],[50,0],[50,0],[50,50],[50,100],[50,100],[50,100],[50,100],[50,50]],.25:[[50,50],[50,0],[100,0],[100,0],[100,0],[50,50],[50,100],[0,100],[0,100],[0,100],[50,50]],.75:[[50,50],[50,0],[100,0],[100,100],[100,100],[50,50],[50,100],[0,100],[0,0],[0,0],[50,50]],.999999:[[50,50],[50,0],[100,0],[100,100],[50,100],[50,50],[50,100],[0,100],[0,0],[50,0],[50,50]],1:[]},a[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[50,50],[50,0],[0,0],[0,100],[50,100],[50,50],[50,100],[100,100],[100,0],[50,0],[50,50]],.25:[[50,50],[50,0],[0,0],[0,100],[0,100],[50,50],[50,100],[100,100],[100,0],[100,0],[50,50]],.75:[[50,50],[50,0],[0,0],[0,0],[0,0],[50,50],[50,100],[100,100],[100,100],[100,100],[50,50]],1:[[50,50],[50,0],[50,0],[50,0],[50,0],[50,50],[50,100],[50,100],[50,100],[50,100],[50,50]]},a),n[l.AnimDirection.Wheel3]=((s={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[50,0],[50,0],[50,0],[50,50],[100,83.33],[100,83.33],[100,83.33],[100,83.33],[50,50],[0,83.33],[0,83.33],[0,83.33],[50,50]],.125:[[50,50],[50,0],[66.6,0],[66.6,0],[50,50],[100,83.33],[100,100],[100,100],[100,100],[50,50],[0,83.33],[0,66.66],[0,66.66],[50,50]],.375:[[50,50],[50,0],[100,0],[100,0],[50,50],[100,83.33],[100,100],[100,100],[66.66,100],[50,50],[0,83.33],[0,33.33],[0,33.33],[50,50]],.625:[[50,50],[50,0],[100,0],[100,33.33],[50,50],[100,83.33],[100,100],[33.33,100],[33.33,100],[50,50],[0,83.33],[0,0],[0,0],[50,50]],.875:[[50,50],[50,0],[100,0],[100,66.66],[50,50],[100,83.33],[100,100],[0,100],[0,100],[50,50],[0,83.33],[0,0],[33.33,0],[50,50]],.999999:[[50,50],[50,0],[100,0],[100,83.33],[50,50],[100,83.33],[100,100],[0,100],[0,83.33],[50,50],[0,83.33],[0,0],[50,0],[50,50]],1:[]},s[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[50,50],[50,0],[0,0],[0,83.33],[50,50],[0,83.33],[0,100],[100,100],[100,83.33],[50,50],[100,83.33],[100,0],[50,0],[50,50]],.125:[[50,50],[50,0],[0,0],[0,66.66],[50,50],[0,83.33],[0,100],[100,100],[100,100],[50,50],[100,83.33],[100,0],[66.66,0],[50,50]],.375:[[50,50],[50,0],[0,0],[0,33.33],[50,50],[0,83.33],[0,100],[66.66,100],[66.66,100],[50,50],[100,83.33],[100,0],[100,0],[50,50]],.625:[[50,50],[50,0],[0,0],[0,0],[50,50],[0,83.33],[0,100],[33.33,100],[33.33,100],[50,50],[100,83.33],[100,33.33],[100,33.33],[50,50]],.875:[[50,50],[50,0],[33.33,0],[33.33,0],[50,50],[0,83.33],[0,100],[0,100],[0,100],[50,50],[100,83.33],[100,66.66],[100,66.66],[50,50]],.999999:[[50,50],[50,0],[50,0],[50,0],[50,50],[0,83.33],[0,83.33],[0,83.33],[0,83.33],[50,50],[100,83.33],[100,83.33],[100,83.33],[50,50]],1:[]},s),n[l.AnimDirection.Wheel4]=((o={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[0,50],[0,50],[0,50],[50,50],[50,0],[50,0],[50,0],[50,50],[100,50],[100,50],[100,50],[50,50],[50,100],[50,100],[50,100],[50,50]],.5:[[50,50],[0,50],[0,0],[0,0],[50,50],[50,0],[100,0],[100,0],[50,50],[100,50],[100,100],[100,100],[50,50],[50,100],[0,100],[0,100],[50,50]],.999999:[[50,50],[0,50],[0,0],[50,0],[50,50],[50,0],[100,0],[100,50],[50,50],[100,50],[100,100],[50,100],[50,50],[50,100],[0,100],[0,50],[50,50]],1:[]},o[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[50,50],[0,50],[0,100],[50,100],[50,50],[50,100],[100,100],[100,50],[50,50],[100,50],[100,0],[50,0],[50,50],[50,0],[0,0],[0,50],[50,50]],.5:[[50,50],[0,50],[0,100],[0,100],[50,50],[50,100],[100,100],[100,100],[50,50],[100,50],[100,0],[100,0],[50,50],[50,0],[0,0],[0,0],[50,50]],1:[[50,50],[0,50],[0,50],[0,50],[50,50],[50,100],[50,100],[50,100],[50,50],[100,50],[100,50],[100,50],[50,50],[50,0],[50,0],[50,0],[50,50]]},o),n[l.AnimDirection.Wheel8]=((u={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[0,0],[0,0],[50,50],[50,0],[50,0],[50,50],[100,0],[100,0],[50,50],[100,50],[100,50],[50,50],[100,100],[100,100],[50,50],[50,100],[50,100],[50,50],[0,100],[0,100],[50,50],[0,50],[0,50],[50,50]],.999999:[[50,50],[0,0],[50,0],[50,50],[50,0],[100,0],[50,50],[100,0],[100,50],[50,50],[100,50],[100,100],[50,50],[100,100],[50,100],[50,50],[50,100],[0,100],[50,50],[0,100],[0,50],[50,50],[0,50],[0,0],[50,50]],1:[]},u[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[50,50],[0,0],[0,50],[50,50],[0,50],[0,100],[50,50],[0,100],[50,100],[50,50],[50,100],[100,100],[50,50],[100,100],[100,50],[50,50],[100,50],[100,0],[50,50],[100,0],[50,0],[50,50],[50,0],[0,0],[50,50]],1:[[50,50],[0,0],[0,0],[50,50],[0,50],[0,50],[50,50],[0,100],[0,100],[50,50],[50,100],[50,100],[50,50],[100,100],[100,100],[50,50],[100,50],[100,50],[50,50],[100,0],[100,0],[50,50],[50,0],[50,0],[50,50]]},u),n)},6195:function(e,t,i){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Wedge=void 0;var a=i(143),s=i(258),o=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,a.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(u[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return u[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Wedge=o;var u=((n={})[s.AnimDirection.None]=((r={})[s.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[50,0],[50,0],[50,0],[50,0],[50,0],[50,0]],.25:[[50,50],[0,0],[0,0],[0,0],[100,0],[100,0],[100,0]],.75:[[50,50],[0,100],[0,100],[0,0],[100,0],[100,100],[100,100]],.999999:[[50,50],[50,100],[0,100],[0,0],[100,0],[100,100],[50,100]],1:[]},r[s.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[50,50],[50,0],[100,0],[100,100],[0,100],[0,0],[50,0]],.25:[[50,50],[100,0],[100,0],[100,100],[0,100],[0,0],[0,0]],.75:[[50,50],[100,100],[100,100],[100,100],[0,100],[0,100],[0,100]],1:[[50,50],[50,100],[50,100],[50,100],[50,100],[50,100],[50,100]]},r),n)},6196:function(e,t,i){"use strict";var n,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Blinds=void 0;var s=i(143),o=i(258),u=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,s.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(c[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return c[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Blinds=u;var c=((n={})[o.AnimDirection.Horizontal]=((r={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[0,0],[100,0],[100,0],[100,16.66],[0,16.66],[0,16.66],[100,16.66],[100,33.33],[0,33.33],[0,33.33],[100,33.33],[100,50],[0,50],[0,50],[100,50],[100,66.66],[0,66.66],[0,66.66],[100,66.66],[100,83.33],[0,83.33],[0,83.33],[100,83.33],[100,0]],.999999:[[0,0],[0,16.66],[100,16.66],[100,0],[100,16.66],[0,16.66],[0,33.33],[100,33.33],[100,33.33],[0,33.33],[0,50],[100,50],[100,50],[0,50],[0,66.66],[100,66.66],[100,66.66],[0,66.66],[0,83.33],[100,83.33],[100,83.33],[0,83.33],[0,100],[100,100],[100,0]],1:[]},r[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[0,16.66],[100,16.66],[100,0],[100,16.66],[0,16.66],[0,33.33],[100,33.33],[100,33.33],[0,33.33],[0,50],[100,50],[100,50],[0,50],[0,66.66],[100,66.66],[100,66.66],[0,66.66],[0,83.33],[100,83.33],[100,83.33],[0,83.33],[0,100],[100,100],[100,0]],1:[[0,0],[0,0],[100,0],[100,0],[100,16.66],[0,16.66],[0,16.66],[100,16.66],[100,33.33],[0,33.33],[0,33.33],[100,33.33],[100,50],[0,50],[0,50],[100,50],[100,66.66],[0,66.66],[0,66.66],[100,66.66],[100,83.33],[0,83.33],[0,83.33],[100,83.33],[100,0]]},r),n[o.AnimDirection.Vertical]=((a={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[0,0],[0,100],[0,100],[16.66,100],[16.66,0],[16.66,0],[16.66,100],[33.33,100],[33.33,0],[33.33,0],[33.33,100],[50,100],[50,0],[50,0],[50,100],[66.66,100],[66.66,0],[66.66,0],[66.66,100],[83.33,100],[83.33,0],[83.33,0],[83.33,100],[0,100]],.999999:[[0,0],[16.66,0],[16.66,100],[0,100],[16.66,100],[16.66,0],[33.33,0],[33.33,100],[33.33,100],[33.33,0],[50,0],[50,100],[50,100],[50,0],[66.66,0],[66.66,100],[66.66,100],[66.66,0],[83.33,0],[83.33,100],[83.33,100],[83.33,0],[100,0],[100,100],[0,100]],1:[]},a[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[16.66,0],[16.66,100],[0,100],[16.66,100],[16.66,0],[33.33,0],[33.33,100],[33.33,100],[33.33,0],[50,0],[50,100],[50,100],[50,0],[66.66,0],[66.66,100],[66.66,100],[66.66,0],[83.33,0],[83.33,100],[83.33,100],[83.33,0],[100,0],[100,100],[0,100]],1:[[0,0],[0,0],[0,100],[0,100],[16.66,100],[16.66,0],[16.66,0],[16.66,100],[33.33,100],[33.33,0],[33.33,0],[33.33,100],[50,100],[50,0],[50,0],[50,100],[66.66,100],[66.66,0],[66.66,0],[66.66,100],[83.33,100],[83.33,0],[83.33,0],[83.33,100],[0,100]]},a),n)},6197:function(e,t,i){"use strict";var n,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Box=void 0;var s=i(143),o=i(258),u=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,s.__extends)(t,e),t.prototype.setTarget=function(e){this.target=e},t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(c[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return c[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Box=u;var c=((n={})[o.AnimDirection.In]=((r={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[100,0],[100,100],[0,100],[0,0],[0,0],[0,100],[100,100],[100,0],[0,0]],.999999:[[0,0],[100,0],[100,100],[0,100],[0,0],[50,50],[50,50],[50,50],[50,50],[50,50]],1:[]},r[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[100,0],[100,100],[0,100]],1:[[50,50],[50,50],[50,50],[50,50]]},r),n[o.AnimDirection.Out]=((a={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[50,50],[50,50],[50,50],[50,50]],.999999:[[0,0],[100,0],[100,100],[0,100]],1:[]},a[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[100,0],[100,100],[0,100],[0,0],[50,50],[50,50],[50,50],[50,50],[50,50]],1:[[0,0],[100,0],[100,100],[0,100],[0,0],[0,0],[0,100],[100,100],[100,0],[0,0]]},a),n)},6198:function(e,t,i){"use strict";var n,r,a,s,o,u;Object.defineProperty(t,"__esModule",{value:!0}),t.Wipe=void 0;var c=i(143),l=i(258),h=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,c.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(f[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return f[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Wipe=h;var f=((n={})[l.AnimDirection.None]=((r={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[100,0],[100,0],[100,100],[100,100]],.999999:[[0,0],[100,0],[100,100],[0,100]],1:[]},r),n[l.AnimDirection.Up]=((a={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[100,0],[100,0],[0,0]],.999999:[[0,0],[100,0],[100,100],[0,100]],1:[]},a[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,100],[100,100],[100,0],[0,0]],1:[[0,100],[100,100],[100,100],[0,100]]},a),n[l.AnimDirection.Right]=((s={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[100,0],[100,100],[100,100],[100,0]],.999999:[[100,0],[100,100],[0,100],[0,0]],1:[]},s[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[0,100],[100,100],[100,0]],1:[[0,0],[0,100],[0,100],[0,0]]},s),n[l.AnimDirection.Down]=((o={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,100],[100,100],[100,100],[0,100]],.999999:[[0,100],[100,100],[100,0],[0,0]],1:[]},o[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[100,0],[100,100],[0,100]],1:[[0,0],[100,0],[100,0],[0,0]]},o),n[l.AnimDirection.Left]=((u={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[0,100],[0,100],[0,0]],.999999:[[0,0],[0,100],[100,100],[100,0]],1:[]},u[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[100,0],[100,100],[0,100],[0,0]],1:[[100,0],[100,100],[100,100],[100,0]]},u),n)},6199:function(e,t,i){"use strict";var n,r,a,s,o,u;Object.defineProperty(t,"__esModule",{value:!0}),t.Peek=void 0;var c=i(143),l=i(258),h=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,c.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(f[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return f[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Peek=h;var f=((n={})[l.AnimDirection.None]=((r={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[100,0],[100,0],[100,100],[100,100]],.999999:[[0,0],[100,0],[100,100],[0,100]],1:[]},r),n[l.AnimDirection.Up]=((a={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,100],[100,100],[100,100],[0,100]],.999999:[[0,100],[100,100],[100,0],[0,0]],1:[]},a[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,100],[100,100],[100,0],[0,0]],1:[[0,100],[100,100],[100,100],[0,100]]},a),n[l.AnimDirection.Right]=((s={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[0,100],[0,100],[0,0]],.999999:[[0,0],[0,100],[100,100],[100,0]],1:[]},s[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[0,100],[100,100],[100,0]],1:[[0,0],[0,100],[0,100],[0,0]]},s),n[l.AnimDirection.Down]=((o={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[100,0],[100,0],[0,0]],.999999:[[0,0],[100,0],[100,100],[0,100]],1:[]},o[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[100,0],[100,100],[0,100]],1:[[0,0],[100,0],[100,0],[0,0]]},o),n[l.AnimDirection.Left]=((u={})[l.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[100,0],[100,100],[100,100],[100,0]],.999999:[[100,0],[100,100],[0,100],[0,0]],1:[]},u[l.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[100,0],[100,100],[0,100],[0,0]],1:[[100,0],[100,100],[100,100],[100,0]]},u),n)},6200:function(e,t,i){"use strict";var n,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Checkerboard=void 0;var s=i(143),o=i(258),u=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return(0,s.__extends)(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.getKeyTimes=function(){return Object.keys(c[this.direction][this.presetClass]).map((function(e){return Number(e)}))},t.prototype.getPropName=function(){return"clipPath"},t.prototype.getPropValue=function(e){return c[this.direction][this.presetClass][e]},t}(i(1317).FilterShape);t.Checkerboard=u;var c=((n={})[o.AnimDirection.Horizontal]=((r={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[0,16.66],[0,16.66],[0,0],[16.66,0],[16.66,16.66],[16.66,16.66],[16.66,0],[33.33,0],[33.33,16.66],[33.33,16.66],[33.33,0],[50,0],[50,16.66],[50,16.66],[50,0],[66.66,0],[66.66,16.66],[66.66,16.66],[66.66,0],[83.33,0],[83.33,16.66],[83.33,16.66],[83.33,0],[0,0],[0,16.66],[-8.33,16.66],[-8.33,33.33],[-8.33,33.33],[-8.33,16.66],[8.33,16.66],[8.33,33.33],[8.33,33.33],[8.33,16.66],[25,16.66],[25,33.33],[25,33.33],[25,16.66],[41.67,16.66],[41.67,33.33],[41.67,33.33],[41.67,16.66],[58.33,16.66],[58.33,33.33],[58.33,33.33],[58.33,16.66],[75,16.66],[75,33.33],[75,33.33],[75,16.66],[91.67,16.66],[91.67,33.33],[91.67,33.33],[91.67,16.66],[0,16.66],[0,33.33],[0,33.33],[0,50],[0,50],[0,33.33],[16.66,33.33],[16.66,50],[16.66,50],[16.66,33.33],[33.33,33.33],[33.33,50],[33.33,50],[33.33,33.33],[50,33.33],[50,50],[50,50],[50,33.33],[66.66,33.33],[66.66,50],[66.66,50],[66.66,33.33],[83.33,33.33],[83.33,50],[83.33,50],[83.33,33.33],[0,33.33],[0,50],[-8.33,50],[-8.33,66.66],[-8.33,66.66],[-8.33,50],[8.33,50],[8.33,66.66],[8.33,66.66],[8.33,50],[25,50],[25,66.66],[25,66.66],[25,50],[41.67,50],[41.67,66.66],[41.67,66.66],[41.67,50],[58.33,50],[58.33,66.66],[58.33,66.66],[58.33,50],[75,50],[75,66.66],[75,66.66],[75,50],[91.67,50],[91.67,66.66],[91.67,66.66],[91.67,50],[0,50],[0,66.66],[0,66.66],[0,83.33],[0,83.33],[0,66.66],[16.66,66.66],[16.66,83.33],[16.66,83.33],[16.66,66.66],[33.33,66.66],[33.33,83.33],[33.33,83.33],[33.33,66.66],[50,66.66],[50,83.33],[50,83.33],[50,66.66],[66.66,66.66],[66.66,83.33],[66.66,83.33],[66.66,66.66],[83.33,66.66],[83.33,83.33],[83.33,83.33],[83.33,66.66],[0,66.66],[0,83.33],[-8.33,83.33],[-8.33,100],[-8.33,100],[-8.33,83.33],[8.33,83.33],[8.33,100],[8.33,100],[8.33,83.33],[25,83.33],[25,100],[25,100],[25,83.33],[41.67,83.33],[41.67,100],[41.67,100],[41.67,83.33],[58.33,83.33],[58.33,100],[58.33,100],[58.33,83.33],[75,83.33],[75,100],[75,100],[75,83.33],[91.67,83.33],[91.67,100],[91.67,100],[91.67,83.33],[0,83.33],[0,0]],.999999:[[0,0],[0,16.66],[16.66,16.66],[16.66,0],[16.66,0],[16.66,16.66],[33.33,16.66],[33.33,0],[33.33,0],[33.33,16.66],[50,16.66],[50,0],[50,0],[50,16.66],[66.66,16.66],[66.66,0],[66.66,0],[66.66,16.66],[83.33,16.66],[83.33,0],[83.33,0],[83.33,16.66],[100,16.66],[100,0],[0,0],[0,16.66],[-8.33,16.66],[-8.33,33.33],[8.33,33.33],[8.33,16.66],[8.33,16.66],[8.33,33.33],[25,33.33],[25,16.66],[25,16.66],[25,33.33],[41.67,33.33],[41.67,16.66],[41.67,16.66],[41.67,33.33],[58.33,33.33],[58.33,16.66],[58.33,16.66],[58.33,33.33],[75,33.33],[75,16.66],[75,16.66],[75,33.33],[91.67,33.33],[91.67,16.66],[91.67,16.66],[91.67,33.33],[108.33,33.33],[108.33,16.66],[0,16.66],[0,33.33],[0,33.33],[0,50],[16.66,50],[16.66,33.33],[16.66,33.33],[16.66,50],[33.33,50],[33.33,33.33],[33.33,33.33],[33.33,50],[50,50],[50,33.33],[50,33.33],[50,50],[66.66,50],[66.66,33.33],[66.66,33.33],[66.66,50],[83.33,50],[83.33,33.33],[83.33,33.33],[83.33,50],[100,50],[100,33.33],[0,33.33],[0,50],[-8.33,50],[-8.33,66.66],[8.33,66.66],[8.33,50],[8.33,50],[8.33,66.66],[25,66.66],[25,50],[25,50],[25,66.66],[41.67,66.66],[41.67,50],[41.67,50],[41.67,66.66],[58.33,66.66],[58.33,50],[58.33,50],[58.33,66.66],[75,66.66],[75,50],[75,50],[75,66.66],[91.67,66.66],[91.67,50],[91.67,50],[91.67,66.66],[108.33,66.66],[108.33,50],[0,50],[0,66.66],[0,66.66],[0,83.33],[16.66,83.33],[16.66,66.66],[16.66,66.66],[16.66,83.33],[33.33,83.33],[33.33,66.66],[33.33,66.66],[33.33,83.33],[50,83.33],[50,66.66],[50,66.66],[50,83.33],[66.66,83.33],[66.66,66.66],[66.66,66.66],[66.66,83.33],[83.33,83.33],[83.33,66.66],[83.33,66.66],[83.33,83.33],[100,83.33],[100,66.66],[0,66.66],[0,83.33],[-8.33,83.33],[-8.33,100],[8.33,100],[8.33,83.33],[8.33,83.33],[8.33,100],[25,100],[25,83.33],[25,83.33],[25,100],[41.67,100],[41.67,83.33],[41.67,83.33],[41.67,100],[58.33,100],[58.33,83.33],[58.33,83.33],[58.33,100],[75,100],[75,83.33],[75,83.33],[75,100],[91.67,100],[91.67,83.33],[91.67,83.33],[91.67,100],[108.33,100],[108.33,83.33],[0,83.33],[0,0]],1:[]},r[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[0,16.66],[16.66,16.66],[16.66,0],[16.66,0],[16.66,16.66],[33.33,16.66],[33.33,0],[33.33,0],[33.33,16.66],[50,16.66],[50,0],[50,0],[50,16.66],[66.66,16.66],[66.66,0],[66.66,0],[66.66,16.66],[83.33,16.66],[83.33,0],[83.33,0],[83.33,16.66],[100,16.66],[100,0],[0,0],[0,16.66],[-8.33,16.66],[-8.33,33.33],[8.33,33.33],[8.33,16.66],[8.33,16.66],[8.33,33.33],[25,33.33],[25,16.66],[25,16.66],[25,33.33],[41.67,33.33],[41.67,16.66],[41.67,16.66],[41.67,33.33],[58.33,33.33],[58.33,16.66],[58.33,16.66],[58.33,33.33],[75,33.33],[75,16.66],[75,16.66],[75,33.33],[91.67,33.33],[91.67,16.66],[91.67,16.66],[91.67,33.33],[108.33,33.33],[108.33,16.66],[0,16.66],[0,33.33],[0,33.33],[0,50],[16.66,50],[16.66,33.33],[16.66,33.33],[16.66,50],[33.33,50],[33.33,33.33],[33.33,33.33],[33.33,50],[50,50],[50,33.33],[50,33.33],[50,50],[66.66,50],[66.66,33.33],[66.66,33.33],[66.66,50],[83.33,50],[83.33,33.33],[83.33,33.33],[83.33,50],[100,50],[100,33.33],[0,33.33],[0,50],[-8.33,50],[-8.33,66.66],[8.33,66.66],[8.33,50],[8.33,50],[8.33,66.66],[25,66.66],[25,50],[25,50],[25,66.66],[41.67,66.66],[41.67,50],[41.67,50],[41.67,66.66],[58.33,66.66],[58.33,50],[58.33,50],[58.33,66.66],[75,66.66],[75,50],[75,50],[75,66.66],[91.67,66.66],[91.67,50],[91.67,50],[91.67,66.66],[108.33,66.66],[108.33,50],[0,50],[0,66.66],[0,66.66],[0,83.33],[16.66,83.33],[16.66,66.66],[16.66,66.66],[16.66,83.33],[33.33,83.33],[33.33,66.66],[33.33,66.66],[33.33,83.33],[50,83.33],[50,66.66],[50,66.66],[50,83.33],[66.66,83.33],[66.66,66.66],[66.66,66.66],[66.66,83.33],[83.33,83.33],[83.33,66.66],[83.33,66.66],[83.33,83.33],[100,83.33],[100,66.66],[0,66.66],[0,83.33],[-8.33,83.33],[-8.33,100],[8.33,100],[8.33,83.33],[8.33,83.33],[8.33,100],[25,100],[25,83.33],[25,83.33],[25,100],[41.67,100],[41.67,83.33],[41.67,83.33],[41.67,100],[58.33,100],[58.33,83.33],[58.33,83.33],[58.33,100],[75,100],[75,83.33],[75,83.33],[75,100],[91.67,100],[91.67,83.33],[91.67,83.33],[91.67,100],[108.33,100],[108.33,83.33],[0,83.33],[0,0]],1:[[0,0],[0,16.66],[0,16.66],[0,0],[16.66,0],[16.66,16.66],[16.66,16.66],[16.66,0],[33.33,0],[33.33,16.66],[33.33,16.66],[33.33,0],[50,0],[50,16.66],[50,16.66],[50,0],[66.66,0],[66.66,16.66],[66.66,16.66],[66.66,0],[83.33,0],[83.33,16.66],[83.33,16.66],[83.33,0],[0,0],[0,16.66],[-8.33,16.66],[-8.33,33.33],[-8.33,33.33],[-8.33,16.66],[8.33,16.66],[8.33,33.33],[8.33,33.33],[8.33,16.66],[25,16.66],[25,33.33],[25,33.33],[25,16.66],[41.67,16.66],[41.67,33.33],[41.67,33.33],[41.67,16.66],[58.33,16.66],[58.33,33.33],[58.33,33.33],[58.33,16.66],[75,16.66],[75,33.33],[75,33.33],[75,16.66],[91.67,16.66],[91.67,33.33],[91.67,33.33],[91.67,16.66],[0,16.66],[0,33.33],[0,33.33],[0,50],[0,50],[0,33.33],[16.66,33.33],[16.66,50],[16.66,50],[16.66,33.33],[33.33,33.33],[33.33,50],[33.33,50],[33.33,33.33],[50,33.33],[50,50],[50,50],[50,33.33],[66.66,33.33],[66.66,50],[66.66,50],[66.66,33.33],[83.33,33.33],[83.33,50],[83.33,50],[83.33,33.33],[0,33.33],[0,50],[-8.33,50],[-8.33,66.66],[-8.33,66.66],[-8.33,50],[8.33,50],[8.33,66.66],[8.33,66.66],[8.33,50],[25,50],[25,66.66],[25,66.66],[25,50],[41.67,50],[41.67,66.66],[41.67,66.66],[41.67,50],[58.33,50],[58.33,66.66],[58.33,66.66],[58.33,50],[75,50],[75,66.66],[75,66.66],[75,50],[91.67,50],[91.67,66.66],[91.67,66.66],[91.67,50],[0,50],[0,66.66],[0,66.66],[0,83.33],[0,83.33],[0,66.66],[16.66,66.66],[16.66,83.33],[16.66,83.33],[16.66,66.66],[33.33,66.66],[33.33,83.33],[33.33,83.33],[33.33,66.66],[50,66.66],[50,83.33],[50,83.33],[50,66.66],[66.66,66.66],[66.66,83.33],[66.66,83.33],[66.66,66.66],[83.33,66.66],[83.33,83.33],[83.33,83.33],[83.33,66.66],[0,66.66],[0,83.33],[-8.33,83.33],[-8.33,100],[-8.33,100],[-8.33,83.33],[8.33,83.33],[8.33,100],[8.33,100],[8.33,83.33],[25,83.33],[25,100],[25,100],[25,83.33],[41.67,83.33],[41.67,100],[41.67,100],[41.67,83.33],[58.33,83.33],[58.33,100],[58.33,100],[58.33,83.33],[75,83.33],[75,100],[75,100],[75,83.33],[91.67,83.33],[91.67,100],[91.67,100],[91.67,83.33],[0,83.33],[0,0]]},r),n[o.AnimDirection.Vertical]=((a={})[o.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET]={0:[[0,0],[16.66,0],[16.66,0],[0,0],[0,16.66],[16.66,16.66],[16.66,16.66],[0,16.66],[0,33.33],[16.66,33.33],[16.66,33.33],[0,33.33],[0,50],[16.66,50],[16.66,50],[0,50],[0,66.66],[16.66,66.66],[16.66,66.66],[0,66.66],[0,83.33],[16.66,83.33],[16.66,83.33],[0,83.33],[0,0],[16.66,0],[16.66,-8.33],[33.33,-8.33],[33.33,-8.33],[16.66,-8.33],[16.66,8.33],[33.33,8.33],[33.33,8.33],[16.66,8.33],[16.66,25],[33.33,25],[33.33,25],[16.66,25],[16.66,41.67],[33.33,41.67],[33.33,41.67],[16.66,41.67],[16.66,58.33],[33.33,58.33],[33.33,58.33],[16.66,58.33],[16.66,75],[33.33,75],[33.33,75],[16.66,75],[16.66,91.67],[33.33,91.67],[33.33,91.67],[16.66,91.67],[16.66,0],[33.33,0],[33.33,0],[50,0],[50,0],[33.33,0],[33.33,16.66],[50,16.66],[50,16.66],[33.33,16.66],[33.33,33.33],[50,33.33],[50,33.33],[33.33,33.33],[33.33,50],[50,50],[50,50],[33.33,50],[33.33,66.66],[50,66.66],[50,66.66],[33.33,66.66],[33.33,83.33],[50,83.33],[50,83.33],[33.33,83.33],[33.33,0],[50,0],[50,-8.33],[66.66,-8.33],[66.66,-8.33],[50,-8.33],[50,8.33],[66.66,8.33],[66.66,8.33],[50,8.33],[50,25],[66.66,25],[66.66,25],[50,25],[50,41.67],[66.66,41.67],[66.66,41.67],[50,41.67],[50,58.33],[66.66,58.33],[66.66,58.33],[50,58.33],[50,75],[66.66,75],[66.66,75],[50,75],[50,91.67],[66.66,91.67],[66.66,91.67],[50,91.67],[50,0],[66.66,0],[66.66,0],[83.33,0],[83.33,0],[66.66,0],[66.66,16.66],[83.33,16.66],[83.33,16.66],[66.66,16.66],[66.66,33.33],[83.33,33.33],[83.33,33.33],[66.66,33.33],[66.66,50],[83.33,50],[83.33,50],[66.66,50],[66.66,66.66],[83.33,66.66],[83.33,66.66],[66.66,66.66],[66.66,83.33],[83.33,83.33],[83.33,83.33],[66.66,83.33],[66.66,0],[83.33,0],[83.33,-8.33],[100,-8.33],[100,-8.33],[83.33,-8.33],[83.33,8.33],[100,8.33],[100,8.33],[83.33,8.33],[83.33,25],[100,25],[100,25],[83.33,25],[83.33,41.67],[100,41.67],[100,41.67],[83.33,41.67],[83.33,58.33],[100,58.33],[100,58.33],[83.33,58.33],[83.33,75],[100,75],[100,75],[83.33,75],[83.33,91.67],[100,91.67],[100,91.67],[83.33,91.67],[83.33,0],[0,0]],.999999:[[0,0],[16.66,0],[16.66,16.66],[0,16.66],[0,16.66],[16.66,16.66],[16.66,33.33],[0,33.33],[0,33.33],[16.66,33.33],[16.66,50],[0,50],[0,50],[16.66,50],[16.66,66.66],[0,66.66],[0,66.66],[16.66,66.66],[16.66,83.33],[0,83.33],[0,83.33],[16.66,83.33],[16.66,100],[0,100],[0,0],[16.66,0],[16.66,-8.33],[33.33,-8.33],[33.33,8.33],[16.66,8.33],[16.66,8.33],[33.33,8.33],[33.33,25],[16.66,25],[16.66,25],[33.33,25],[33.33,41.67],[16.66,41.67],[16.66,41.67],[33.33,41.67],[33.33,58.33],[16.66,58.33],[16.66,58.33],[33.33,58.33],[33.33,75],[16.66,75],[16.66,75],[33.33,75],[33.33,91.67],[16.66,91.67],[16.66,91.67],[33.33,91.67],[33.33,108.33],[16.66,108.33],[16.66,0],[33.33,0],[33.33,0],[50,0],[50,16.66],[33.33,16.66],[33.33,16.66],[50,16.66],[50,33.33],[33.33,33.33],[33.33,33.33],[50,33.33],[50,50],[33.33,50],[33.33,50],[50,50],[50,66.66],[33.33,66.66],[33.33,66.66],[50,66.66],[50,83.33],[33.33,83.33],[33.33,83.33],[50,83.33],[50,100],[33.33,100],[33.33,0],[50,0],[50,-8.33],[66.66,-8.33],[66.66,8.33],[50,8.33],[50,8.33],[66.66,8.33],[66.66,25],[50,25],[50,25],[66.66,25],[66.66,41.67],[50,41.67],[50,41.67],[66.66,41.67],[66.66,58.33],[50,58.33],[50,58.33],[66.66,58.33],[66.66,75],[50,75],[50,75],[66.66,75],[66.66,91.67],[50,91.67],[50,91.67],[66.66,91.67],[66.66,108.33],[50,108.33],[50,0],[66.66,0],[66.66,0],[83.33,0],[83.33,16.66],[66.66,16.66],[66.66,16.66],[83.33,16.66],[83.33,33.33],[66.66,33.33],[66.66,33.33],[83.33,33.33],[83.33,50],[66.66,50],[66.66,50],[83.33,50],[83.33,66.66],[66.66,66.66],[66.66,66.66],[83.33,66.66],[83.33,83.33],[66.66,83.33],[66.66,83.33],[83.33,83.33],[83.33,100],[66.66,100],[66.66,0],[83.33,0],[83.33,-8.33],[100,-8.33],[100,8.33],[83.33,8.33],[83.33,8.33],[100,8.33],[100,25],[83.33,25],[83.33,25],[100,25],[100,41.67],[83.33,41.67],[83.33,41.67],[100,41.67],[100,58.33],[83.33,58.33],[83.33,58.33],[100,58.33],[100,75],[83.33,75],[83.33,75],[100,75],[100,91.67],[83.33,91.67],[83.33,91.67],[100,91.67],[100,108.33],[83.33,108.33],[83.33,0],[0,0]],1:[]},a[o.TIME_NODE_PRESET_CLASS.EXIT_PRESET]={0:[[0,0],[16.66,0],[16.66,16.66],[0,16.66],[0,16.66],[16.66,16.66],[16.66,33.33],[0,33.33],[0,33.33],[16.66,33.33],[16.66,50],[0,50],[0,50],[16.66,50],[16.66,66.66],[0,66.66],[0,66.66],[16.66,66.66],[16.66,83.33],[0,83.33],[0,83.33],[16.66,83.33],[16.66,100],[0,100],[0,0],[16.66,0],[16.66,-8.33],[33.33,-8.33],[33.33,8.33],[16.66,8.33],[16.66,8.33],[33.33,8.33],[33.33,25],[16.66,25],[16.66,25],[33.33,25],[33.33,41.67],[16.66,41.67],[16.66,41.67],[33.33,41.67],[33.33,58.33],[16.66,58.33],[16.66,58.33],[33.33,58.33],[33.33,75],[16.66,75],[16.66,75],[33.33,75],[33.33,91.67],[16.66,91.67],[16.66,91.67],[33.33,91.67],[33.33,108.33],[16.66,108.33],[16.66,0],[33.33,0],[33.33,0],[50,0],[50,16.66],[33.33,16.66],[33.33,16.66],[50,16.66],[50,33.33],[33.33,33.33],[33.33,33.33],[50,33.33],[50,50],[33.33,50],[33.33,50],[50,50],[50,66.66],[33.33,66.66],[33.33,66.66],[50,66.66],[50,83.33],[33.33,83.33],[33.33,83.33],[50,83.33],[50,100],[33.33,100],[33.33,0],[50,0],[50,-8.33],[66.66,-8.33],[66.66,8.33],[50,8.33],[50,8.33],[66.66,8.33],[66.66,25],[50,25],[50,25],[66.66,25],[66.66,41.67],[50,41.67],[50,41.67],[66.66,41.67],[66.66,58.33],[50,58.33],[50,58.33],[66.66,58.33],[66.66,75],[50,75],[50,75],[66.66,75],[66.66,91.67],[50,91.67],[50,91.67],[66.66,91.67],[66.66,108.33],[50,108.33],[50,0],[66.66,0],[66.66,0],[83.33,0],[83.33,16.66],[66.66,16.66],[66.66,16.66],[83.33,16.66],[83.33,33.33],[66.66,33.33],[66.66,33.33],[83.33,33.33],[83.33,50],[66.66,50],[66.66,50],[83.33,50],[83.33,66.66],[66.66,66.66],[66.66,66.66],[83.33,66.66],[83.33,83.33],[66.66,83.33],[66.66,83.33],[83.33,83.33],[83.33,100],[66.66,100],[66.66,0],[83.33,0],[83.33,-8.33],[100,-8.33],[100,8.33],[83.33,8.33],[83.33,8.33],[100,8.33],[100,25],[83.33,25],[83.33,25],[100,25],[100,41.67],[83.33,41.67],[83.33,41.67],[100,41.67],[100,58.33],[83.33,58.33],[83.33,58.33],[100,58.33],[100,75],[83.33,75],[83.33,75],[100,75],[100,91.67],[83.33,91.67],[83.33,91.67],[100,91.67],[100,108.33],[83.33,108.33],[83.33,0],[0,0]],1:[[0,0],[16.66,0],[16.66,0],[0,0],[0,16.66],[16.66,16.66],[16.66,16.66],[0,16.66],[0,33.33],[16.66,33.33],[16.66,33.33],[0,33.33],[0,50],[16.66,50],[16.66,50],[0,50],[0,66.66],[16.66,66.66],[16.66,66.66],[0,66.66],[0,83.33],[16.66,83.33],[16.66,83.33],[0,83.33],[0,0],[16.66,0],[16.66,-8.33],[33.33,-8.33],[33.33,-8.33],[16.66,-8.33],[16.66,8.33],[33.33,8.33],[33.33,8.33],[16.66,8.33],[16.66,25],[33.33,25],[33.33,25],[16.66,25],[16.66,41.67],[33.33,41.67],[33.33,41.67],[16.66,41.67],[16.66,58.33],[33.33,58.33],[33.33,58.33],[16.66,58.33],[16.66,75],[33.33,75],[33.33,75],[16.66,75],[16.66,91.67],[33.33,91.67],[33.33,91.67],[16.66,91.67],[16.66,0],[33.33,0],[33.33,0],[50,0],[50,0],[33.33,0],[33.33,16.66],[50,16.66],[50,16.66],[33.33,16.66],[33.33,33.33],[50,33.33],[50,33.33],[33.33,33.33],[33.33,50],[50,50],[50,50],[33.33,50],[33.33,66.66],[50,66.66],[50,66.66],[33.33,66.66],[33.33,83.33],[50,83.33],[50,83.33],[33.33,83.33],[33.33,0],[50,0],[50,-8.33],[66.66,-8.33],[66.66,-8.33],[50,-8.33],[50,8.33],[66.66,8.33],[66.66,8.33],[50,8.33],[50,25],[66.66,25],[66.66,25],[50,25],[50,41.67],[66.66,41.67],[66.66,41.67],[50,41.67],[50,58.33],[66.66,58.33],[66.66,58.33],[50,58.33],[50,75],[66.66,75],[66.66,75],[50,75],[50,91.67],[66.66,91.67],[66.66,91.67],[50,91.67],[50,0],[66.66,0],[66.66,0],[83.33,0],[83.33,0],[66.66,0],[66.66,16.66],[83.33,16.66],[83.33,16.66],[66.66,16.66],[66.66,33.33],[83.33,33.33],[83.33,33.33],[66.66,33.33],[66.66,50],[83.33,50],[83.33,50],[66.66,50],[66.66,66.66],[83.33,66.66],[83.33,66.66],[66.66,66.66],[66.66,83.33],[83.33,83.33],[83.33,83.33],[66.66,83.33],[66.66,0],[83.33,0],[83.33,-8.33],[100,-8.33],[100,-8.33],[83.33,-8.33],[83.33,8.33],[100,8.33],[100,8.33],[83.33,8.33],[83.33,25],[100,25],[100,25],[83.33,25],[83.33,41.67],[100,41.67],[100,41.67],[83.33,41.67],[83.33,58.33],[100,58.33],[100,58.33],[83.33,58.33],[83.33,75],[100,75],[100,75],[83.33,75],[83.33,91.67],[100,91.67],[100,91.67],[83.33,91.67],[83.33,0],[0,0]]},a),n)},8024:function(e,t,i){"use strict";i.r(t);var n=i(25),r=i.n(n),a=i(42),s=i.n(a),o=i(147),u=i.n(o),c=i(0),l=i.n(c),h=i(3),f=i.n(h),p=i(154),m=i.n(p),d=i(258),v=function(){function e(t){l()(this,e),this.sceneScheduler=t,this.runningNodes=[],this.hideOnNextClickNodes=[],this.untilNextClickNodes=[]}return f()(e,[{key:"reset",value:function(){this.runningNodes=[]}},{key:"getCurrentScene",value:function(){return this.sceneScheduler.getCurrentScene()}},{key:"getLastScene",value:function(){return this.sceneScheduler.getLastScene()}},{key:"add",value:function(e){e&&(Number(e.getEffectNodeType())!==Number(d.EffectNodeType.TRANS)&&this.progressToEndAll(),e.startAnimation(this))}},{key:"progressToEndAll",value:function(e){for(var t=!1,i=0,n=this.runningNodes.length;i<n;){var r=this.runningNodes[i];e||r.getEffectNodeType()!==d.EffectNodeType.TRANS?(r.progressToEnd(),t=!0,this.runningNodes.splice(i,1),--n):++i}return t}},{key:"onEffectActive",value:function(e){this.runningNodes.push(e)}},{key:"onEffectFinish",value:function(e,t){for(var i=0,n=this.runningNodes.length;i<n;++i){if(this.runningNodes[i]===e){this.runningNodes.splice(i,1);break}}this.sceneScheduler.onEffectNodeFinished(e,t)}},{key:"isNoRunningNode",value:function(){return 0===this.runningNodes.length}},{key:"allNodesHasPlayFinished",value:function(){for(var e=0,t=this.runningNodes.length;e<t;++e){var i=this.runningNodes[e];if(i){if(!i.isInfiniteRepeatCount())return!1;if(i.isInfiniteRepeatUntilNextClick())return!1}}return!0}},{key:"hasEnhanceEffectNode",value:function(){return!1}},{key:"addOnNextClickEffect",value:function(e){this._addOnNextClickEffect(e);for(var t=e.getAfterEffects(),i=0;i<t.length;i++){var n=t[i];this._addOnNextClickEffect(n)}for(var r=e.getWithEffects(),a=0;a<r.length;a++){var s=r[a];this._addOnNextClickEffect(s)}}},{key:"_addOnNextClickEffect",value:function(e){this._isWhenNextClickNeedHideEffect(e)&&this.hideOnNextClickNodes.push(e),this._isUntilNextClick(e)&&this.untilNextClickNodes.push(e)}},{key:"_isWhenNextClickNeedHideEffect",value:function(e){return e.afterEffectState===d.AnimAfterType.HideOnNextClick}},{key:"_isUntilNextClick",value:function(e){return e.isUntilNextClick()}},{key:"clearOnNextClickEffect",value:function(){this.hideOnNextClickNodes=[],this.untilNextClickNodes=[]}},{key:"handleNextClick",value:function(){this.hideOnNextClickNodes.forEach((function(e){return e.getTarget()&&e.getTarget().HideOnNextClickTarget()})),this.untilNextClickNodes.forEach((function(e){return e.reset()})),this.clearOnNextClickEffect()}},{key:"hasOnNextClickEffect",value:function(){return this.hideOnNextClickNodes.length>0||this.untilNextClickNodes.length>0}}]),e}(),g=function(){function e(t,i){l()(this,e),this.scenes=t,this.nodesScheduler=new v(this),this.currentScene=null,this.mainSeq=null,this.status=y.STOP_STATUS,this.cb=i,this.currentScene=null,this.lastScene=null,this.interSeqs=[],this.interEffectScheduler={}}return f()(e,[{key:"release",value:function(){this._releaseEffectAnimation(this.currentScene),Object.values(this.interEffectScheduler).forEach((function(e){return e.reset()})),this.interEffectScheduler=null}},{key:"switchToScene",value:function(e,t,i){this.nodesScheduler.reset(),this.interEffectScheduler={},this.lastScene&&this.scenes.removeSceneSvg(this.lastScene),this.lastScene=this.currentScene,this.currentScene=e,this._updateSceneData(),this.currentScene.resetSteps();var n=this.currentScene.getTransitionEffect();n?(n.setShowImmediately(t),n.setFollowEffectIsImmediate(i>-1),this.nodesScheduler.add(n),this._setSceneStatus(y.TRANSITION_STATUS)):this.onEffectNodeFinished(null),this._stepNextImmediately(i)}},{key:"getCurrentScene",value:function(){return this.currentScene}},{key:"getLastScene",value:function(){return this.lastScene}},{key:"_updateSceneData",value:function(){var e=this;if(this.currentScene){this.currentScene.updateAnimationTarget(),this.mainSeq=this.currentScene.getMainSequence(),this.mainSeq&&this.mainSeq.reset();var t=this.currentScene.getInterSequences();t&&t.length&&t.forEach((function(t){t.reset(),e.interEffectScheduler[t.getId()+"_"+t.getSlideCategory()]=new v(e),e.currentScene.resetInterSeqSteps(t)})),this.runningSeq=null}}},{key:"seqStepNext",value:function(e,t){if(!t)return!1;var i=this.interEffectScheduler[t.getId()+"_"+t.getSlideCategory()];if(!t.hasNext()){if(!i.isNoRunningNode())return void i.progressToEndAll(!1);t.reset(),e.resetInterSeqSteps(t)}var n=t.current();if(n&&(n.reset(),n.releaseAnimation()),this.runningSeq&&this.runningSeq!==t){var r=this.interEffectScheduler[this.runningSeq.getId()+"_"+this.runningSeq.getSlideCategory()];if(r)for(var a=0,s=r.runningNodes.length;a<s;++a){var o=r.runningNodes[a];if(o&&n&&o.target===n.target){r.runningNodes.splice(a,1);break}}}this.runningSeq=t,e.increaseInterSeqSteps(t),i.add(n),t.inc()}},{key:"seqStepTo",value:function(e,t,i){if(!t)return!1;var n=this.interEffectScheduler[t.getId()+"_"+t.getSlideCategory()];n.reset(),t.reset();for(var r=t.cursor;r<i;++r)if(t.hasNext()){var a=t.next();a.setShowImmediately(!0),n.add(a),e.increaseInterSeqSteps(t)}return!0}},{key:"_releaseEffectAnimation",value:function(e){if(e){var t=e.getMainSequence();if(t)for(t.reset();t.hasNext();){t.next().releaseAnimation()}e.getInterSequences().forEach((function(e){for(e&&e.reset();e.hasNext();){var t=e.next();t&&t.releaseAnimation()}}));var i=e.getTransitionEffect();i&&i.releaseAnimation()}}},{key:"onEffectNodeFinished",value:function(e,t){e&&e.getEffectNodeType()!==d.EffectNodeType.TRANS||(this.currentScene&&this.currentScene.onTransitionAnimateFinished(),this._releaseEffectAnimation(this.lastScene),this._setSceneStatus(y.ANIMATION_STATUS)),this.cb.onEffectPlayFinished(!this.canStepNext(),t)}},{key:"canStepNext",value:function(){return!(this._isMainSeqFinished()&&this.nodesScheduler.allNodesHasPlayFinished()&&!this.nodesScheduler.hasEnhanceEffectNode())}},{key:"stepNext",value:function(e,t,i){if(this._isMainSeqFinished()){if(!t){if(!this.nodesScheduler.allNodesHasPlayFinished())return this.nodesScheduler.handleNextClick(),this._cancelCurrentPlayingEffect(),!0;if(!this.nodesScheduler.hasEnhanceEffectNode())return!!this.nodesScheduler.hasOnNextClickEffect()&&(this.nodesScheduler.handleNextClick(),!0)}return!1}if(this.nodesScheduler.handleNextClick(),!e&&y.TRANSITION_STATUS===this.status&&(this._cancelCurrentPlayingEffect(),!i))return!0;if(this.mainSeq.hasNext()){var n=this.mainSeq.next();n.setShowImmediately(e),this.nodesScheduler.add(n),this.nodesScheduler.addOnNextClickEffect(n)}return this.currentScene.increaseSteps(),!0}},{key:"canStepBack",value:function(){return!(this._isMainSeqBeHead()&&this.nodesScheduler.isNoRunningNode()&&!this.nodesScheduler.hasEnhanceEffectNode())}},{key:"stepBack",value:function(){if(this.nodesScheduler.clearOnNextClickEffect(),this._isMainSeqBeHead()){if(!this.nodesScheduler.isNoRunningNode())return this._cancelCurrentPlayingEffect(),!0;if(!this.nodesScheduler.hasEnhanceEffectNode())return!1}else{var e=this.currentScene.getSteps();if(e>-1){if(y.TRANSITION_STATUS===this.status)return this._cancelCurrentPlayingEffect(),!0;this.nodesScheduler.reset(),this.currentScene.resetSteps(),this.currentScene.resetShapesVisibility(),this.mainSeq&&this.mainSeq.reset(),this._stepNextImmediately(e-1)}}return!0}},{key:"stepToEnd",value:function(){return this._stepNextImmediately(Number.MAX_VALUE,!0),!0}},{key:"_stepNextImmediately",value:function(e,t){for(var i=this.currentScene.getSteps();i<e;++i)if(!this.stepNext(!0,t))return!1;return!0}},{key:"_setSceneStatus",value:function(e){this.status=e}},{key:"_isMainSeqFinished",value:function(){return Object.isEmpty(this.mainSeq)||!this.mainSeq.hasNext()}},{key:"_isMainSeqBeHead",value:function(){return Object.isEmpty(this.mainSeq)||!this.mainSeq.hasPrevious()}},{key:"_cancelCurrentPlayingEffect",value:function(){this.nodesScheduler.progressToEndAll(!0)&&this.status===y.TRANSITION_STATUS&&(this.status=y.ANIMATION_STATUS)}},{key:"getEffectsAmount",value:function(){return this.mainSeq&&this.mainSeq.effects?this.mainSeq.effects.length:-1}}]),e}(),y={STOP_STATUS:0,TRANSITION_STATUS:1,ANIMATION_STATUS:2},E=function(){function e(){l()(this,e),e.MOTION_TRANSFORM=1,e.ROTATION_TRANSFORM=2,e.SCALE_TRANSFORM=4,e.SKEW_TRANSFORM=8,e.ALL_TRANSFORM=e.MOTION_TRANSFORM|e.ROTATION_TRANSFORM|e.SCALE_TRANSFORM|e.SKEW_TRANSFORM}return f()(e,[{key:"release",value:function(){}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"setAttribute",value:function(e,t){return!1}},{key:"getInitRenderRect",value:function(){return null}},{key:"getCurrentRenderRect",value:function(){return null}},{key:"getInitShapeRect",value:function(){return null}},{key:"getCurrentShapeRect",value:function(){return null}},{key:"getSceneRect",value:function(){return null}},{key:"getScene",value:function(){return null}},{key:"setRunningEffect",value:function(e){this.runningEffect=e}},{key:"resetRunningEffect",value:function(){this.runningEffect=null}},{key:"getRunningEffect",value:function(){return this.runningEffect}}]),e}(),S=function(e){function t(e,i,n,a){l()(this,t);var s=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.scene=e,s.shape=i,s.commonSlide=n,s.visible=T.UNDEFINED,s.attrs={},s.shapeDiv=null,s.initialRenderRect=null,s.isSetVisible=!0,s.textRange=a,s}return s()(t,e),f()(t,[{key:"getShape",value:function(){return this.shape}},{key:"getSlide",value:function(){return this.commonSlide}},{key:"getShapeLayout",value:function(){return this.scene.getShapeLayout(this.shape.getId(),!!this.commonSlide.isNormalSlide,!!this.commonSlide.isLayoutSlide,!!this.commonSlide.isMasterSlide)}},{key:"setIsTriggerTarget",value:function(e){this.isTriggerTarget=e}},{key:"getIsStatic",value:function(){return this.isStatic}},{key:"setIsStatic",value:function(e){this.isStatic=e}},{key:"hasVisibleSet",value:function(){return Number(this.visible)!==Number(T.UNDEFINED)}},{key:"resetVisibility",value:function(){this.visible=T.UNDEFINED}},{key:"isVisible",value:function(){return Object.isEmpty(this.attrs[d.KwoAnimAttributeName.kwoAnimVisibility])?Number(this.visible)!==T.INVISIBLE:this.attrs[d.KwoAnimAttributeName.kwoAnimVisibility]}},{key:"setVisible",value:function(e){var t=this.visible;return this.visible=e?T.VISIBLE:T.INVISIBLE,this.visible===t}},{key:"show",value:function(){this.setVisible(!0),this.shape.isVideo()&&this.changeMediaVisible(!0),this.draw()}},{key:"hide",value:function(){this.setVisible(!1),this.shape.isVideo()&&this.changeMediaVisible(!1),this.draw()}},{key:"changeMediaVisible",value:function(e){var t=this.scene&&this.scene.getCoreView();t&&t.workspace.editShell.doc.changeMediaVisible({slideId:this.commonSlide.getId(),shapeId:this.shape.getId(),visible:e})}},{key:"onCurrentScenePrepareToShow",value:function(){}},{key:"onCurrentSceneShow",value:function(){}},{key:"onCurrentSceneHide",value:function(){}},{key:"_ensureRenderCache",value:function(){if(!this.shapeDiv){var e=this.scene.getSvgSync();if(!e)return;var t=this.shape.getId(),i=-1,n=-1;this.textRange.isHeadEffect()||!this.textRange.isByParaAnim&&!this.textRange.isByCharAnim||(i=this.textRange.getGcpStart(),n=this.textRange.getGcpEnd()),this.shapeDiv=this.scene.getShapeDiv(e,t,i,n,!!this.commonSlide.isNormalSlide,!!this.commonSlide.isLayoutSlide,!!this.commonSlide.isMasterSlide)}}},{key:"getShapeDiv",value:function(){return this._ensureRenderCache(),this.shapeDiv}},{key:"getShapeSvg",value:function(){return this.shapeDiv.querySelector("svg")}},{key:"draw",value:function(){this._ensureRenderCache(),this.shapeDiv&&(this.isVisible()?this.isSetVisible||(this.shapeDiv.show(),this.isSetVisible=!0):this.isSetVisible&&(this.shapeDiv.hide(),this.isSetVisible=!1))}},{key:"getInitRenderRect",value:function(){return this.initialRenderRect}},{key:"getCurrentRenderRect",value:function(){}},{key:"getInitShapeRect",value:function(){if(!this.shapeSvgLayout){if(!this.scene.getSvgSync())return null;this.shapeSvgLayout=this.scene.getShapeSvgLayout(this.shape.getId(),!!this.commonSlide.isNormalSlide,!!this.commonSlide.isLayoutSlide,!!this.commonSlide.isMasterSlide,this.textRange)}return this.shapeSvgLayout}},{key:"getCurrentShapeRect",value:function(){return this.currentShapeRect||(this.currentShapeRect=this.getInitShapeRect().clone()),this.currentShapeRect}},{key:"updateCurrentProps",value:function(e){var t=this,i=e.translateX,n=e.translateY,r=e.translate,a=e.scale,s=e.scaleX,o=e.scaleY,u=this.getInitShapeRect(),c=new window.QMatrix;if(Object.isEmpty(i)&&Object.isEmpty(n)||(i=i||0,n=n||0,!isNaN(i)&&!isNaN(n)&&c.translate(i,n)),!Object.isEmpty(r)){var l=r[0]||0,h=r[1]||0;!isNaN(l)&&!isNaN(h)&&c.translate(l,h),this.currentShapeRect=c.Map(u)}var f=function(e,i){if(!isNaN(e)&&!isNaN(i)){var n=u.center();c.translate(n.x(),n.y()),c.scale(e,i),c.translate(-n.x(),-n.y()),t.currentShapeRect=c.Map(u)}};Object.isEmpty(a)||f(a.x,a.y),Object.isEmpty(s)||f(s,1),Object.isEmpty(o)||f(1,o)}},{key:"resetCurrentProps",value:function(e){var t=this.getInitShapeRect();this.currentShapeRect=t}},{key:"getSceneRect",value:function(){return this.scene.getViewPortRect()}},{key:"getScene",value:function(){return this.scene}},{key:"getScale",value:function(){return this.scene.getScale(this.shape.getId(),!!this.commonSlide.isNormalSlide,!!this.commonSlide.isLayoutSlide,!!this.commonSlide.isMasterSlide)}},{key:"HideOnNextClickTarget",value:function(){if(this.shapeDiv){this.hide();this.shapeDiv.style.setProperty("opacity","0","important"),this.shapeDiv.style.animation="",this.shapeDiv.style.animation=""}}},{key:"getTriggerObjId",value:function(){return this.triggerObjId}},{key:"getGlyph",value:function(){return this.glyph||!this.textRange.isByCharAnim||this.textRange.isHeadEffect()||(this.glyph=this.scene.getGlyph(this.shape,this.textRange.getGcpStart())),this.glyph}},{key:"isNoneFill",value:function(){var e=this.shape,t=e&&e.visual&&e.visual.getAllProperties(),i=t&&t.fill;return!i||!i.type}},{key:"isNoneOutline",value:function(){var e=this.shape,t=e&&e.visual&&e.visual.getAllProperties(),i=t&&t.outline;return!i||i.fill&&!i.fill.type}},{key:"isNoneFillAndOutline",value:function(){return this.isNoneFill()&&this.isNoneOutline()}}]),t}(E),T={UNDEFINED:-1,INVISIBLE:0,VISIBLE:1},A=function(){function e(t,i){l()(this,e),this.scenes=t,this.scene=i,this.svg=null}var t;return f()(e,[{key:"release",value:function(){this.scene=null,this.svg=null}},{key:"getSvg",value:function(){return this.svg}},{key:"render",value:(t=u()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.getSvg();case 2:this.svg=e.sent,this.scenes.commitRenderBuffer(this.scene),this.doRender(),this.scene&&this.scene.setIsDirty(!0);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"doRender",value:function(){for(var e=0,t=this.scene.getShapeCount();e<t;++e){this.scene.getShape(e).draw()}}}]),e}(),k=function(){function e(t,i,n){l()(this,e),this.scenes=t,this.slide=i,this.baseView=n,this.rawTransition=i.getTransition(),this.prevRawTransition=null,this.timeNodeData=null,this.transitionTarget=null,this.transitionEffect=null,this.state=null,this.stepIndex=-1,this.interSeqStepIndex={},this.needSplitMap={}}var t,i;return f()(e,[{key:"getCoreView",value:function(){return this.baseView&&this.baseView.coreView}},{key:"getScenes",value:function(){return this.scenes}},{key:"setTimeNodeData",value:function(e){this.timeNodeData=e}},{key:"getMainSequence",value:function(){return this.timeNodeData.getMainSequence()}},{key:"setTransitionEffect",value:function(e){this.transitionEffect=e}},{key:"getTransitionEffect",value:function(){return this.transitionEffect}},{key:"getRawTransition",value:function(){return this.rawTransition}},{key:"setPrevRawTransition",value:function(e){this.prevRawTransition=e}},{key:"getPrevRawTransition",value:function(){return this.prevRawTransition}},{key:"setTransitionTarget",value:function(e){this.transitionTarget=e}},{key:"getHasTransitionFollowEffect",value:function(){return!Object.isEmpty(this.timeNodeData.getTransitionFollowedEffect())}},{key:"increaseSteps",value:function(){this.stepIndex++}},{key:"resetSteps",value:function(){this.stepIndex=-1}},{key:"getSteps",value:function(){return this.stepIndex}},{key:"getCurrStepEffect",value:function(){var e=this.getMainSequence();return e&&e.getEffectByStep(this.getSteps())}},{key:"setSteps",value:function(e){this.stepIndex=e}},{key:"createShapeTarget",value:function(e,t,i){return this.updateNeedSplitMap(e,t,i),new S(this,e,t,i)}},{key:"updateNeedSplitMap",value:function(e,t,i){if(i&&(i.isByParaAnim||i.isByCharAnim)){var n=t.getId()+"_"+e.getId();this.needSplitMap[n]||(this.needSplitMap[n]={});for(var r=i.getParaStart(),a=i.getParaEnd(),s=r;s<=a;s++)this.needSplitMap[n][""+s]=i.isByCharAnim}}},{key:"getTriggerEffects",value:function(){return this.timeNodeData?this.timeNodeData.getTriggerEffects():[]}},{key:"getInterSequences",value:function(){return this.timeNodeData?this.timeNodeData.getInterSequences():[]}},{key:"getShapeCount",value:function(){return this.timeNodeData?this.timeNodeData.getShapeCount():0}},{key:"getShape",value:function(e){return this.timeNodeData?this.timeNodeData.getShape(e):null}},{key:"getAnimationTarget",value:function(e,t){return this.timeNodeData?this.timeNodeData.getAnimationTarget(e,t):null}},{key:"getSlideAnimationTargets",value:function(){return this.timeNodeData?this.timeNodeData.getAnimationTargets():[]}},{key:"createSlideState",value:(i=u()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state&&this.state.release(),this.state=new A(this.scenes,this),e.next=4,this.state.render();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"resetShapesVisibility",value:function(){for(var e=0,t=this.getShapeCount();e<t;++e){var i=this.getShape(e);i&&i.resetVisibility()}}},{key:"commitSvgToDOM",value:function(){this.scenes.commitSvgToDOM(this)}},{key:"removeLastSvg",value:function(){return this.scenes.removeLastSvg()}},{key:"getLastSvgSync",value:function(){return this.scenes.getLastSvg()}},{key:"getSvgSync",value:function(){return this.state?this.state.getSvg():null}},{key:"getSvg",value:(t=u()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.baseView.getSlideSvg(this.slide.getId(),this.scenes.getViewportSize(),this.needSplitMap);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getShapeDiv",value:function(e,t,i,n,r,a,s){return this.baseView.getShapeSvg(e,t,i,n,r,a,s)}},{key:"getShapeLayout",value:function(e,t,i,n){return this.baseView.getShapeSvgLayout(this.slide.getId(),e,t,i,n)}},{key:"getShapeSvgLayout",value:function(e,t,i,n,r){var a=this.baseView.getShapeSvgLayout(this.slide.getId(),e,t,i,n),s=this.scenes.getViewportSize();if(!a||!s)return null;var o=a.getRealRectPx(),u=s&&s.scale/a.scale;if(r&&r.isByCharAnim&&!r.isHeadEffect()){var c=a.typoTextBody,l=c&&c.getGlyphByGcp(r.getGcpStart());if(o&&l){var h=l.parent,f=h&&h.parent,p=f&&f.parent,m=l.x+o.x,d=l.y+o.y,v=function(e){e&&(m+=e.x,d+=e.y)};return v(h),v(f),v(p),new window.Rect(m*u,d*u,l.width*u,l.height*u)}}return o?new window.Rect(o.x*u,o.y*u,o.width*u,o.height*u):null}},{key:"isShownAtBottom",value:function(){return this.transitionEffect.getIsNewSceneAtBottom()}},{key:"render",value:function(){this.state.render()}},{key:"setIsDirty",value:function(e){this.isDirty=e}},{key:"getIsDirty",value:function(){return this.isDirty}},{key:"onTransitionAnimateFinished",value:function(){this.transitionTarget&&(this.transitionTarget.release(),this.transitionTarget=null),this.scenes.removeLastSvg()}},{key:"getViewPortRect",value:function(){return this.scenes.getViewPortRect()}},{key:"getScale",value:function(e,t,i,n){var r=this.baseView.getShapeSvgLayout(this.slide.getId(),e,t,i,n);return r&&r.scale||.1}},{key:"getAdvanceTime",value:function(){return this.transitionEffect&&this.transitionEffect.getAdvanceTime()}},{key:"canAdvanceOnClick",value:function(){return this.transitionEffect&&this.transitionEffect.getAdvanceOnClick()}},{key:"getTranAnimIsReverse",value:function(){return this.transitionEffect&&this.transitionEffect.getIsReverse()}},{key:"resetInterSeqSteps",value:function(e){var t=e&&e.getId(),i=e&&e.getSlideCategory();this.interSeqStepIndex[t+"_"+i]=-1}},{key:"getInterSeqSteps",value:function(e){var t=e&&e.getId(),i=e&&e.getSlideCategory();return this.interSeqStepIndex[t+"_"+i]}},{key:"increaseInterSeqSteps",value:function(e){var t=e&&e.getId(),i=e&&e.getSlideCategory();this.interSeqStepIndex[t+"_"+i]++}},{key:"getGlyph",value:function(e,t){var i=e.getSlide();if(!e||!i)return t;var n=this.baseView.getShapeSvgLayout(i.getId(),e.getId(),!!i.isNormalSlide,!!i.isLayoutSlide,!!i.isMasterSlide),r=n&&n.typoTextBody;return r&&r.getGlyphByGcp(t)}},{key:"updateAnimationTarget",value:function(){}},{key:"canAdvancePlay",get:function(){return!(this.isExplainEditMode||this.isExplainPlayMode||this.isAutoPlayMode)}},{key:"isAutoPlayMode",get:function(){return this.baseView&&this.baseView.isAutoPlayMode}},{key:"isExplainEditMode",get:function(){return this.baseView&&this.baseView.isExplainEditMode}},{key:"isExplainPlayMode",get:function(){return this.baseView&&this.baseView.isExplainPlayMode}}]),e}(),_=function(){function e(t){l()(this,e),this.id=t,this.effects=[],this.cursor=-1,this.allEffects=[]}return f()(e,[{key:"isMainSequence",value:function(){return this.id===w}},{key:"setSlideCategory",value:function(e){this.slideCategory=e}},{key:"getSlideCategory",value:function(){return this.slideCategory}},{key:"setId",value:function(e){this.id=e}},{key:"getId",value:function(){return this.id}},{key:"addEffect",value:function(e){this.effects.push(e)}},{key:"reset",value:function(){this.cursor=-1;for(var e=0,t=this.effects.length;e<t;++e)this.effects[e].reset()}},{key:"hasNext",value:function(){return this.cursor+1<this.effects.length}},{key:"next",value:function(){return this.effects[++this.cursor]}},{key:"hasPrevious",value:function(){return this.cursor>-1}},{key:"previous",value:function(){return this.effects[this.cursor--]}},{key:"current",value:function(){return this.hasNext()?this.effects[this.cursor+1]:null}},{key:"inc",value:function(){return++this.cursor}},{key:"dec",value:function(){return--this.cursor}},{key:"getEffectByStep",value:function(e){return e<0||e>this.effects.length?null:this.effects[e]}},{key:"getCursor",value:function(){return this.cursor}}]),e}(),w=-1,N=i(152),P=i.n(N),C=i(26),b=i.n(C),I=i(4444),R=i(44),x=i.n(R);function O(e,t){return"string"==typeof e?e:e+t}function F(e,t){return e.hasOwnProperty(t)?e[t]:0}function D(e){var t=[];return Array.isArray(e)?t=2===e.length?t.concat(e,0):e:(t.push(F(e,"x")),t.push(F(e,"y")),t.push(F(e,"z"))),"translate("+(t=t.map((function(e){return O(e,"px")})))[0]+", "+t[1]+") rotateZ(0deg);"}var L=i(2508),M=i(6188),V=i(158),B={scale:function(e){return"scale("+e+")"},rotate:function(e){return"rotate("+O(e,"deg")+")"},translate:function(e){return D(e)},transform:function(e){return e},translateX:function(e){return"translateX("+O(e,"px")+")"},translateY:function(e){return"translateY("+O(e,"px")+")"},scaleX:function(e){return"scaleX("+e+")"},scaleY:function(e){return"scaleY("+e+")"},skewX:function(e){return"skewX("+e+"deg)"}},K={clipPath:function(e){return Object(M.createClipPath)(e)},textDecoration:function(e){return e?"text-decoration: underline":null},fontWeight:function(e){return"font-weight: "+e}},j={hueRotate:function(e){return 0===e?null:"hue-rotate("+e+"deg)"},saturate:function(e){return 1===e?null:"saturate("+e+")"},lightness:function(e){return 1===e?null:"brightness("+e+")"}};function W(e,t){if(Array.isArray(t))e.transform=L.prefix+"transform:"+D(t);else if("object"===(void 0===t?"undefined":x()(t)))for(var i in t)if(B[i])if(e.transform.includes(i)){var n=new RegExp(i+"([sS]*,[sS]*) "),r=e.transform.replace(n,B[i](t[i])+" ");e.transform=r}else e.transform+=" "+B[i](t[i]);else e[i]=t[i]}function U(e,t){return("number"==typeof e||"string"==typeof e&&-1===e.indexOf("%"))&&(e+="%"),e+"{"+function(e){if(Array.isArray(e))return L.prefix+"transform:"+D(e);var t=[],i=[],n=[],r=[],a=[],s={};if("object"===(void 0===e?"undefined":x()(e)))for(var o in e)if(B[o]&&!s[o])t.push(B[o](e[o])),s[o]=!0;else if(K[o]){var u=K[o](e[o]);V.userAgent.isIos&&"fontWeight"!==o?u&&i.push("-webkit-"+u):u&&i.push(u)}else if(j[o]){var c=j[o](e[o]);c&&n.push(c)}else a.push(o+":"+e[o]);return t.length>0&&t.push("rotateZ(0deg)"),a.push(L.prefix+"transform:"+t.join(" ")+";"),i.length>0&&a.push(i.join(" ")+";"),r.length>0&&a.push(r.join(" ")+";"),n.length>0&&a.push("filter:"+n.join(" ")+";"),a.join(";")}(t)+"}"}function G(e,t){if(Array.isArray(t))for(var i=0;i<t.length;i++){var n=t[i],r=void 0;r=isNaN(n.keyframeTime)?i?i/(t.length-1)*100:0:100*n.keyframeTime;var a=void 0;(a=V.userAgent.isIE?e.findRule(r/100):e.findRule(r+"%"))?W(a.style,n):e.appendRule(U(r,n))}else console.warn("argument error ! this is not Array",t)}var X=L.prefix?"webkitAnimation":"animation",H=L.prefix?"webkitAnimationDuration":"animationDuration",q=(L.prefix,L.prefix?"webkitAnimationDelay":"animationDelay"),Y=i(6189),z=i(335),Z=L.prefix?"webkitAnimation":"animation",$=V.userAgent.isSafari||V.userAgent.isEdge||V.userAgent.isQQBrowser||V.userAgent.isIos||V.userAgent.isInWeixin,Q=function(){function e(){l()(this,e),this._registeredAnimations={},this.animationsAmount=0,this.style=function(e,t){t||(t=document);var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var n=t.body||t.getElementsByTagName("body")[0];n?n.parentNode.insertBefore(i,n):t.documentElement.appendChild(i)}var r=t.createElement("style");return r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(t.createTextNode(e)),i.appendChild(r),r}("")}return f()(e,[{key:"getStyleSheet",value:function(){return this.style.sheet}},{key:"addKeyFrameAnimation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var i=e.rules;try{G(i,t.animation)}catch(e){console.error(e)}}}},{key:"registerAnimation",value:function(e,t){var i=this.createAnimationName(e),n=this.foundRegisterenAnimation(i,t);if(n)return n;try{var r,a=function(e,t){var i="@"+L.prefix+"keyframes "+e+"{";if(Array.isArray(t))i+=t.map((function(e,i){return U(i?i/(t.length-1)*100:0,e)})).join("");else for(var n in t)i+=U(n,t[n]);return i+="}"}(i,[]),s=this.getStyleSheet();return r=s.insertRule(a,s.cssRules.length),this._registeredAnimations[i]={rules:s.cssRules[r],sheetIndex:r,presets:{},dataToken:t,name:i},this.animationsAmount++,this._registeredAnimations[i]}catch(e){return console.error(e),{}}}},{key:"getRegisteredAnimations",value:function(){return this._registeredAnimations}},{key:"foundRegisterenAnimation",value:function(e,t){if(this._registeredAnimations[e]){if(this._registeredAnimations[e].dataToken===t)return this._registeredAnimations[e];this.deleteAnimation(this._registeredAnimations[e])}return null}},{key:"deleteAnimation",value:function(e){if(e){var t=e.name;if(this._registeredAnimations[t]){try{this.deleteStyleSheetByName(t)}catch(e){console.error(e)}delete this._registeredAnimations[t]}else console.warn("cannot find this release animation ",t)}}},{key:"deleteStyleSheetByName",value:function(e){for(var t=this.getStyleSheet().cssRules,i=-1,n=0,r=t.length;n<r;n++){if(t[n].name===e){i=n;break}}-1!==i?this.getStyleSheet().deleteRule(i):console.warn("cannot find this animation in styleSheet",e)}},{key:"destroy",value:function(){var e=this.getRegisteredAnimations();for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];this.deleteAnimation(i)}this.animationsAmount=0}},{key:"createAnimationName",value:function(e){return"wpp-animation-"+e}}],[{key:"getInstance",value:function(){return this._instance=this._instance||new e,this._instance}}]),e}();Q.mainDefaults={duration:1e3,fillMode:"both",timeFunction:"linear",iterations:1,delay:0,direction:"normal",resetWhenDone:!1,clearTransformsBeforeStart:!1,canGoToEnd:!0},Q.persetsNameString={duration:"animation-duration",name:"animation-name",delay:"animation-delay",timeFunction:"animation-timing-function",iterations:"animation-iteration-count",fillMode:"animation-fill-mode",direction:"animation-direction"};var J=function(e){function t(e,i){l()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.keyframeF=Q.getInstance(),n.animationId=e||n.keyframeF.animationsAmount,n.dataToken=i,n.animationData=n.keyframeF.registerAnimation(n.animationId,n.dataToken),n.name=n.animationData.name,n.hasPlayed=!1,n.chainAnimations=[],n.withAnimations=[],n.presets=Object.assign({},Q.mainDefaults),n.presets.name=n.name,n.isFinished=!1,n}return s()(t,e),f()(t,[{key:"addKeyFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.keyframeF;t.addKeyFrameAnimation(this.animationData,e)}},{key:"setPresets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.presets=Object.assign(this.presets,e)}},{key:"isAnimationFinish",value:function(){if(this.isFinished)return!0;for(var e=this.withAnimations,t=0,i=e.length;t<i;t++){if(!e[t].animation.isAnimationFinish())return!1}for(var n=this.chainAnimations,r=0,a=n.length;r<a;r++){if(!n[r].animation.isAnimationFinish())return!1}return this.isFinished=!0,!0}},{key:"play",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if(e){var r=i.delay,a=i.isGoToEnd,s=i.clearAnimation;r=r||0,s=void 0===s||!!s;var o=this.name;if(!o)return n(Error("must supply animation name"));var u=Object.assign({},this.presets);u.delay+=r,a&&u.canGoToEnd?(V.userAgent.isEdge?u.delay=0:u.delay=3,u.duration=1,u.iterations=1):a||1!==u.duration||(u.duration=2),this._playingEle=e;var c=function(i,r){t.isAnimationFinish()&&n&&n(e,r)};if(this._playMedia(a,u,c),!a||e.style.animationName!==o||"1ms"!==e.style[H]||1!==u.duration){var l=function i(n){if(n.animationName===t.name){"infinite"===u.iterations&&(t.animEndTimer&&clearTimeout(t.animEndTimer),t.animEndTimer=setTimeout((function(){h(n)}),u.delay+u.duration)),t.fire("animationStart",{el:e,isGoToEnd:a});for(var r=n.currentTarget;r&&"animationWrapper"===r.className;)(r=r.parentNode)&&(Object.isEmpty(r.originOpacity)&&(r.originOpacity=r.style.opacity),r.show());L.perfixEvent.remove(e,"AnimationStart",i)}},h=function i(n){if(a&&.001!==n.elapsedTime)L.perfixEvent.remove(e,"AnimationEnd",i);else if(n.animationName===t.name){t.fire("animationEnd",{el:e}),u.resetWhenDone&&ie([e],{clearAnimations:!0}),u.isMedia&&!u.isForAutoPlay?a&&(t._callback&&window.APP.shell.doc.off(V.VIEW_EVENT_TYPES.MEDIA_PLAY_END,t._callback),delete t._callback,u.cb&&u.cb(),c(t)):(u.cb&&u.cb(),c(t));for(var r=n.currentTarget;r&&"animationWrapper"===r.className;)(r=r.parentNode)&&(Object.isEmpty(r.originOpacity)||(r.style.opacity=r.originOpacity,delete r.originOpacity));L.perfixEvent.remove(e,"AnimationEnd",i)}};L.perfixEvent.add(e,"AnimationStart",l),L.perfixEvent.add(e,"AnimationEnd",h);var f=[u.name,O(u.duration,"ms"),u.timeFunction,u.iterations,O(u.delay,"ms"),u.direction,u.fillMode];this.isFinished=!1,this.hasPlayed?te(e,f.join(" "),s,!0):(te(e,f.join(" "),s),this.hasPlayed=!0),this.chainAnimations.length&&this._playChainAnimations(this.chainAnimations,e,u.delay+u.duration,c),this.withAnimations.length&&this._playWithAnimations(this.withAnimations,e,c)}}}},{key:"_playMedia",value:function(e,t,i){var n=this,r=t.delay,a=t.cb,s=t.isMedia,o=t.needInvisible,u=t.isForAutoPlay,c=t.canGoToEnd;if(s){if(!u&&!e){var l=function e(t){var r=t.shapeId,o=t.slideId,u=t.error,c=s.slideId;r===s.shapeId&&o===c&&(u&&(n.presets.duration=0,n.presets.isMedia.duration=0),window.APP.shell.doc.off(V.VIEW_EVENT_TYPES.MEDIA_PLAY_END,e),delete n._callback,a&&a(),i(n,u))};window.APP.shell.doc.on(V.VIEW_EVENT_TYPES.MEDIA_PLAY_END,l),this._callback=l}var h=s.slideId,f=s.shapeId,p=s.endAfterSlide;if(h&&f)if(o&&window.APP.shell.doc.changeMediaVisible({slideId:h,shapeId:f,visible:!0}),e&&c){if(-1!==p)return;this.audioTimer?(this.audioTimer&&clearTimeout(this.audioTimer),this.audioTimer&&delete this.audioTimer,window.APP.shell.doc.fireMediaChange({data:{slideId:h,shapeId:f,isMediaPlay:!0,restart:!0},fromAnimate:!0})):window.APP.shell.doc.fireMediaChange({data:{slideId:h,shapeId:f,isMediaPlay:!1},fromAnimate:!0})}else this.audioTimer=setTimeout((function(){n.audioTimer&&clearTimeout(n.audioTimer),n.audioTimer&&delete n.audioTimer,window.APP.shell.doc.fireMediaChange({data:{slideId:h,shapeId:f,isMediaPlay:!0,restart:!0},fromAnimate:!0})}),r)}else if(o){var m=o.slideId,d=o.shapeId;window.APP.shell.doc.changeMediaVisible({slideId:m,shapeId:d,visible:!1})}}},{key:"_stopMedia",value:function(){if(this.presets.isMedia){var e=this.presets.isMedia,t=e.slideId,i=e.shapeId,n=e.endAfterSlide;t&&i&&-1===n&&(this.audioTimer&&clearTimeout(this.audioTimer),this.audioTimer&&delete this.audioTimer,console.log("***************** animate stop stop audio",t,i),window.APP.shell.doc.fireMediaChange({data:{slideId:t,shapeId:i,isMediaPlay:!1},fromAnimate:!0}))}}},{key:"goToEnd",value:function(e,t,i){e?(clearTimeout(this.chainAnimTimer),clearTimeout(this.animEndTimer),this.play(e,{isGoToEnd:!0,originEl:i},t)):console.warn("this is not HTMLElement",e)}},{key:"detach",value:function(e){e?(this.audioTimer&&(clearTimeout(this.audioTimer),delete this.audioTimer),this.chainAnimTimer&&(clearTimeout(this.chainAnimTimer),delete this.chainAnimTimer),this.animEndTimer&&(clearTimeout(this.animEndTimer),delete this.animEndTimer),this._stop(e),this._callback&&window.APP.shell.doc.off(V.VIEW_EVENT_TYPES.MEDIA_PLAY_END,this._callback)):console.warn("this is not HTMLElement",e)}},{key:"addChainAnimations",value:function(e,t,i){t?this.chainAnimations.push({animation:e,el:t,cb:i}):console.error("chainAnimations has not element !!",t)}},{key:"addWithAnimations",value:function(e,t,i){t?this.withAnimations.push({animation:e,el:t,cb:i}):console.error("withAnimations has not element !!",t)}},{key:"_playWithAnimations",value:function(e,t,i,n){var r=this;e.forEach((function(e){var a=e.animation,s=e.cb,o=function(){s&&s(),n&&n()};e.el!==t?a.play(e.el,i,o):r._addWrapperAnimation(a,e.el,i,o)}))}},{key:"_playChainAnimations",value:function(e,t,i,n){var r=this;if(Array.isArray(e)&&0!==e.length){var a=i.delay,s=i.isGoToEnd,o=i.clearAnimation,u=a||0;e.forEach((function(e){var i=e.animation,a=e.cb,c=function(){a&&a(),n&&n()},l=i.presets,h=l.delay+u;u=h+l.duration,e.el!==t?i.play(e.el,{delay:h,isGoToEnd:s,clearAnimation:o},c):r.chainAnimTimer=setTimeout((function(){r.isFinished=!0,i.play(e.el,{isGoToEnd:s,clearAnimation:!0},c)}),h+200)}))}}},{key:"_addWrapperAnimation",value:function(e,t,i,n){var r=this._createWrapper(t,e.presets.addInnerWrapper);e.originEl=t,t.show(),e.play(r,i,n)}},{key:"_createWrapper",value:function(e,t){if(e){var i=document.createElement("div");if(window.domTools.setStyle(i,{width:"100%",height:"100%"}),t){for(var n=e;n.firstElementChild&&"svg"!==n.firstElementChild.tagName;)n=n.firstElementChild;for(;n.firstElementChild;)i.appendChild(n.firstElementChild);i.className="animationWrapper",n.appendChild(i)}else{for(;e.firstElementChild;)i.appendChild(e.firstElementChild);i.className="animationWrapper",e.appendChild(i)}return i}console.warn("this is not HTMLElement",e)}},{key:"_removeWrapper",value:function(e){if(e)for(var t=e.firstElementChild;t&&"animationWrapper"===t.className&&"svg"!==t.nodeName;){var i=t.parentElement;if(!i||!t.firstElementChild)break;i.insertBefore(t.firstElementChild,i.firstElementChild),t.remove(),t=i.firstElementChild}else console.warn("this is not HTMLElement",e)}},{key:"_stop",value:function(e){e?(this._stopMedia(),this.presets.isEntrance&&(e.style.opacity=0,e.style.opacity=0),ne(e)):console.warn("this is not HTMLElement",e)}},{key:"destroy",value:function(){this.animationData&&(this.keyframeF.deleteAnimation(this.animationData),this.animationData=null,this.withAnimations=[],this.chainAnimations=[],this.presets={},this.isFinished=!1,this.hasPlayed=!1,this.off(),delete this._playingEle),this._callback&&window.APP.shell.doc.off(V.VIEW_EVENT_TYPES.MEDIA_PLAY_END,this._callback)}}]),t}(z.a),ee=function(e){function t(){l()(this,t);var e=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._animationArray=[],e}return s()(t,e),f()(t,[{key:"add",value:function(e){if(e instanceof J)this._animationArray.push(e);else if(e instanceof Array)for(var t=0,i=e.length;t<i;t++)this.add(e[t]);else console.warn("add:this is no instanceof KeyframeAnimation",e)}},{key:"getAnimations",value:function(){return this._animationArray}},{key:"isAllAnimationsFinished",value:function(){if(this.isFinished)return this.isFinished;for(var e=this.getAnimations(),t=0,i=e.length;t<i;t++)if(!e[t].isFinished)return!1;!this._selfAniamtionFinish&&this.presets&&this.presets.cb&&(this.presets.cb(),this._selfAniamtionFinish=!0);for(var n=this.withAnimations,r=0,a=n.length;r<a;r++){if(!n[r].animation.isAllAnimationsFinished())return!1}for(var s=this.chainAnimations,o=0,u=s.length;o<u;o++){if(!s[o].animation.isAllAnimationsFinished())return!1}return this.isFinished=!0,this._playingEle&&delete this._playingEle.hasAddAnimation,!0}},{key:"play",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if(e){if(this.presets.skip){var r=Y.CloneNodeHelper.createEmptyNode(e);e&&(this.originEl=e,e=r)}else if(this.presets.changeColorParam){var a=new Y.CloneNodeHelper(this.presets.changeColorParam),s=a.createAnimNode(e);s&&(this.originEl=e,e=s)}this._playingEle=e;var o=i.delay,u=i.clearAnimation,c=i.isGoToEnd;o=o||0,c=!!c,(u=void 0===u||!!u)&&(ne(e),e.id&&this._removeWrapper(e));var l=this.getAnimations(),h=function e(i,r){if(r&&t.chainAnimations.length&&t._playChainAnimations(t.chainAnimations,i,{delay:o,isGoToEnd:c,originEl:t.originEl},e),t.isAllAnimationsFinished())return n&&n(i)};this.isFinished=!1;for(var f=0,p=l.length;f<p;f++){var m="animationWrapper"===e.className&&""===e.style[X];!m&&(this.presets.needWrapper||this.presets.isWithEffect&&this.withAnimations.find((function(t){return t.el===e})))?this._addWrapperAnimation(l[f],e,{delay:o,isGoToEnd:c,clearAnimation:!1,originEl:this.originEl},h):l[f].play(e,{delay:o,isGoToEnd:c,clearAnimation:!1,originEl:this.originEl},h)}e.hasAddAnimation=!0,this.originEl&&(this.originEl.hasAddAnimation=!0),this.hasPlayed?setTimeout((function(){t.chainAnimations.length&&t._playChainAnimations(t.chainAnimations,e,{delay:o,isGoToEnd:c,originEl:t.originEl},h)}),50):(this.withAnimations.length&&this._playWithAnimations(this.withAnimations,e,{delay:o,isGoToEnd:c,originEl:this.originEl},h),this.chainAnimations.length&&this._playChainAnimations(this.chainAnimations,e,{delay:o,isGoToEnd:c,originEl:this.originEl},h))}else console.error("this is not HTMLElement",e)}},{key:"_playChainAnimations",value:function(e,t,i,n){var r=this,a=this.getAnimationsDuration();if(Array.isArray(e)&&0!==e.length){var s=i.delay,o=i.isGoToEnd,u=i.clearAnimation,c=i.originEl,l=(s+=a)||0;e.forEach((function(e){var i=e.animation,a=e.cb,s=function(){a&&a(),n&&n()},h=i.presets,f=h.delay+l;l=f+h.duration,e.el===t||e.el.hasAddAnimation?h.isMedia?r._addWrapperAnimation(i,e.el,{delay:f,isGoToEnd:o,clearAnimation:u,originEl:c},s):r.chainAnimTimer=setTimeout((function(){r._setAnimationArrayFinish(),i.play(e.el,{isGoToEnd:o,clearAnimation:!0,originEl:c},s)}),f+200):i.play(e.el,{delay:f,isGoToEnd:o,clearAnimation:u,originEl:c},s)}))}}},{key:"_setAnimationArrayFinish",value:function(){for(var e=this.getAnimations(),t=0,i=e.length;t<i;t++)e[t].isFinished=!0;for(var n=this.withAnimations,r=0,a=n.length;r<a;r++){n[r].animation._setAnimationArrayFinish()}}},{key:"_playWithAnimations",value:function(e,t,i,n){var r=this;e.forEach((function(e){var a=e.animation,s=e.cb,o=function(){s&&s(),n&&n()};e.el===t||e.el.hasAddAnimation||a.presets.needWrapper?r._addWrapperAnimation(a,e.el,i,o):a.play(e.el,i,o)}))}},{key:"getAnimationsDuration",value:function(){for(var e=this.getAnimations(),t=0,i=0,n=e.length;i<n;i++){var r=e[i];t=r.presets.duration,r.presets.isMedia&&(t=r.presets.isMedia.duration);var a=r.presets.delay+t*r.presets.iterations;a>t&&(t=a)}if(this.withAnimations.length>0)for(var s=0;s<this.withAnimations.length;++s){var o=this.withAnimations[s].animation.getAnimationsDuration();o>t&&(t=o)}return t}},{key:"goToEnd",value:function(e,t){if((e=this._playingEle||e)&&delete e.hasAddAnimation,this._playingEle&&delete this._playingEle.hasAddAnimation,e){clearTimeout(this.chainAnimTimer);for(var i=this.getAnimations(),n=0,r=i.length;n<r;n++)i[n].goToEnd(e,t,this.originEl);for(var a=this.withAnimations,s=0,o=a.length;s<o;s++){var u=a[s],c=u.animation,l=u.el;c.goToEnd(l,t,this.originEl)}for(var h=this.chainAnimations,f=0,p=h.length;f<p;f++){var m=h[f],d=m.animation,v=m.el;d.goToEnd(v,t,this.originEl)}}else console.warn("this is not HTMLElement",e)}},{key:"detach",value:function(e,t){if(e&&this._removeWrapper(e),e=this._playingEle||e){for(var i=this.getAnimations(),n=0,r=i.length;n<r;n++)i[n].detach(e,t);for(var a=this.withAnimations,s=0,o=a.length;s<o;s++){var u=a[s],c=u.animation,l=u.el;c.detach(l,t)}for(var h=this.chainAnimations,f=0,p=h.length;f<p;f++){var m=h[f],d=m.animation,v=m.el;d.detach(v,t)}e&&delete e.hasAddAnimation,e&&e.id.indexOf("_clone")>-1&&e.remove(),this.chainAnimTimer&&(clearTimeout(this.chainAnimTimer),delete this.chainAnimTimer)}else console.warn("this is not HTMLElement",e)}},{key:"destroy",value:function(){for(var e=this.getAnimations(),i=0,n=e.length;i<n;i++)e[i].destroy();for(var r=this.withAnimations,a=0,s=r.length;a<s;a++){r[a].animation.destroy()}for(var o=this.chainAnimations,u=0,c=o.length;u<c;u++){o[u].animation.destroy()}this.presets=null,this._animationArray=[],this.withAnimations=[],this.chainAnimations=[],m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(J);function te(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if($)if(e.style[X]&&e.timer)if(i){var n=getComputedStyle(e),r=e.style,a=n&&n.getPropertyValue("transform"),s=n&&n.getPropertyValue("opacity");window.domTools.setStyle(e,{transform:a,opacity:s}),e.timer&&clearTimeout(e.timer),ne(e),e.timer=setTimeout((function(){window.domTools.setStyle(e,{transform:"",opacity:r.opacity}),e.style[X]=t,delete e.timer}),0)}else e.timer=setTimeout((function(){""!==e.style[X]?e.style[X]+=","+t:e.style[X]=t,delete e.timer}));else e.style[X]?(e.timer&&clearTimeout(e.timer),ne(e),e.timer=setTimeout((function(){e.style[X]=t,delete e.timer}))):(e.timer&&clearTimeout(e.timer),delete e.timer,e.style[X]=t);else i?(ne(e),e.style[X]=t):""!==e.style[X]?e.style[X]+=","+t:e.style[X]=t;else console.warn("this is not HTMLElement",e)}function ie(e,t){for(var i=t&&!0===t.clearAnimations,n=0,r=e.length;n<r;n++)e[n].style[Z]=getComputedStyle(e[n])[Z],i&&ne(e[n])}function ne(e){e&&(e.style[X]="",e.style.animation="")}window.keyframeAnimationFactory=Q.getInstance();var re=function(){function e(t,i){l()(this,e),this.delay=t,this.duration=i,this.keyFrames=[]}return f()(e,[{key:"getDelay",value:function(){return this.delay}},{key:"getDuration",value:function(){return this.duration}},{key:"addKeyFrame",value:function(e){for(var t=0;t<this.keyFrames.length;t++){var i=this.keyFrames[t];if(Math.abs(i.getKeyTime()-e)<Number.EPSILON)return i}var n=new ae(e);return this.keyFrames.push(n),this.keyFrames.sort((function(e,t){return e.getKeyTime()-t.getKeyTime()})),n}},{key:"getKeyFrameCount",value:function(){return this.keyFrames.length}},{key:"getKeyFrame",value:function(e){return e<0||e>=this.keyFrames.length?null:this.keyFrames[e]}}]),e}(),ae=function(){function e(t){l()(this,e),this.keyTime=t,this.props={opacity:1,translateX:0,translateY:0,rotate:0,scaleX:1,scaleY:1,clipPath:[],hueRotate:0,saturate:1,lightness:1}}return f()(e,[{key:"getKeyTime",value:function(){return this.keyTime}},{key:"setProperty",value:function(e,t){switch(e){case"opacity":case"translate":case"translateX":case"translateY":case"clipPath":case"skewX":case"hueRotate":case"saturate":case"lightness":case"textDecoration":case"fontWeight":this.props[e]=t;break;case"rotate":this.props[e]+=t;break;case"scale":case"scaleX":case"scaleY":this.props[e]*=t}}},{key:"getProperty",value:function(e){return this.props[e]}},{key:"getProperties",value:function(){return this.props}},{key:"setProperties",value:function(e){this.props=Object.assign({},e)}}]),e}(),se=i(2725),oe=i.n(se),ue=function(e){function t(e){var i=e.effectNodeType,n=e.kwoEffect,a=e.presetClass,s=e.prevEffect,o=e.parentSeq,u=e.isForAutoPlay,c=e.effectIndex,h=e.afterEffectState,f=e.isAdvancePlay,p=e.hasAfterEffect,m=e.type;l()(this,t);var v=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return v.kwoEffect=n,v._hasAfterEffect=p,v.effectNodeType=i,v.presetClass=a,v.prevEffect=s,v.parentSeq=o,v.isForAutoPlay=u,v.isAdvancePlay=f,v.behaviors=[],v.enhanceBehaviors=[],v.withEffects=[],v.afterEffects=[],v.target=null,v.afterEffectState=h,v.oriDuration=d.RAW_DURATION_INFINITE,v.setRawDuration(d.RAW_DURATION_INFINITE),v.isShowImmediately=!1,v.timeLines=null,v.animations=null,v.effectScheduler=null,v.effectIndex=Object.isEmpty(c)?-1:c,v.type=m,v}return s()(t,e),f()(t,[{key:"getType",value:function(){return this.type}},{key:"getEffectNodeType",value:function(){return this.effectNodeType}},{key:"getPresetClass",value:function(){return this.presetClass}},{key:"getRawDuration",value:function(){return this.getAutoReverse()?2*this.rawDuration:this.rawDuration}},{key:"isMedia",value:function(){return this.presetClass===d.TIME_NODE_PRESET_CLASS.MEDIA_CALL_PRESET}},{key:"isEntrance",value:function(){return this.presetClass===d.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET}},{key:"isExit",value:function(){return this.presetClass===d.TIME_NODE_PRESET_CLASS.EXIT_PRESET}},{key:"isEmphasis",value:function(){return this.presetClass===d.TIME_NODE_PRESET_CLASS.EMPHASIS_PRESET}},{key:"isPath",value:function(){return this.presetClass===d.TIME_NODE_PRESET_CLASS.PATH_PRESET}},{key:"getParentSequence",value:function(){return this.parentSeq}},{key:"hasValidBehavior",value:function(){return this.behaviors.length>0}},{key:"addBehavior",value:function(e){this.behaviors.push(e)}},{key:"addEnhanceBehavior",value:function(e){this.enhanceBehaviors.push(e)}},{key:"addWithEffect",value:function(e){e.headEffect=this,this.withEffects.push(e)}},{key:"unshiftWithEffect",value:function(e){if([d.KsoAnimEffect.Diamond,d.KsoAnimEffect.Plus,d.KsoAnimEffect.Split,d.KsoAnimEffect.Wheel,d.KsoAnimEffect.Wedge,d.KsoAnimEffect.Blinds,d.KsoAnimEffect.Box,d.KsoAnimEffect.Bounce,d.KsoAnimEffect.EaseIn,d.KsoAnimEffect.Peek,d.KsoAnimEffect.Wipe,d.KsoAnimEffect.Checkerboard].includes(e.getType()))this.withEffects.unshift(e);else{for(var t=void 0,i=e.prevEffect;i;){if(i.isPath()){t=i;break}i=i.prevEffect}if(e.headEffect=this,t){e.addInnerWrapper=!0;var n=this.withEffects.indexOf(t);-1===n?this.withEffects.unshift(e):this.withEffects.splice(n,0,e)}else this.withEffects.push(e)}}},{key:"isWithEffect",value:function(){return this.effectNodeType===d.EffectNodeType.WITH}},{key:"isRotateEffect",value:function(){return this.isEmphasis()&&this.behaviors.every((function(e){return e.isAnimateRotation}))}},{key:"isScaleEffect",value:function(){return this.isEmphasis()&&this.behaviors.every((function(e){return e.isAnimateScale}))}},{key:"isMotionEffect",value:function(){return this.isPath()&&this.behaviors.every((function(e){return e.isAnimateMotion}))}},{key:"getWithEffects",value:function(){return this.withEffects}},{key:"addAfterEffect",value:function(e){this.afterEffects.push(e)}},{key:"getAfterEffects",value:function(){return this.afterEffects}},{key:"initDuration",value:function(){var e=this.getRawDuration();if(this._isInfinite(e)){e=0;for(var t=0,i=this.behaviors.length;t<i;++t){var n=this.behaviors[t];if(n){var r=this._calBehaviorDuration(n);r>e&&(e=r)}}e>0&&this.setRawDuration(e)}this.oriDuration=e}},{key:"_calBehaviorDuration",value:function(e){var t=e.getRawDuration();this._isInfinite(t)&&(t=0);var i=e.getDelay();return t>=Number.MAX_SAFE_INTEGER-i?i:t+i}},{key:"_init",value:function(){this.isResetStartTime=!1;for(var e=0,t=this.behaviors.length;e<t;++e){var i=this.behaviors[e];if(i){var n=this.behaviors[e-1]||null;i.init(n)}}this.initDuration()}},{key:"_initTargetVisible",value:function(){this.target&&!this.target.hasVisibleSet()&&(this.isEntrance()?this._hasOnlyNotSetVisibilityBehavior()?this.target.show():this.target.hide():this.isMedia()&&this._isBackgroundAudio()?this.target.hide():this.target.show())}},{key:"_hasOnlyNotSetVisibilityBehavior",value:function(){if(1!==this.behaviors.length)return!1;var e=this.behaviors[0];return e.getBehaviorType()===d.TIME_NODE_LIST_ELEMENT.SET_TIME_NODE_BEHAVIOR&&e.getAttrName()!==d.KwoAnimAttributeName.kwoAnimVisibility}},{key:"_isBackgroundAudio",value:function(){for(var e=0;e<this.behaviors.length;e++){if(this.behaviors[e].hideWhenStopped)return!0}return!1}},{key:"setTarget",value:function(e){this.target=e}},{key:"getTarget",value:function(){return this.target}},{key:"setTriggerTarget",value:function(e){this.triggerTarget=e}},{key:"getTriggerTarget",value:function(){return this.triggerTarget}},{key:"isTriggerEffect",value:function(){return!!this.triggerTarget}},{key:"startAnimation",value:function(e){var t=this,i=this.getAnimations(e);if(i&&this.target){var n=this.target.getShapeDiv();n&&(this.active(e),this.hiddenMediaControl(),i.play(n,{isGoToEnd:this.isShowImmediately},(function(){t._onEnd()})))}}},{key:"active",value:function(e){this.effectScheduler=e,this._onActive()}},{key:"_onActive",value:function(){this.effectScheduler.onEffectActive(this)}},{key:"_onEnd",value:function(){this.effectScheduler.onEffectFinish(this,this.isTriggerEffect())}},{key:"hiddenMediaControl",value:function(){var e=this.target.getShape(),t=this.target.commonSlide;if(e.isMedia()&&!this.isMedia()){var i=e&&e.getId(),n=t&&t.getId(),r=this.isShowImmediately&&!this.isExit(),a=this.target.getScene();(a&&a.getCoreView()).workspace.editShell.doc.changeMediaVisible({slideId:n,shapeId:i,visible:r})}}},{key:"showMediaControl",value:function(){var e=this.target.getShape(),t=this.target.commonSlide;if(e.isMedia()&&!this.isMedia()){var i=this.target.getScene(),n=i&&i.getCoreView(),r=e&&e.getId(),a=t&&t.getId();!this.isExit()&&n.workspace.editShell.doc.changeMediaVisible({slideId:a,shapeId:r,visible:!0}),n.workspace.editShell.doc.fireMediaChange({data:{slideId:a,shapeId:r,isMediaPlay:!1},fromAnimate:!0})}}},{key:"getAnimations",value:function(e){var t=this;if(this.hasReset=!1,this.animations)return this.timeLines.forEach((function(e){for(var i=0,n=e.getKeyFrameCount();i<n;++i){var r=e.getKeyFrame(i).getProperties();t.target.updateCurrentProps(r)}})),this.animations;this._init();for(var i=this._doGetAnimations(),n=0;n<this.withEffects.length;++n){var r=this.withEffects[n];if(r){var a=r.getAnimations(e),s=r.getTarget();a&&s&&i.addWithAnimations(a,s.getShapeDiv(),null)}}for(var o=0;o<this.afterEffects.length;++o){var u=this.afterEffects[o];if(u){var c=u.getAnimations(e),l=u.getTarget();if(c&&l&&(i.addChainAnimations(c,l.getShapeDiv(),null),this.getEffectNodeType()===d.EffectNodeType.TRANS)){var h=e.getCurrentScene();h.increaseSteps(),h.getMainSequence().inc()}}}return this.animations=i,this.animations}},{key:"_doGetAnimations",value:function(){for(var e=new ee,t=this._getTimeLines(),i=0;i<t.length;++i){var n=this._doCreateAnimation(t[i]);e.add(n)}for(var r=void 0,a=0,s=this.behaviors.length;a<s;a++){var o=this.behaviors[a],u=e.getAnimations();this._setPresets(o,e,u[0]),r=r||o.getTargetColor&&o.getTargetColor()}return this._needCloneColorEffect()&&(this.target.isNoneFillAndOutline()&&this._isNeedBackgroundEffect()&&(r="rgba(91, 115, 213, 1)"),e&&e.setPresets({changeColorParam:{attrNames:this._getAttribute(),targetColor:r,shape:this.target.getShape(),shapeLayout:this.target.getShapeLayout(),scale:this.target.getScale(),effectType:this.getType()}})),this.getHeadEffect()||this.getType()!==d.KsoAnimEffect.BrushOnUnderline||e&&e.setPresets({changeColorParam:{attrNames:this.behaviors.map((function(e){return e.getAttrName()})),gcp:this.target.textRange.getGcpStart(),shape:this.target.getShape(),shapeLayout:this.target.getShapeLayout(),scale:this.target.getScale(),effectType:this.getType()}}),e}},{key:"_setPresets",value:function(e,t,i){t&&t.setPresets({isWithEffect:this.isWithEffect(),addInnerWrapper:this.addInnerWrapper,skip:this.skip,needWrapper:this.needAddKeyframe||this.addInnerWrapper}),i&&i.setPresets({fillMode:this._getFillMode()}),this._setAnimeAudioPreset(e,i,t)}},{key:"_setAnimeAudioPreset",value:function(e,t,i){var n=this.target.getShape(),r=this.target.commonSlide;e.isAnimateCommand?(t&&t.setPresets({isMedia:{shapeId:n&&n.getId(),slideId:r&&r.getId(),endAfterSlide:e.endAfterSlide,duration:e.rawDuration},isForAutoPlay:this.isForAutoPlay||this.isAdvancePlay}),i&&i.setPresets({isMedia:!0})):n.isMedia()&&!e.isAnimateCommand&&t&&t.setPresets({needInvisible:{shapeId:n&&n.getId(),slideId:r&&r.getId(),isExit:this.isExit()}})}},{key:"_needCloneColorEffect",value:function(){var e=this.target,t=e&&e.shape;if(e&&t)return!(!this._isNeedBackgroundEffect()||!e.isNoneFillAndOutline())||(!(!t.getPicture()||!this.isChangeColorAnim())||[d.KsoAnimEffect.ChangeFillColor,d.KsoAnimEffect.ChangeFontColor,d.KsoAnimEffect.ChangeLineColor,d.KsoAnimEffect.BrushOnColor,d.KsoAnimEffect.ColorBlend,d.KsoAnimEffect.ColorWave,d.KsoAnimEffect.Flicker].includes(this.getType()))}},{key:"_getAttribute",value:function(){var e=this.behaviors.map((function(e){return e.getAttrName()})),t=this.target;if(!t)return!1;var i=t.textRange,n=t.shape;if(this.getType()===d.KsoAnimEffect.ColorBlend&&n&&n.isTextBox()&&t.isNoneFillAndOutline())return[d.KwoAnimAttributeName.kwoAnimTextFontColor];if([d.KsoAnimEffect.BrushOnColor,d.KsoAnimEffect.ColorWave,d.KsoAnimEffect.ColorBlend,d.KsoAnimEffect.Flicker].includes(this.getType())&&i&&i.isByParaAnim)return[d.KwoAnimAttributeName.kwoAnimTextFontColor];if(n.getPicture()){var r=[];return t.isNoneFill()||r.push(d.KwoAnimAttributeName.kwoAnimShapeFillColor),t.isNoneOutline()||r.push(d.KwoAnimAttributeName.kwoAnimShapeLineColor),r}return e}},{key:"_isNeedBackgroundEffect",value:function(){if(this.target.textRange.isByCharAnim&&!this.getHeadEffect())return!1;var e=this.target.shape;return(!e||!e.isTextBox())&&this.isChangeColorAnim()}},{key:"setSkip",value:function(){this.skip=!0}},{key:"_doCreateAnimation",value:function(e){for(var t=this,i=[],n=0,r=e.getKeyFrameCount();n<r;++n){var a=e.getKeyFrame(n),s={keyframeTime:a.getKeyTime()},o=a.getProperties();for(var u in o){var c=o[u];s[u]=c}i.push(s)}var l=new J;return l.addKeyFrame({animation:i}),l.setPresets({duration:this.skip?1:e.getDuration(),delay:e.getDelay(),iterations:this.isInfiniteRepeatCount()?"infinite":this.getRepeatCount(),canGoToEnd:!this.isInfiniteRepeatUntilEnd(),isEntrance:this.isEntrance()}),l.on("animationStart",(function(e){var i=e.el,n=e.isGoToEnd;t.target.setRunningEffect(t),t._playEffectSound(n),t.isEntrance()&&(i.style.opacity=1,i.style.opacity=1,i===t.target.getShapeDiv()&&t.target.show()),t.hiddenMediaControl(),t.sendEffectIndexList()})),l.on("animationEnd",(function(e){var i=e.el;t.showMediaControl(),t.isInfiniteRepeatCount()||(i.style[H]="0ms",i.style[q]="0ms"),i.childNodes.forEach((function(e){"svg"===e.tagName&&(e.style["border-bottom"]="1px solid rgba(0,0,0,0)")})),t.getType()===d.KsoAnimEffect.FlashOnce&&(t.withEffects.find((function(e){return e.isEntrance()}))||t.headEffect&&t.headEffect.withEffects.find((function(e){return e.isEntrance()})))&&(i.style[X]=""),t.afterEffectState===d.AnimAfterType.Hide&&(i.style.opacity=0,i.style.opacity=0,i===t.target.getShapeDiv()&&t.target.hide())})),l}},{key:"_playEffectSound",value:function(e){var t=this.getSoundMediaData();if(!e&&t){var i=t.soundEffectType,n=oe.a.getInstance();2===i?n.play(b()({},t,{isAnimationSound:!0})):n.stop()}}},{key:"_stopEffectSound",value:function(){this.getSoundMediaData()&&oe.a.getInstance().stop()}},{key:"reset",value:function(){this.hasReset=!0,this._stopEffectSound(),this.target.resetRunningEffect(),this.target.resetCurrentProps(),this.isShowImmediately=!1,this._resetEffects(this.withEffects),this._resetEffects(this.afterEffects),this.animations&&this.animations.detach(this.target.getShapeDiv()),this._initTargetVisible(),Number(this.getRawDuration())!==Number(this.oriDuration)&&this.setRawDuration(this.oriDuration)}},{key:"_resetBehaviors",value:function(e){for(var t=0,i=e.length;t<i;++t){var n=e[t];n.reset(),n.hasMasterRel()?this.enhanceBehaviors.push(n):this.behaviors.push(n)}e.length=0}},{key:"_resetEffects",value:function(e){for(var t=0,i=e.length;t<i;++t){e[t].reset()}}},{key:"releaseAnimation",value:function(){this.animations&&(this.animations.destroy(),this.animations=null,this.timeLines=null),this.withEffects.forEach((function(e){return e.releaseAnimation()})),this.afterEffects.forEach((function(e){return e.releaseAnimation()})),delete this.kwoEffect}},{key:"_getTimeLines",value:function(){if(this.timeLines)return this.timeLines;var e=this._doGetTimeLine(this.behaviors,this.getRawDuration(),this.getDelay());return this.timeLines=[],e&&this.timeLines.push(e),this.timeLines}},{key:"isInvisivleWhenLastKeyFrame",value:function(){var e=this.timeLines;if(!e||this.hasReset)return!this.target.isVisible();var t=e[e.length-1],i=t&&t.getKeyFrame(t.getKeyFrameCount()-1);return!(i&&i.getProperty("opacity"))}},{key:"_doGetTimeLine",value:function(e,t,i){if(e.length<=0)return null;(e=e.concat([])).sort((function(e,t){return e.getRawDuration()+e.getDelay()-t.getRawDuration()-t.getDelay()}));for(var n=new re(i,t),r=0,a=e.length;r<a;++r){var s=e[r];s.start(this);var o=s.getDelay()/t,u=s.getRawDuration();if("infinite"!==u)for(var c=s.getKeyTimes(this.getAutoReverse()),l=0,h=c.length;l<h;++l){var f=o+c[l]*u/t;n.addKeyFrame(f)}}for(var p=void 0,m=this._needOverlayPrevProps(),v=0,g=n.getKeyFrameCount();v<g;++v){for(var y=n.getKeyFrame(v),E=y.getKeyTime()*t,S={},T=0,A=e.length;T<A;++T){var k=e[T],_=E-k.getDelay();if(_>=0){var w=_/k.getRawDuration(),N=k.getPropName();if(N){var P=void 0;w>1?(this.getAutoReverse()||k.getAutoReverse()?(w=2-w,w=Math.max(Math.min(w,1),0)):w=1,P=k.getPropValue(w,S)):P=k.getPropValue(w,S),S[N]=P}}else{var C=k.getPropName();if(C&&Object.isEmpty(S[C])){var b=k.getPropValue(0,S);S[C]=b}}}var I=e.some((function(e){return e.isAnimateColor}));if(this.prevEffect&&!I&&m){for(var R=this.prevEffect;R.prevEffect&&R.behaviors.find((function(e){return e.isAnimateColor}));)R=R.prevEffect;var x=R.timeLines,O=x&&x[x.length-1],F=O&&O.getKeyFrame(O.getKeyFrameCount()-1);if(F){var D=F.getProperties();for(var L in D)if(D.hasOwnProperty(L)){var M=D[L];if("clipPath"===L)continue;y.setProperty(L,M)}}if(this.prevEffect&&this.isWithEffect())for(var V=this.prevEffect;V;){if(1===V.behaviors.length&&V.isPath()){p=!0;var B=V.timeLines,K=B&&B[B.length-1],j=K&&K.getKeyFrame(K.getKeyFrameCount()-1);if(j){var W=j.getProperties(),U=W.translateX||0,G=W.translateY||0;S.translate?(S.translate[0]-=U,S.translate[1]-=G):(S.translateX=S.translateX||y.getProperty("translateX"),S.translateY=S.translateY||y.getProperty("translateY"),S.translateX-=U,S.translateY-=G)}}V=V.prevEffect}}this._updateKeyFrameProp(y,S),this.target.updateCurrentProps(S)}if(p){var X=n.getKeyFrame(0);if(X){var H=Object.assign({},X.getProperties());X.keyTime=1e-6,n.addKeyFrame(0);var q=n.getKeyFrame(0);H.translateX=0,H.translateY=0,q.setProperties(H)}this.needAddKeyframe=p}return(this.afterEffectState===d.AnimAfterType.Hide||this.isForAutoPlay&&this.afterEffectState===d.AnimAfterType.HideOnNextClick)&&this._onAfterEffectState(n),n}},{key:"_needOverlayPrevProps",value:function(){if(this.isEntrance())return!1;if(this.behaviors.some((function(e){return e.isAnimatePropValue}))&&this.isPath())return!1;if(this.isWithEffect()&&this.headEffect&&this.headEffect.target===this.target)return!1;var e=this.headEffect&&this.headEffect.withEffects;if(e)for(var t=0,i=e[t];i;){if(i===this)return!0;if(i.target===this.target)return!1;i=e[++t]}return!0}},{key:"_updateKeyFrameProp",value:function(e,t){var i=t.opacity;Object.isEmpty(i)||!isNaN(i)&&e.setProperty("opacity",i);var n=t.translate;Object.isEmpty(n)||(!isNaN(n[0])&&e.setProperty("translateX",n[0]),!isNaN(n[1])&&e.setProperty("translateY",n[1]));var r=t.translateX;Object.isEmpty(r)||!isNaN(r)&&e.setProperty("translateX",r);var a=t.translateY;Object.isEmpty(a)||!isNaN(a)&&e.setProperty("translateY",a);var s=t.rotate;Object.isEmpty(s)||!isNaN(s)&&e.setProperty("rotate",s);var o=t.scale;if(!Object.isEmpty(o)){var u=o;o instanceof Number&&(u={x:o,y:o}),!isNaN(u.x)&&e.setProperty("scaleX",u.x),!isNaN(u.y)&&e.setProperty("scaleY",u.y)}var c=t.scaleX;Object.isEmpty(c)||!isNaN(c)&&e.setProperty("scaleX",c);var l=t.scaleY;Object.isEmpty(l)||!isNaN(l)&&e.setProperty("scaleY",l);var h=t.skewX;Object.isEmpty(h)||!isNaN(h)&&e.setProperty("skewX",h);var f=t.clipPath;Object.isEmpty(f)||f.length>0&&e.setProperty("clipPath",f);var p=t.hsl;if(!Object.isEmpty(p)){var m=P()(p,3),d=m[0],v=m[1],g=m[2];0!==d&&e.setProperty("hueRotate",d),1!==v&&e.setProperty("saturate",v),1!==g&&e.setProperty("lightness",g)}var y=t.textDecoration;Object.isEmpty(y)||e.setProperty("textDecoration",y);var E=t.fontWeight;Object.isEmpty(E)||e.setProperty("fontWeight",E)}},{key:"_onAfterEffectState",value:function(e){var t=e.getKeyFrame(e.getKeyFrameCount()-1);e.addKeyFrame(t.keyTime-1e-5);var i=e.getKeyFrame(e.getKeyFrameCount()-2);i.setProperties(Object.assign(t.getProperties())),Object.isEmpty(i.getProperty("opacity"))&&i.setProperty("opacity",1),t.setProperties({opacity:0})}},{key:"progressToEnd",value:function(){this.animations&&this.afterEffectState!==d.AnimAfterType.HideOnNextClick&&this.animations.goToEnd(),this._stopEffectSound()}},{key:"_canShowImmediately",value:function(){var e=!0;return this.isInfiniteRepeatCount()&&this.isInfiniteRepeatUntilEnd()&&(e=!1),e}},{key:"setShowImmediately",value:function(e){this.isShowImmediately=!!e&&this._canShowImmediately(),this.isResetStartTime=!0,Number(this.getRawDuration())!==Number(this.oriDuration)&&this.setRawDuration(this.oriDuration);for(var t=0,i=this.withEffects.length;t<i;++t)this.withEffects[t].setShowImmediately(e);for(var n=0,r=this.afterEffects.length;n<r;++n)this.afterEffects[n].setShowImmediately(e)}},{key:"modifyExitSetBehavior",value:function(){if(this.isExit())for(var e=0,t=this.behaviors.length;e<t;++e){var i=this.behaviors[e];i.isSet&&i.setDelay(0)}}},{key:"_getFillMode",value:function(){var e=void 0;switch(this.getFill()){case d.TIME_NODE_FILL.REMOVE:e="backwards";break;case d.TIME_NODE_FILL.FREEZE:case d.TIME_NODE_FILL.HOLD:case d.TIME_NODE_FILL.TRANSITION:default:e="both"}return e}},{key:"sendEffectIndexList",value:function(){if(!this.isTextEffect()&&this.getEffectNodeType()!==d.EffectNodeType.WITH){var e=[this.effectIndex];if(this.withEffects.forEach((function(t){return e.push(t.effectIndex)})),e&&e.length>0){var t=this.target.getScene(),i=t&&t.getCoreView();e=Array.from(new Set(e)),i.workspace.editShell.doc.playAnimation(e)}}}},{key:"setSoundMediaData",value:function(e){this.soundData=e}},{key:"getSoundMediaData",value:function(){return this.soundData}},{key:"setHeadEffect",value:function(e){this._headEffect=e}},{key:"getHeadEffect",value:function(){return this._headEffect}},{key:"isChangeColorAnim",value:function(){return[d.KsoAnimEffect.ComplementaryColor,d.KsoAnimEffect.ComplementaryColor2,d.KsoAnimEffect.ContrastingColor,d.KsoAnimEffect.Desaturate,d.KsoAnimEffect.Lighten].includes(this.getType())}},{key:"setTextEffect",value:function(e){this._isTextEffect=e}},{key:"isTextEffect",value:function(){return this._isTextEffect}},{key:"isSupportByChar",value:function(){return![d.KsoAnimEffect.ChangeFillColor,d.KsoAnimEffect.ChangeLineColor].includes(this.getType())}},{key:"getRepeatCount",value:function(){return this.getType()===d.KsoAnimEffect.Appear?1:m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getRepeatCount",this).call(this)}},{key:"isInfiniteRepeatCount",value:function(){return this.getType()!==d.KsoAnimEffect.Appear&&m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isInfiniteRepeatCount",this).call(this)}}]),t}(I.a),ce=i(1111),le=function(e){function t(e,i,n){var a;l()(this,t);var s=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.SET_TIME_NODE_BEHAVIOR));return s.attrName=e,s.toVal=i,s.isForTransition=n,s.targetList=[],s.fakeDuration=null,a=s,r()(s,a)}return s()(t,e),f()(t,[{key:"getTargetColor",value:function(){var e=this.toVal;if("string"==typeof e){var t=d.SchemeTypeMap[e];if(!Object.isEmpty(t))return this._convertScheme2Rgb(t);if(e=e.replace("#",""),this.isColorSet&&6===e.length)return"rgba("+parseInt(e.slice(0,2),16)+", "+parseInt(e.slice(2,4),16)+", "+parseInt(e.slice(4,6),16)+")"}}},{key:"_convertScheme2Rgb",value:function(e){var t=this.targetList[0],i=t&&t.getSlide(),n=i&&i.colorScheme;if(n){var r=n.interpretScheme(e),a=r&&r.data,s=a&&a.toRGB;if(s&&9===s.length)return"#"+s.slice(3,9)+s.slice(1,3)}}},{key:"getRawDuration",value:function(){switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimTextFontColor:case d.KwoAnimAttributeName.kwoAnimShapeFillColor:case d.KwoAnimAttributeName.kwoAnimOpacity:case d.KwoAnimAttributeName.kwoAnimShapeFillOn:case d.KwoAnimAttributeName.kwoAnimShapeLineOn:case d.KwoAnimAttributeName.kwoAnimTextFontUnderline:case d.KwoAnimAttributeName.kwoAnimTextFontBold:return"infinite"===this.rawDuration?1:this.rawDuration;default:return this.isEntranceFlashOnce?this.rawDuration:1}}},{key:"start",value:function(e){var t=e.behaviors;t.find((function(e){return e.isFade}))&&(this.useFadeOpacity=!0),e.getPresetClass()===d.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET&&e.getType()===d.KsoAnimEffect.FlashOnce&&(this.isEntranceFlashOnce=!0),t.every((function(e){return e.isSet}))&&(this.isOnlySetColor=!0),e.getType()===d.KsoAnimEffect.ColorWave&&(this.setAutoReverse(!1),this.rawDuration=2*this.rawDuration)}},{key:"getAttrName",value:function(){return this.attrName}},{key:"setTarget",value:function(e){return this.targetList.push(e),this}},{key:"addTarget",value:function(e){return this.targetList.push(e),this}},{key:"getOpacityKeyTimes",value:function(){var e=this.getRawDuration();if("infinite"===e||0===e)return[0,1];return[0,1e-4,.9999,1].filter((function(e,t,i){return i.indexOf(e,0)===t}))}},{key:"getVisibilityKeyTimes",value:function(){var e=this.getRawDuration();if(0===e||1===e)return[0,1];return[0,.9999,1].filter((function(e,t,i){return i.indexOf(e,0)===t}))}},{key:"getKeyTimes",value:function(e){if(this.isEntranceFlashOnce)return[0,1e-4,.9999,1];switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimVisibility:return this.getVisibilityKeyTimes();case d.KwoAnimAttributeName.kwoAnimOpacity:return this.getOpacityKeyTimes();case d.KwoAnimAttributeName.kwoAnimTextFontName:return[0,1];case d.KwoAnimAttributeName.kwoAnimTextFontUnderline:return[0,1e-4,1];case d.KwoAnimAttributeName.kwoAnimTextFontColor:case d.KwoAnimAttributeName.kwoAnimShapeFillColor:case d.KwoAnimAttributeName.kwoAnimShapeFillType:return this.isOnlySetColor?[0,1e-4,1]:[0,1];case d.KwoAnimAttributeName.kwoAnimTextFontBold:return[0,1e-4,1];default:return e||this.getAutoReverse()?[0,1,2]:[0,1]}}},{key:"getKeyTimesPrev",value:function(){return[0,1]}},{key:"getPropName",value:function(){switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimVisibility:case d.KwoAnimAttributeName.kwoAnimOpacity:case d.KwoAnimAttributeName.kwoAnimShapeFillColor:case d.KwoAnimAttributeName.kwoAnimTextFontColor:case d.KwoAnimAttributeName.kwoAnimTextFontUnderline:return"opacity";case d.KwoAnimAttributeName.kwoAnimTextFontBold:return"fontWeight";default:return""}}},{key:"getPropValue",value:function(e,t){if(this.useFadeOpacity)return t.opacity;switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimVisibility:return this.getPropValueVisibility(e);case d.KwoAnimAttributeName.kwoAnimOpacity:return this.getPropValueOpacity(e);case d.KwoAnimAttributeName.kwoAnimTextFontName:return this.toVal;case d.KwoAnimAttributeName.kwoAnimTextFontUnderline:return this.getPropValueTextUnderline(e);case d.KwoAnimAttributeName.kwoAnimTextFontColor:case d.KwoAnimAttributeName.kwoAnimShapeFillColor:return this.getPropValueFill(e);case d.KwoAnimAttributeName.kwoAnimTextFontBold:return this.getPropValueFontBold(e);default:return null}}},{key:"getPropValueFontBold",value:function(e){var t=this.targetList[0],i=t&&t.getGlyph();return i&&i.isBold()?"bold":"infinite"===this.rawDuration?0===e?"normal":this.toVal:0===e||1===e?"normal":this.toVal}},{key:"getPropValueFill",value:function(e){return this.isOnlySetColor?0===e?0:1:1===e?1:0}},{key:"getPropValueTextUnderline",value:function(e){return 0===e?0:1}},{key:"getPropValueVisibility",value:function(e){return this.toVal?e<=0?this.isForTransition?1:0:1===e&&this.isEntranceFlashOnce?0:1:e<=0?1:0}},{key:"getPropValueOpacity",value:function(e){return"infinite"===this.rawDuration||e>0&&e<1?this.toVal:1}},{key:"getToVal",value:function(){return this.toVal}},{key:"getPropValuePrev",value:function(e){return this.attrName!==d.KwoAnimAttributeName.kwoAnimVisibility?null:this.toVal?e<=0?this.isForTransition?1:0:1:e<=0?1:0}},{key:"isSet",get:function(){return!0}},{key:"isColorSet",get:function(){return this.attrName===d.KwoAnimAttributeName.kwoAnimTextFontColor||this.attrName===d.KwoAnimAttributeName.kwoAnimShapeFillColor}}]),t}(ce.Behavior),he=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.ANIMATE));return i.attrName=e,i}return s()(t,e),f()(t,[{key:"init",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"unInit",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unInit",this).call(this)}},{key:"setTarget",value:function(e){}},{key:"isPropValAttribute",value:function(){switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimX:case d.KwoAnimAttributeName.kwoAnimY:case d.KwoAnimAttributeName.kwoAnimXY:case d.KwoAnimAttributeName.kwoAnimWidth:case d.KwoAnimAttributeName.kwoAnimHeight:case d.KwoAnimAttributeName.kwoAnimShapeStyleRotation:case d.KwoAnimAttributeName.kwoAnimXshear:return!0}return!1}},{key:"isStyleAttribute",value:function(){switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimVisibility:case d.KwoAnimAttributeName.kwoAnimTextFontBold:case d.KwoAnimAttributeName.kwoAnimTextFontSize:case d.KwoAnimAttributeName.kwoAnimColor:case d.KwoAnimAttributeName.kwoAnimShapeFillColor:return!0}return!1}},{key:"setTo",value:function(e){}},{key:"setFromTo",value:function(e,t){}},{key:"setBy",value:function(e){}}]),t}(ce.Behavior),fe=function(){function e(){l()(this,e),this.ppt_x=0,this.ppt_y=0,this.ppt_w=0,this.ppt_h=0,this.ppt_cx=0,this.ppt_cy=0,this.ppt_cw=0,this.ppt_ch=0,this.scene_w=1,this.scene_h=1}return f()(e,[{key:"set_cx",value:function(e){this.ppt_cx=e}},{key:"set_cy",value:function(e){this.ppt_cy=e}},{key:"set_cw",value:function(e){this.ppt_cw=e}},{key:"set_ch",value:function(e){this.ppt_ch=e}},{key:"set_x",value:function(e){this.ppt_x=e}},{key:"set_y",value:function(e){this.ppt_y=e}},{key:"set_w",value:function(e){this.ppt_w=e}},{key:"set_h",value:function(e){this.ppt_h=e}},{key:"set_scene_w_h",value:function(e,t){this.scene_w=e,this.scene_h=t}},{key:"x",value:function(){return this.ppt_x}},{key:"y",value:function(){return this.ppt_y}},{key:"w",value:function(){return this.ppt_w}},{key:"h",value:function(){return this.ppt_h}},{key:"cx",value:function(){return this.ppt_cx}},{key:"cy",value:function(){return this.ppt_cy}},{key:"cw",value:function(){return this.ppt_cw}},{key:"ch",value:function(){return this.ppt_ch}},{key:"scenew",value:function(){return this.scene_w}},{key:"sceneh",value:function(){return this.scene_h}}]),e}(),pe=function(){function e(){l()(this,e),e.SINGLE=65536,e.BINARY=131072,e.NONE=0,e.ADD=1|e.BINARY,e.SUB=2|e.BINARY,e.MULTI=3|e.BINARY,e.DIV=4|e.BINARY,e.MOD=5|e.BINARY,e.POW=6|e.BINARY,e.MAX=7|e.BINARY,e.MIN=8|e.BINARY,e.NEG=1|e.SINGLE,e.ABS=2|e.SINGLE,e.ACOS=3|e.SINGLE,e.ASIN=4|e.SINGLE,e.ATAN=5|e.SINGLE,e.CEIL=6|e.SINGLE,e.COS=7|e.SINGLE,e.COSH=8|e.SINGLE,e.DEG=9|e.SINGLE,e.EXP=10|e.SINGLE,e.FLOOR=11|e.SINGLE,e.LN=12|e.SINGLE,e.RAD=13|e.SINGLE,e.RAND=14|e.SINGLE,e.SIN=15|e.SINGLE,e.SINH=16|e.SINGLE,e.SQRT=17|e.SINGLE,e.TAN=18|e.SINGLE,e.TANH=19|e.SINGLE,e.sFuncMap={abs:e.ABS,acos:e.ACOS,asin:e.ASIN,atan:e.ATAN,ceil:e.CEIL,cos:e.COS,cosh:e.COSH,deg:e.DEG,exp:e.EXP,floor:e.FLOOR,ln:e.LN,max:e.MAX,min:e.MIN,rad:e.RAD,rand:e.RAND,sin:e.SIN,sinh:e.SINH,sqrt:e.SQRT,tan:e.TAN,tanh:e.TANH}}return f()(e,[{key:"value",value:function(){return 0}},{key:"isConstant",value:function(){return!1}}],[{key:"funcType",value:function(t){var i=e.sFuncMap[t];return i||e.NONE}},{key:"opNumber",value:function(e){return 4294901760&e}}]),e}(),me=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.v=e,i}return s()(t,e),f()(t,[{key:"value",value:function(){return this.v}},{key:"isConstant",value:function(){return!0}}]),t}(pe),de=function(e){function t(){l()(this,t);var e=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.v=0,e}return s()(t,e),f()(t,[{key:"set",value:function(e){this.v=e}},{key:"value",value:function(){return this.v}}]),t}(pe),ve=function(e){function t(e,i,n){l()(this,t);var a=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.op=e,i.isConstant()&&n.isConstant()?(a.hasCache=!0,a.cache=a._calc(i,n)):(a.l=i,a.r=n),a}return s()(t,e),f()(t,[{key:"value",value:function(){return this.hasCache?this.cache:this._calc(this.l,this.r)}},{key:"_calc",value:function(e,t){switch(this.op){case pe.ADD:return e.value()+t.value();case pe.SUB:return e.value()-t.value();case pe.MULTI:return e.value()*t.value();case pe.DIV:return e.value()/t.value();case pe.MOD:return e.value()%t.value();case pe.POW:return Math.pow(e.value(),t.value());case pe.MAX:return Math.max(e.value(),t.value());case pe.MIN:return Math.min(e.value(),t.value());default:return 0}}}]),t}(pe),ge=function(e){function t(e,i){l()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.op=e,i.isConstant()?(n.hasCache=!0,n.cache=n._calc(i)):n.v=i,n}return s()(t,e),f()(t,[{key:"value",value:function(){return this.hasCache?this.cache:this._calc(this.v)}},{key:"_calc",value:function(e){switch(this.op){case pe.NEG:return-e.value();case pe.ABS:return Math.abs(e.value());case pe.ACOS:return Math.acos(e.value());case pe.ASIN:return Math.asin(e.value());case pe.ATAN:return Math.atan(e.value());case pe.CEIL:return Math.ceil(e.value());case pe.COS:return Math.cos(e.value());case pe.COSH:return Math.cosh(e.value());case pe.DEG:return e.value*(180/Math.PI);case pe.EXP:return Math.exp(e.value());case pe.FLOOR:return Math.floor(e.value());case pe.LN:return Math.log1p(e.value());case pe.RAD:return e.value*(Math.PI/180);case pe.RAND:return Math.random()*e.value();case pe.SIN:return Math.sin(e.value());case pe.SINH:return Math.sinh(e.value());case pe.SQRT:return Math.sqrt(e.value());case pe.TAN:return Math.tan(e.value());case pe.TANH:return Math.tanh(e.value());default:return 0}}}]),t}(pe),ye=function(){function e(t,i){l()(this,e),e.sVaribaleMap={ppt_x:Te.PPT_X,ppt_y:Te.PPT_Y,ppt_w:Te.PPT_W,ppt_h:Te.PPT_H,"#ppt_x":Te.PPT_CX,"#ppt_y":Te.PPT_CY,"#ppt_w":Te.PPT_CW,"#ppt_h":Te.PPT_CH},this.formula=t,this.calc=i,this.cursor=0}return f()(e,[{key:"parse",value:function(){return this.cursor=0,this._parseFormula()&&this.cursor===this.formula.length}},{key:"_parseFormula",value:function(){if(!this._parseTerm())return!1;this._ignoreBlank();for(var e=this.formula.length,t=!0;this.cursor<e;){var i=this.formula.charAt(this.cursor);if(")"===i||","===i)break;if("+"!==i&&"-"!==i){t=!1;break}if(++this.cursor,!(t=this._parseTerm()))break;this.calc.calculate("+"===i?pe.ADD:pe.SUB),this._ignoreBlank()}return t}},{key:"_parseTerm",value:function(){if(!this._parsePower())return!1;this._ignoreBlank();for(var e=this.formula.length,t=!0;this.cursor<e;){var i=this.formula.charAt(this.cursor);if(")"===i||","===i||"+"===i||"-"===i)break;if("*"!==i&&"/"!==i&&"%"!==i){t=!1;break}if(++this.cursor,!(t=this._parsePower()))break;"*"===i?this.calc.calculate(pe.MULTI):"/"===i?this.calc.calculate(pe.DIV):this.calc.calculate(pe.MOD),this._ignoreBlank()}return t}},{key:"_parsePower",value:function(){if(!this._parseUnary())return!1;this._ignoreBlank();for(var e=this.formula.length,t=!0;this.cursor<e;){var i=this.formula.charAt(this.cursor);if(")"===i||","===i||"+"===i||"-"===i||"*"===i||"/"===i||"%"===i)break;if("^"!==i){t=!1;break}if(++this.cursor,!(t=this._parseUnary()))break;this.calc.calculate(pe.POW)}return t}},{key:"_parseUnary",value:function(){this._ignoreBlank();var t=this.formula.length;if(this.cursor>=t)return!1;var i=!1,n=this.formula.charAt(this.cursor);return e._isSign(n)?(++this.cursor,(i=this._parseFactor())&&"-"===n&&this.calc.calculate(pe.NEG)):i=this._parseFactor(),i}},{key:"_parseFactor",value:function(){this._ignoreBlank();var t=this.formula.length;if(this.cursor>=t)return!1;var i=!1,n=this.formula.charAt(this.cursor);if(e._isDigit(n.charCodeAt(0))||"."===n){var r=this._parseNumber();!1!==r&&(this.calc.addConstant(r),i=!0)}else"("===n?(++this.cursor,this._parseFormula()&&(i=this.cursor<t&&")"===this.formula.charAt(this.cursor))&&++this.cursor):(n.charCodeAt(0)||"#"===n||"$"===n)&&(i=this._parseString());return i}},{key:"_parseString",value:function(){var t=this.cursor,i=this.formula.charAt(this.cursor);if("$"===i)++this.cursor;else if("#"===i||e._isLetter(i.charCodeAt(0))){++this.cursor;for(var n=this.formula.length;this.cursor<n&&(e._isLetter(this.formula.charCodeAt(this.cursor))||"_"===this.formula.charAt(this.cursor));)++this.cursor}if(this.cursor<=t)return!1;var r=this.formula.substring(t,this.cursor).toLowerCase();if("pi"===r)this.calc.addConstant(Math.PI);else if("e"===r)this.calc.addConstant(Math.E);else if("$"===r)this.calc.addTimeVar();else{var a=e.sVaribaleMap[r];if(a)this.calc.addPropVar(a);else{var s=pe.funcType(r);if(pe.NONE===s)this.calc.addConstant(0);else{var o=pe.opNumber(s);if(o!==pe.BINARY&&o!==pe.SINGLE)return!1;this._parseFunction(o===pe.BINARY?2:1)&&this.calc.calculate(s)}}}return!0}},{key:"_parseFunction",value:function(e){this._ignoreBlank();var t=this.formula.length;if(this.cursor>=t)return!1;var i=!1;if("("===this.formula.charAt(this.cursor))for(++this.cursor;this.cursor<t&&e>0;){if(i=this._parseFormula()){var n=e>1?",":")";(i=this.cursor<t&&this.formula.charAt(this.cursor)===n)&&++this.cursor}if(!i)break;--e}return i}},{key:"_parseNumber",value:function(){for(var t=!0,i=this.formula.length,n=this.cursor;this.cursor<i&&e._isDigit(this.formula.charCodeAt(this.cursor));)++this.cursor;if(this.cursor<i&&"."===this.formula.charAt(this.cursor)){for(++this.cursor;this.cursor<i&&e._isDigit(this.formula.charCodeAt(this.cursor));)++this.cursor;if(this.cursor<i&&e._isE(this.formula.charAt(this.cursor))){++this.cursor,this.cursor<i&&e._isSign(this.formula.charAt(this.cursor))&&++this.cursor;for(var r=this.cursor;this.cursor<i&&e._isDigit(this.formula.codePointAt(this.cursor));)++this.cursor;t=this.cursor>r}}else t=this.cursor>n;if(!t)return!1;var a=this.formula.substring(n,this.cursor);return parseFloat(a)}},{key:"_ignoreBlank",value:function(){for(var t=this.formula.length;this.cursor<t&&e._isSpaceChar(this.formula.codePointAt(this.cursor));)++this.cursor}}],[{key:"_isSpaceChar",value:function(t){return t===e.SpaceType.Space||t===e.SpaceType.FullWidthSpace||t===e.SpaceType.NonBreakSpace}},{key:"_isDigit",value:function(t){return e._isNum(t)}},{key:"_isLetter",value:function(t){return e._isAlpha(t)}},{key:"_isE",value:function(e){return"e"===e||"E"===e}},{key:"_isSign",value:function(e){return"+"===e||"-"===e}},{key:"_isAlpha",value:function(e){return e>="a".codePointAt()&&e<="z".codePointAt()||e>="A".codePointAt()&&e<="Z".codePointAt()}},{key:"_isNum",value:function(e){return e>="0".codePointAt()&&e<="9".codePointAt()}}]),e}();ye.SpaceType={Space:32,FullWidthSpace:12288,NonBreakSpace:160};var Ee=function(){function e(){l()(this,e),this.calcStack=[],this.timeVars=[],this.propVars=[]}return f()(e,[{key:"parse",value:function(e){return new ye(e,this).parse()}},{key:"reset",value:function(){this.calcStack=[],this.propVars=[]}},{key:"value",value:function(){return 1!==this.calcStack.length?0:this.calcStack[0].value()}},{key:"updateTimeVar",value:function(e){for(var t=0;t<this.timeVars.length;++t)this.timeVars[t].set(e);return!0}},{key:"updateFormulaVar",value:function(e){for(var t=!1,i=0;i<this.propVars.length;++i)t|=this.propVars[i].update(e);return t}},{key:"calculate",value:function(e){var t=pe.opNumber(e);if(pe.BINARY===t){if(this.calcStack.length<2)return!1;var i=this.calcStack.pop(),n=this.calcStack.pop();return this.calcStack.push(new ve(e,n,i)),!0}return!!pe.SINGLE&&(!(this.calcStack.length<1)&&(this.calcStack.push(new ge(e,this.calcStack.pop())),!0))}},{key:"addConstant",value:function(e){this.calcStack.push(new me(e))}},{key:"addTimeVar",value:function(){var e=new de;this.calcStack.push(e),this.timeVars.push(e)}},{key:"addPropVar",value:function(e){var t=new Se(e);this.calcStack.push(t),this.propVars.push(t)}}]),e}(),Se=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.prop=e,i}return s()(t,e),f()(t,[{key:"update",value:function(e){if(0===e.scenew()||0===e.sceneh())return!1;var t=!0;switch(this.prop){case Te.PPT_X:this.set(e.x()/e.scenew());break;case Te.PPT_CX:this.set(e.cx()/e.scenew());break;case Te.PPT_Y:this.set(e.y()/e.sceneh());break;case Te.PPT_CY:this.set(e.cy()/e.sceneh());break;case Te.PPT_W:this.set(e.w()/e.scenew());break;case Te.PPT_CW:this.set(e.cw()/e.scenew());break;case Te.PPT_H:this.set(e.h()/e.sceneh());break;case Te.PPT_CH:this.set(e.ch()/e.sceneh());break;default:t=!1}return t}}]),t}(de),Te={PPT_X:1,PPT_Y:2,PPT_W:3,PPT_H:4,PPT_CX:5,PPT_CY:6,PPT_CW:7,PPT_CH:8},Ae=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.target=null,i.calcMode=ke.LINEAR,i.valueType=_e.NUMBER,i.byValue=null,i.fromCalc=null,i.toCalc=null,i.timeValues=[],i.isFinished=!1,i.formulaVar=new fe,i}return s()(t,e),f()(t,[{key:"setTarget",value:function(e){this.target=e}},{key:"setCalcMode",value:function(e){this.calcMode=e}},{key:"setValueType",value:function(e){this.valueType=e}},{key:"setFromTo",value:function(e,t){return!!this.isPropValAttribute()&&(this.fromCalc=this._createFormulaCalc(e),!Object.isEmpty(this.formulaVar)&&(this.toCalc=this._createFormulaCalc(t),!Object.isEmpty(this.toCalc)))}},{key:"setBy",value:function(e){if(!this.isPropValAttribute())return!1;var t=this._createFormulaCalc(e);return!Object.isEmpty(t)&&(this.byValue=new we(this.attrName,this.formulaVar,this.target,t),!0)}},{key:"setTimeValues",value:function(e){if(!this.isSupportedAttribute()||Object.isEmpty(e))return!1;for(var t=0;t<e.length;++t){var i=e[t];if(i){var n=i.getTime(),r=i.getFormula(),a=null;if(r&&r.length>0&&!(a=this._createFormulaCalc(r)))return!1;var s=i.getValue();this.timeValues.push(new Ne(n,this._parseValue(s),a))}}return!0}},{key:"isSupportedAttribute",value:function(){return this.isPropValAttribute()||this.isStyleAttribute()}},{key:"_parseValue",value:function(e){switch(e.getType()){case d.VariantType.typeString:var t=e.getValue();if(this.isStyleAttribute())return t;var i=this._createFormulaCalc(t);return Object.isEmpty(i)?0:i;case d.VariantType.typeFloat:case d.VariantType.typeInteger:case d.VariantType.typeColor:return e.getValue()}return 0}},{key:"_createFormulaCalc",value:function(e){if(!e||e.length<=0)return null;var t=new Ee;return t.parse(e)?t:null}},{key:"start",value:function(e){e.getType()===d.KsoAnimEffect.Flip&&(this.isFlip=!0)}},{key:"init",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.isFinished=!1;var e=this.target.getCurrentShapeRect();e&&(this.formulaVar.set_x(e.center().x()),this.formulaVar.set_y(e.center().y()),this.formulaVar.set_w(e.width()),this.formulaVar.set_h(e.height()));var i=this.target.getInitShapeRect();i&&(this.formulaVar.set_cx(i.center().x()),this.formulaVar.set_cy(i.center().y()),this.formulaVar.set_cw(i.width()),this.formulaVar.set_ch(i.height()));var n=this.target.getScene().getScenes();if(n){var r=n.getViewportSize();this.formulaVar.set_scene_w_h(r.viewBox.width,r.viewBox.height)}this.byValue&&this.byValue.updateFormulaVar(this.formulaVar),this.fromCalc&&this.fromCalc.updateFormulaVar(this.formulaVar),this.toCalc&&this.toCalc.updateFormulaVar(this.formulaVar),this.updateFormulaVar()}},{key:"updateFormulaVar",value:function(){for(var e=0;e<this.timeValues.length;++e){var t=this.timeValues[e];t.formulaCalc&&t.formulaCalc.updateFormulaVar(this.formulaVar),t.value instanceof Ee&&t.value.updateFormulaVar(this.formulaVar)}}},{key:"unInit",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unInit",this).call(this),this.isFinished=!0}},{key:"_getAnimObjData",value:function(e){var t=this.timeValues.length-1;if(t<0)return 0;for(var i=0;i<t;++i){var n=this.timeValues[i].time,r=this.timeValues[i+1].time;if(e>=n&&e<r){var a=0,s=this._calcTimeValue(this.timeValues[i].value);if(ke.LINEAR===this.calcMode)a=s+(e-n)/(r-n)*(this._calcTimeValue(this.timeValues[i+1].value)-s);else a=ke.DISCRETE===this.calcMode?this._parseDiscreateValue(e):s;return this._evalCalc(this.timeValues[i].formulaCalc,a)}}var o=this._calcTimeValue(this.timeValues[i].value),u=this.timeValues[i].formulaCalc;if(u)o=this._evalCalc(u,o);else for(;--i>=0;)(u=this.timeValues[i].formulaCalc)?o=this._evalCalc(u,o):ke.DISCRETE===this.calcMode&&(o=this._parseDiscreateValue(e));return o}},{key:"_parseDiscreateValue",value:function(e){var t=this.timeValues,i=t[t.length-1].time||1;switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimVisibility:return 0===e?1:1e-4===e||e<i?0:1;case d.KwoAnimAttributeName.kwoAnimTextFontBold:var n=t.find((function(t){return t.time===e}));return n&&n.value;default:return 0}}},{key:"_calcTimeValue",value:function(e){return"number"==typeof e?e:e instanceof Ee?this._evalCalc(e,0):0}},{key:"_evalCalc",value:function(e,t){return e?(e.updateTimeVar(t),e.value()):t}},{key:"_getAnimObjValue",value:function(e){var t=0;switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimX:t=this._getPositionX(e);break;case d.KwoAnimAttributeName.kwoAnimY:t=this._getPositionY(e);break;case d.KwoAnimAttributeName.kwoAnimXY:t=[this._getPositionX(e),this._getPositionY(e)];break;case d.KwoAnimAttributeName.kwoAnimWidth:t=this._getScaleW(e);break;case d.KwoAnimAttributeName.kwoAnimHeight:t=this._getScaleH(e);break;case d.KwoAnimAttributeName.kwoAnimShapeStyleRotation:t=this._getRotation(e);break;case d.KwoAnimAttributeName.kwoAnimXshear:t=this._getSkewX(e);break;case d.KwoAnimAttributeName.kwoAnimTextFontBold:case d.KwoAnimAttributeName.kwoAnimVisibility:t=e}return t}},{key:"_getPositionX",value:function(e){var t=this.target.getInitShapeRect();return t?e*this.formulaVar.scenew()-t.center().x():0}},{key:"_getPositionY",value:function(e){var t=this.target.getInitShapeRect();return t?e*this.formulaVar.sceneh()-t.center().y():0}},{key:"_getPositionXY",value:function(e){return this._getPositionX(e)||this._getPositionY(e)}},{key:"_getScaleW",value:function(e){var t=this.target.getInitShapeRect();if(t){var i=t.width();return e*this.formulaVar.scenew()/i}return 1}},{key:"_getScaleH",value:function(e){var t=this.target.getInitShapeRect();if(t){var i=t.height();return e*this.formulaVar.sceneh()/i}return 1}},{key:"_getRotation",value:function(e){return e}},{key:"_getSkewX",value:function(e){return 45*e}},{key:"getVisibilityKeyTimes",value:function(e){var t=[],i=this.rawDuration;if(0===i)return[0,1];for(var n=e[e.length-1],r=n-1/i,a=0;a<e.length-1;++a)t.push(e[a]);return t.push(1e-4),t.push(r),t.push(n),t.push(1),t}},{key:"_hasFormula",value:function(){for(var e=0,t=this.timeValues.length;e<t;++e){if(this.timeValues[e].formulaCalc)return!0}return!1}},{key:"getKeyTimes",value:function(e){var t=this.timeValues.length;if(0===t)return e||this.getAutoReverse()?[0,1,2]:[0,1];for(var i=[],n=0;n<t;++n){var r=this.timeValues[n].time;i.push(r)}if(this.attrName===d.KwoAnimAttributeName.kwoAnimVisibility)return this.getVisibilityKeyTimes(i);if(this._hasFormula()){for(var a=[],s=0;s<i.length-1;++s){var o=i[s],u=(i[s+1]-o)/20;a.push(o);for(var c=o,l=0;l<19;++l)c+=u,a.push(c)}return a.push(i[i.length-1]),a}return i}},{key:"getPropName",value:function(){switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimX:return"translateX";case d.KwoAnimAttributeName.kwoAnimY:return"translateY";case d.KwoAnimAttributeName.kwoAnimXY:return"translate";case d.KwoAnimAttributeName.kwoAnimWidth:return"scaleX";case d.KwoAnimAttributeName.kwoAnimHeight:return"scaleY";case d.KwoAnimAttributeName.kwoAnimShapeStyleRotation:return"rotate";case d.KwoAnimAttributeName.kwoAnimXshear:return"skewX";case d.KwoAnimAttributeName.kwoAnimVisibility:return"opacity";case d.KwoAnimAttributeName.kwoAnimTextFontBold:return"fontWeight"}}},{key:"updateCurrentFormulaVar",value:function(e){if(!this.isFlip){var t=this.target.getInitShapeRect();if(t){var i=e.translateX;if(!Object.isEmpty(i)){var n=t.center().x()+i;this.formulaVar.set_x(n)}var r=e.translateY;if(!Object.isEmpty(r)){var a=t.center().y()+r;this.formulaVar.set_y(a)}var s=e.scaleX;if(!Object.isEmpty(s)){var o=t.width()*s;this.formulaVar.set_w(Math.abs(o))}var u=e.scaleY;if(!Object.isEmpty(u)){var c=t.height()*u;this.formulaVar.set_h(Math.abs(c))}}}this.byValue&&this.byValue.updateFormulaVar(this.formulaVar),this.fromCalc&&this.fromCalc.updateFormulaVar(this.formulaVar),this.toCalc&&this.toCalc.updateFormulaVar(this.formulaVar),this.updateFormulaVar()}},{key:"getPropValue",value:function(e,t){t&&this.updateCurrentFormulaVar(t);var i=0;if(this.byValue)i=ke.LINEAR===this.calcMode?this.byValue.begin()+e*this.byValue.value():this.byValue.begin();else if(this.fromCalc&&this.toCalc){var n=this._evalCalc(this.fromCalc,0);if(ke.LINEAR===this.calcMode)i=n+e*(this._evalCalc(this.toCalc,0)-n);else i=n}else i=this._getAnimObjData(e);return this._getAnimObjValue(i)}},{key:"isAnimatePropValue",get:function(){return!0}}],[{key:"convertCalcMode",value:function(e){return"discrete"===(e=e.toLowerCase())?ke.DISCRETE:"linear"===e?ke.LINEAR:"formula"===e?ke.FORMULA:ke.LINEAR}},{key:"convertValueType",value:function(e){return"string"===(e=e.toLowerCase())?_e.STRING:"number"===e?_e.NUMBER:"color"===e?_e.COLOR:_e.NUMBER}}]),t}(he),ke={DISCRETE:0,LINEAR:1,FORMULA:2},_e={STRING:0,NUMBER:1,COLOR:2},we=function(){function e(t,i,n,r){l()(this,e),this.attrName=t,this.formulaVar=i,this.target=n,this.byCalc=r,this.hasCached=!1,this.beginValue=0}return f()(e,[{key:"updateFormulaVar",value:function(e){this.byCalc.updateFormulaVar(e)}},{key:"begin",value:function(){if(this.hasCached)return this.beginValue;switch(this.attrName){case d.KwoAnimAttributeName.kwoAnimX:this.beginValue=this.formulaVar.cx()/this.formulaVar.scenew();break;case d.KwoAnimAttributeName.kwoAnimY:this.beginValue=this.formulaVar.cy()/this.formulaVar.sceneh();break;case d.KwoAnimAttributeName.kwoAnimWidth:this.beginValue=this.formulaVar.cw()/this.formulaVar.scenew();break;case d.KwoAnimAttributeName.kwoAnimHeight:this.beginValue=this.formulaVar.ch()/this.formulaVar.sceneh();break;case d.KwoAnimAttributeName.kwoAnimShapeStyleRotation:this.beginValue=this.target.getRotationAngle()}return this.hasCached=!0,this.beginValue}},{key:"value",value:function(){return this.byCalc.value()}}]),e}(),Ne=function e(t,i,n){l()(this,e),this.time=t,this.value=i,this.formulaCalc=n},Pe=function(e){function t(e,i,n,a,s,o,u){l()(this,t);var c=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.ANIMATE_COLOR_BEHAVIOR));return c.attrName=e,c.targetColorType=i,c.targetColorTo=n,c.targetColorSpace=a,c.direction=s,c.targetColor="",c.fromColor=o,c.byColor=u,c}return s()(t,e),f()(t,[{key:"setTarget",value:function(e){this.target=e}},{key:"init",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this._initTargetColor(this.targetColorType,this.targetColorTo)}},{key:"start",value:function(e){e.getType()===d.KsoAnimEffect.Lighten&&(this.isLighten=!0)}},{key:"_initTargetColor",value:function(e,t){switch(e){case"schema":this.targetColor=this._convertScheme2Rgb(t);break;case"rgb":this.targetColor=this._parseHexColor(t);break;case"hsl":this._parseByColor();break;default:this.targetColor=""}}},{key:"_convertScheme2Rgb",value:function(e){var t=this.target.getSlide(),i=t&&t.colorScheme;if(i){var n=d.SchemeTypeMap[e],r=i.interpretScheme(n),a=r&&r.data,s=a&&a.toRGB;if(s&&9===s.length)return"#"+s.slice(3,9)+s.slice(1,3)}}},{key:"_parseByColor",value:function(){if(this.byColor){var e=this.byColor.split(",");this.deltH=Number(e[0])*(1/6e4)%360,this.deltS=Number(e[1])*(1/6e4),this.deltL=Number(e[2])*(1/6e4)}}},{key:"_parseHexColor",value:function(e){var t=function(e){try{e=e.replace("#","");var t=parseInt("0x"+e,16),i=3===e.length,n=i?15:255,r=i?4:8,a=i?17:1;return{r:(t>>2*r&n)*a,g:(t>>r&n)*a,b:(t&n)*a}}catch(e){return console.error("parseHexStr",e),null}}(e);return t?"rgba("+t.r+", "+t.g+", "+t.b+", 1)":1}},{key:"getKeyTimes",value:function(e){return e||this.getAutoReverse()?[0,1,2]:[0,1]}},{key:"getPropName",value:function(){return"hsl"!==this.targetColorType||this.isLighten?"opacity":"hsl"}},{key:"getTargetColor",value:function(){return this.targetColor||""}},{key:"getAttrName",value:function(){return this.attrName}},{key:"getPropValue",value:function(e){return this.isLighten?this._getLightenValue(e):"hsl"===this.targetColorType?this._getHslValue(e):this._getOpacityValue(e)}},{key:"_getLightenValue",value:function(e){return e>=1?.6:1-.4*e}},{key:"_getHslValue",value:function(e){return[e*(this.isClockwise?this.deltH<0?360+this.deltH:this.deltH:this.deltH>0?360-this.deltH:this.deltH),e*(this.deltS<-1?-1:this.deltS)+1,e*(this.deltL<-1?-1:this.deltL)+1]}},{key:"_getOpacityValue",value:function(e){return e<0?0:e>1?1:e}},{key:"isAnimateColor",get:function(){return!0}},{key:"isClockwise",get:function(){return"clockwise"===this.direction}}]),t}(ce.Behavior);var Ce=function(e){function t(e,i,n,a){l()(this,t);var s=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.ANIMATE_SCALE));return s.toX=e,s.toY=i,s.fromX=-1===n?100:n,s.fromY=-1===a?100:a,s.byX=e-s.fromX,s.byY=i-s.fromY,s}return s()(t,e),f()(t,[{key:"setTarget",value:function(e){this.target=e}},{key:"init",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.unit=.01}},{key:"getKeyTimes",value:function(e){return e||this.getAutoReverse()?[0,1,2]:[0,1]}},{key:"getPropName",value:function(){return"scale"}},{key:"getPropValue",value:function(e){return this.getValue(e)}},{key:"getValue",value:function(e){return{x:this._calcX(e),y:this._calcY(e)}}},{key:"_calcX",value:function(e){return(this.byX*e+this.fromX)*this.unit}},{key:"_calcY",value:function(e){return(this.byY*e+this.fromY)*this.unit}},{key:"isAnimateScale",get:function(){return!0}}]),t}(ce.Behavior),be=function(e){function t(e,i,n){l()(this,t);var a=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.ANIMATE_ROTATION));return a.by=e,a.from=i,a.to=n,a}return s()(t,e),f()(t,[{key:"setTarget",value:function(e){this.target=e}},{key:"init",value:function(e){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),e&&e.isAnimateRotation&&this.by&&(this.from=e.getPropValue(1))}},{key:"getKeyTimes",value:function(e){return e||this.getAutoReverse()?[0,1,2]:[0,1]}},{key:"getPropName",value:function(){return"rotate"}},{key:"getPropValue",value:function(e){return Object.isEmpty(this.by)?this.to*e+this.from:this.by*e+this.from}},{key:"isAnimateRotation",get:function(){return!0}}]),t}(ce.Behavior),Ie=function(e){function t(e,i){l()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.ANIMATE_MOTION));return n.motionPath=e||"",n.autoReverse=i,n.target=null,n.pointList=[],n.keyTimes={},n.formulaVar=new fe,n}return s()(t,e),f()(t,[{key:"setTarget",value:function(e){this.target=e}},{key:"init",value:function(){var e=this.target.getScene().getScenes();if(e){var t=e.getViewportSize();this.formulaVar.set_scene_w_h(t.viewBox.width,t.viewBox.height)}var i=this._parseMotionPath(this.motionPath);this.pointList=this._getTranslateArr(i)}},{key:"start",value:function(e){var t=this;(this.autoReverse||e.getAutoReverse())&&(this.pointList.concat([]).reverse().forEach((function(e){Oe(t.pointList,e)})),this.rawDuration*=2)}},{key:"_parseMotionPath",value:function(e){for(var t=e.split(" "),i=[],n=0,r=(t=t.filter((function(e){return""!==e}))).length;n<r;n++){var a=t[n];switch(a){case"M":case"L":case"l":var s=Number(t[++n]),o=Number(t[++n]);if(isNaN(s)||isNaN(o))break;i.push([a,s,o]);break;case"C":case"c":var u=Number(t[++n]),c=Number(t[++n]),l=Number(t[++n]),h=Number(t[++n]),f=Number(t[++n]),p=Number(t[++n]);if(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(h)||isNaN(f)||isNaN(p))break;i.push([a,u,c,l,h,f,p]);break;case"Q":case"q":var m=Number(t[++n]),d=Number(t[++n]);if(f=Number(t[++n]),p=Number(t[++n]),isNaN(m)||isNaN(d)||isNaN(f)||isNaN(p))break;i.push([a,m,d,f,p]);break;case"Z":case"E":i.push([a])}}return i}},{key:"_getTranslateArr",value:function(e){for(var t=[],i=this.formulaVar.scenew(),n=this.formulaVar.sceneh(),r=void 0,a=void 0,s=0;s<e.length;++s){var o=void 0,u=void 0,c=e[s];switch(c[0]){case"M":o=i*c[1],u=n*c[2],Oe(t,[o,u]),a=[o,u];break;case"L":o=i*c[1],u=n*c[2],Oe(t,[o,u]);break;case"C":r=t[t.length-1];var l=i*c[1],h=n*c[2],f=i*c[3],p=n*c[4],m=i*c[5],d=n*c[6],v=Re([new window.Point(r[0],r[1]),new window.Point(l,h),new window.Point(f,p),new window.Point(m,d)],10);v.forEach((function(e){Oe(t,[e.x(),e.y()])}));break;case"c":l=(r=t[t.length-1])[0]+i*c[1],h=r[1]+n*c[2],f=r[0]+i*c[3],p=r[1]+n*c[4],m=r[0]+i*c[5],d=r[1]+n*c[6],(v=Re([new window.Point(r[0],r[1]),new window.Point(l,h),new window.Point(f,p),new window.Point(m,d)],10)).forEach((function(e){Oe(t,[e.x(),e.y()])})),r=t[t.length-1];break;case"Q":r=t[t.length-1];var g=i*c[1],y=n*c[2];m=i*c[3],d=n*c[4],(v=Re([new window.Point(r[0],r[1]),new window.Point(g,y),new window.Point(m,d)],10)).forEach((function(e){Oe(t,[e.x(),e.y()])}));break;case"q":g=(r=t[t.length-1])[0]+i*c[1],y=r[1]+n*c[2],m=r[0]+i*c[3],d=r[1]+n*c[4],(v=Re([new window.Point(r[0],r[1]),new window.Point(g,y),new window.Point(m,d)],10)).forEach((function(e){Oe(t,[e.x(),e.y()])}));break;case"l":o=(r=t[t.length-1])[0]+i*c[1],u=r[1]+n*c[2],Oe(t,[o,u]);break;case"E":o=t[t.length-1][0],u=t[t.length-1][1],Oe(t,[o,u]);break;case"Z":o=a[0],u=a[1],Oe(t,[o,u]);break;default:console.error("error path type")}}return t}},{key:"getSides",value:function(){var e=[],t=this.pointList;e.push(0);for(var i=1;i<t.length;++i){var n=t[i],r=t[i-1],a=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2));isNaN(a)||Object.isEmpty(a)||e.push(a)}return e}},{key:"getKeyTimes",value:function(){var e=this.getSides(),t=0;e.forEach((function(e){return t+=e}));var i=[];i.push(0),this.keyTimes[(0).toFixed(5)]=0;for(var n=1;n<e.length-1;++n){var r=e[n]/t,a=i[i.length-1]+r;i.push(a);var s=a.toFixed(5);this.keyTimes[s]=n}return i.push(1),this.keyTimes[1..toFixed(5)]=e.length-1,i}},{key:"getPropName",value:function(){return"translate"}},{key:"getPropValue",value:function(e){var t=[],i=e.toFixed(5),n=this.keyTimes[i];return delete this.keyTimes[i],this.target.getInitShapeRect()&&(t=this.pointList[n]),t}},{key:"isAnimateMotion",get:function(){return!0}}]),t}(ce.Behavior);function Re(e,t){var i=[],n=xe(e,0/t);i.push(new window.Point(n[0],n[1]));for(var r=1;r<=t;r++){var a=xe(e,r/t),s=new window.Point(a[0],a[1]);i.push(s)}return i}function xe(e,t){var i=1-t,n=i*i,r=n*i,a=t*t,s=a*t,o=0,u=0;return 3===e.length?(o+=n*e[0].x(),u+=n*e[0].y(),o+=2*t*i*e[1].x(),u+=2*t*i*e[1].y(),o+=a*e[2].x(),u+=a*e[2].y()):4===e.length&&(o+=r*e[0].x(),u+=r*e[0].y(),o+=3*t*n*e[1].x(),u+=3*t*n*e[1].y(),o+=3*a*i*e[2].x(),u+=3*a*i*e[2].y(),o+=s*e[3].x(),u+=s*e[3].y()),[o,u]}function Oe(e,t){var i=e[e.length-1],n=Math.round(t[0]),r=Math.round(t[1]);i&&i[0]===n&&i[1]===r||e.push([n,r])}var Fe=function(e){function t(e,i,n){l()(this,t);var a=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.AUDIO));return a.command=e,a.endAfterSlide=i||-1,a.hideWhenStopped=!!n,a}return s()(t,e),f()(t,[{key:"getRawDuration",value:function(){return 1}},{key:"setTarget",value:function(e){if(e&&(this.target=e,this.hideWhenStopped)){var t=e.getShape(),i=t&&t.getSlide(),n=i&&i.getId(),r=t&&t.getId();window.APP.shell.doc.changeMediaVisible({slideId:n,shapeId:r,visible:!1}),this.target.hide()}}},{key:"init",value:function(){}},{key:"getKeyTimes",value:function(){return[0,1]}},{key:"getPropName",value:function(){return"opacity"}},{key:"getPropValue",value:function(e){return this.hideWhenStopped?0:1}},{key:"isAnimateCommand",get:function(){return!0}}]),t}(ce.Behavior),De=i(6190),Le=i(6191),Me=i(6192),Ve=i(6193),Be=i(6194),Ke=i(6195),je=i(6196),We=i(6197),Ue=i(6198),Ge=i(6199),Xe=i(6200),He=function(e){function t(e,i){l()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.ANIMATE_EFFECT));return n.attrName=e,n.presetClass=i,n}return s()(t,e),f()(t,null,[{key:"create",value:function(e,t,i,n){switch(e){case"fade":break;case d.KsoAnimEffect.Diamond:return new Le.Diamond(e,i,n);case d.KsoAnimEffect.Plus:return new Me.Plus(e,i,n);case d.KsoAnimEffect.Split:return new Ve.Barn(e,i,n);case d.KsoAnimEffect.Wheel:return new Be.Wheel(e,i,n);case d.KsoAnimEffect.Wedge:return new Ke.Wedge(e,i,n);case d.KsoAnimEffect.Blinds:return new je.Blinds(e,i,n);case d.KsoAnimEffect.Box:return new We.Box(e,i,n);case d.KsoAnimEffect.Bounce:return n=i===d.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET?d.AnimDirection.Down:d.AnimDirection.Up,new Ue.Wipe(e,i,n);case d.KsoAnimEffect.EaseIn:return i===d.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET?new Ue.Wipe(e,i,n):new De.Fade(e,i,t);case d.KsoAnimEffect.Peek:return new Ge.Peek(e,i,n);case d.KsoAnimEffect.Wipe:return new Ue.Wipe(e,i,n);case d.KsoAnimEffect.Checkerboard:return new Xe.Checkerboard(e,i,n);default:return new De.Fade(e,i,t)}}}]),t}(ce.Behavior),qe=function(e){function t(){var e;l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.TIME_NODE_LIST_ELEMENT.UNSUPPORTED_BEHAVIOR));return e=i,r()(i,e)}return s()(t,e),f()(t,[{key:"getRawDuration",value:function(){return 100}},{key:"getKeyTimes",value:function(){return[0,1]}},{key:"getPropName",value:function(){return null}},{key:"getPropValue",value:function(e){return null}}]),t}(ce.Behavior),Ye=function(){function e(){l()(this,e),this.timeNodeData=null,this.scene=null,this.lastFollowedEffect=null,this.transitionFollowedEffect=null,this.lastTargetShapeId=-1,this.lastEffecType=-1,this.lastPresetClass=""}return f()(e,[{key:"parse",value:function(e,t,i,n,r,a){var s=this;this.timeNodeData=e,this.scene=t,this.timeNodeData.buildTargets(t,i);var o=function(e){var t=e&&e.getTiming(),i=e&&e.getCategory();s._parseTiming(t,n,r,i,a)},u=i.getFollowing();o(u&&u.getFollowing()),o(u),o(i),this.transitionFollowedEffect&&this.timeNodeData.setTransitionFollowedEffect(this.transitionFollowedEffect)}},{key:"parseEffectForPreView",value:function(e,t,i,n){this.timeNodeData=e,this.scene=t,this.timeNodeData.buildTargets(t,i),this._doParseEffectForPreview(n,i.getCategory()),this.transitionFollowedEffect&&this.timeNodeData.setTransitionFollowedEffect(this.transitionFollowedEffect)}},{key:"_doParseEffectForPreview",value:function(e,t){var i=this;if(e){var n=new _(w);Array.isArray(e)?e.forEach((function(e){return i._parseEffect(n,e,!1,!0,!1,t)})):this._parseEffect(n,e,!1,!0,!1,t),this.timeNodeData.setMainSequence(n)}}},{key:"_parseTiming",value:function(e,t,i,n,r){e&&!i&&this._parseSequences(e,t,n,r)}},{key:"_parseSequences",value:function(e,t,i,n){var r=this,a=this._parseMainSequence(e.mainSequence,t,i,n);if(a&&this.timeNodeData.setMainSequence(a),!t||n){var s=e&&e.getTimeLine(),o=s&&s.allInterSeq;o&&o.forEach((function(e){var t=r._parseInterSequence(e,i,n);r.timeNodeData.insertInterSequence(t)}))}}},{key:"_parseMainSequence",value:function(e,t,i,n){if(e){for(var r=this.mainSeq=this.mainSeq||new _(w),a=e.getEffects(),s=0,o=a.length;s<o;++s){var u=a[s],c=s<o-1&&a[s+1].getTriggerType()===d.TRIGGER_TIME_TYPE.presTriggerTimeBegin;this._parseEffect(r,u,c,!1,t,i,n)}return r}return null}},{key:"_parseInterSequence",value:function(e,t,i){if(e){for(var n=new _,r=e.getEffects(),a=0,s=r.length;a<s;++a){var o=r[a],u=a<s-1&&r[a+1].getTriggerType()===d.TRIGGER_TIME_TYPE.presTriggerTimeBegin;this._parseEffect(n,o,u,!1,!1,t,i)}return n}return null}},{key:"_isSkipEffect",value:function(e){var t=e.getTargetShapeId(),i=e.getType(),n=e.getPresetClass();if(t===this.lastTargetShapeId&&i===this.lastEffecType&&n===this.lastPresetClass)for(var r=e.getBehaviors(),a=0;a<r.length;++a){var s=r[a],o=s.getParaStart(),u=s.getParaEnd();if(-1!==o&&-1!==u)break}return this.lastTargetShapeId=t,this.lastEffecType=i,this.lastPresetClass=n,!1}},{key:"_parseEffect",value:function(t,i,n,r,a,s,o){if(i){if(!e.isSupportEffect(i))return;var u=-1;switch(i.getTriggerType()){case d.TRIGGER_TIME_TYPE.presTriggerTimeOnBegin:u=d.EffectNodeType.CLICK;break;case d.TRIGGER_TIME_TYPE.presTriggerTimeOnEnd:u=d.EffectNodeType.WITH;break;case d.TRIGGER_TIME_TYPE.presTriggerTimeBegin:u=d.EffectNodeType.AFTER}this.prevHiddenPlaceHolderEffectType===d.EffectNodeType.CLICK&&(u=d.EffectNodeType.CLICK,this.prevHiddenPlaceHolderEffectType=null);var c=i.getTargetShapeId(),l=this._findShape(c,s);if(!l)return;var h=l.shape,f=l.commonSlide;if(h.isPlaceHolder()&&!h.isViablePhShape()&&i.getType()!==d.KsoAnimEffect.ChangeFillColor&&i.getType()!==d.KsoAnimEffect.ChangeLineColor||h.isHidden())return void(this.prevHiddenPlaceHolderEffectType=u);var p=this._parseTextRange(h,i),m=this._getTarget(h,f,p);m.setIsStatic(!1);var v=i.private.triggerObj;if(v){t.setId(v),t.setSlideCategory(s);var g=this._findShape(v,s),y=g.shape,E=g.commonSlide,S=this._buildTriggerTarget(y,E,p),T=this._createEffect({effectNodeType:u,kwoEffect:i,sequence:t,target:m,triggerTarget:S,hasAfterEffect:n,isForAutoPlay:a||r,isAdvancePlay:o});T&&(this.timeNodeData.addTriggerEffects(T),t.allEffects.push(T),this._updateTriggerEffectRelationship(t,T))}else{var A=this._createEffect({effectNodeType:u,kwoEffect:i,sequence:t,target:m,triggerTarget:null,hasAfterEffect:n,isForAutoPlay:a||r,isAdvancePlay:o});A&&(t.allEffects.push(A),this._updateEffectRelationship(t,A,r,a))}}}},{key:"_getTarget",value:function(e,t,i){if(!i.isByCharAnim&&!i.isByParaAnim)return this._buildAnimationTarget(e,t,i);if(i.isByParaAnim){var n=this.timeNodeData.getAnimationTargets().find((function(i){return i.shape.getId()===e.getId()&&i.commonSlide.getCategory()===t.getCategory()&&!i.textRange.isByParaAnim}));n&&n.textRange&&(n.textRange.onlyBackground=!0);var r=this._getAnimationTarget(e,t,i);return r?(r.textRange=i,this.scene.updateNeedSplitMap(e,t,i),r):this._buildAnimationTarget(e,t,i)}if(i.isByCharAnim)for(var a=this.timeNodeData.getAnimationTargets(),s=0;s<a.length;s++){var o=a[s],u=o&&o.commonSlide.getCategory();if((o&&o.getShape().getId())===e.getId()&&u===t.getCategory()&&!o.textRange.isByParaAnim)return o.textRange=i,this.scene.updateNeedSplitMap(e,t,i),o}return this._buildAnimationTarget(e,t,i)}},{key:"_parseTextRange",value:function(e,t){var i=this._getTextLength(e),n=new ze,r=e.isMath(),a=!r&&this._hasAnimInterval(t);if(i>1){var s=t.getBehaviors(),o=!1,u=-1,c=-1;if(!r)for(var l=0;l<s.length;++l){var h=s[l];u=h.getParaStart(),c=h.getParaEnd(),o=o||h.getTextRangeType()===d.TextRangeType.presTextRangeChar}var f=e.getTextFrame(),p=f&&f.getTextStream(),m=p&&p.getParaTbl();if(m)if(u>-1&&c>-1){var v=-1,g=-1;if(n.setIsByParaAnim(!0),o){v=u,g=c;var y=m.getItemsArray().findIndex((function(e){return e.getBegin()===v&&e.getBegin()+e.getCcp()===g}));u=y,c=y}else{var E=m.getItemAt(u);v=E&&E.getBegin();var S=m.getItemAt(c);g=S&&v+S.getCcp()}n.setParaRange({paraStart:u,paraEnd:c}),n.setGcpRange({gcpStart:v,gcpEnd:g})}else a?(n.setParaRange({paraStart:0,paraEnd:m.getItemCount()-1}),n.setGcpRange({gcpStart:0,gcpEnd:i-1})):t.needSplit&&(n.setParaRange({paraStart:0,paraEnd:m.getItemCount()-1}),delete t.needSplit);n.setIsByCharAnim(a),n.setHeadEffect(a)}return n}},{key:"parseInterEffect",value:function(){var e=this,t=this.timeNodeData.getMainSequence();if(t)for(var i=t.allEffects,n=0;n<i.length;++n){var r=i[n];this._parseInterEffect(r,n)}this.timeNodeData.getInterSequences().forEach((function(t){for(var i=t.allEffects,n=0;n<i.length;++n){var r=i[n];e._parseInterEffect(r,n)}}))}},{key:"_parseInterEffect",value:function(e,t){var i=e.getParentSequence(),n=e._hasAfterEffect,r=e.getEffectNodeType(),a=e.kwoEffect,s=e.isForAutoPlay,o=e.isAdvancePlay,u=e.getTarget(),c=u.getShape();if(!c.isGroupShape()){var l=u.getSlide(),h=u.textRange.getParaStart(),f=u.textRange.getParaEnd(),p=u.textRange,m=e.interval,d=a.getInfoProperty(),v=d&&d.intervalType;if(e.isSupportByChar()&&p.isByCharAnim){var g=this._isSkip(e,c,p),y=g?e.getDelay():e.getDelay()+e.getRawDuration();e.setHeadEffect(!0);for(var E=p.getGcpStart(),S=p.getGcpEnd(),T=E;T<S;T++)if(!p.onlyBackground){var A=this._getGlyph(c,T);if(!A||!A.isLineBreak()){var k=new ze(h,f);k.setGcpRange({gcpStart:T,gcpEnd:T}),k.setIsByCharAnim(!0);var _=void 0,w=void 0;if((_=this.timeNodeData.getAnimationTarget(c.getId(),l.getCategory(),k))||(_=this._buildAnimationTarget(c,l,k)),a.private.triggerObj){var N=a.private.triggerObj,P=this._findShape(N,l.getCategory()),C=P.shape,b=P.commonSlide;w=this._buildTriggerTarget(C,b,k)}var I=this._createEffect({effectNodeType:r,kwoEffect:a,sequence:i,target:_,triggerTarget:w,hasAfterEffect:n,isForAutoPlay:s,isAdvancePlay:o});if(I){var R=0;R=0===v?y+(T-E)*m:y+(T-E)*m*e.getRawDuration(),I.setDelay(R),I.setTextEffect(!0),e.addWithEffect(I);var x=A&&A.getGcp()+A.getCharLen();x-T-1>0&&(T+=x-T-1)}}}if(g&&(e.setSkip(!0),e.isEntrance())){var O=a.getGroupId(),F=d.byLevel;if(-1===O&&F<=0){for(var D=t-1,L=i.effects[D];L;){var M=L.kwoEffect.getGroupId(),V=L.kwoEffect.getInfoProperty();if(L.target.getShape()===c&&L.getType()===e.getType()&&V.byLevel>=0&&-1!==M)break;L=i.effects[--D]}L||u.show()}}}}}},{key:"_isSkip",value:function(e,t,i){return e.getType()===d.KsoAnimEffect.BrushOnUnderline||(!(!i.isByParaAnim||!i.isByCharAnim)||!(!t.isTextShape()||!e.target.isNoneFillAndOutline())&&(!!(t.isTextBox()||e.getType()!==d.KsoAnimEffect.BrushOnColor&&e.getType()!==d.KsoAnimEffect.ColorBlend)&&(!i.isByCharAnim||![d.KsoAnimEffect.ComplementaryColor,d.KsoAnimEffect.ComplementaryColor2,d.KsoAnimEffect.ContrastingColor,d.KsoAnimEffect.Desaturate,d.KsoAnimEffect.Lighten].includes(e.getType()))))}},{key:"_getText",value:function(e){var t=e.getTextFrame();if(t){var i=t.getTextStream();if(i)return i.getAllText()}return null}},{key:"_getTextLength",value:function(e){var t=e.getTextFrame();if(t){var i=t.getTextStream();if(i)return i.getCharCount()}return null}},{key:"_getGlyph",value:function(e,t){return this.scene.getGlyph(e,t)}},{key:"_createEffect",value:function(t){var i=t.effectNodeType,n=t.kwoEffect,r=t.sequence,a=t.target,s=t.triggerTarget,o=t.hasAfterEffect,u=t.isForAutoPlay,c=t.isAdvancePlay,l=n.getPresetClass(),h=n.parent,f=this._getEffectIndex(h,n,a),p=n.getInfoProperty();if(l){var m=p&&p.afterEffect,d=this._getPrevEffect(r,a),v=new ue({effectNodeType:i,kwoEffect:n,presetClass:n.getPresetClass(),prevEffect:d,parentSeq:r,isForAutoPlay:u,effectIndex:f,afterEffectState:m,isAdvancePlay:c,hasAfterEffect:o,type:n.getType()}),g=e._needUseRiseUpEffectReplace(n);return this._buildEffect(v,n,a,s,o,g)?v:null}return null}},{key:"_getPrevEffect",value:function(e,t){var i=e.allEffects&&e.allEffects.filter((function(e){return e.getTarget()===t}));return!i||i.length<1?null:i[i.length-1]}},{key:"_getEffectIndex",value:function(e,t,i){return i.commonSlide&&i.commonSlide.isLayoutSlide||i.commonSlide.isMasterSlide?-1:e&&e.effectIndex(t)}},{key:"_buildEffect",value:function(e,t,i,n,r,a){if(a?this._createFakeFadeEffect(e,t,i):(this._parseBehaviors(e,t,i,r),this._parseEnhanceBehaviors(e,t,i)),!e.hasValidBehavior())return!1;this.initTargetVisible(i,t),this._setCommon(e,t),e.setTarget(i),e.setTriggerTarget(n),e.initDuration();var s=t.getInfoProperty();if(s&&this._hasAnimInterval(t)){var o=s.interval,u=s.intervalType;t.getType()===d.KsoAnimEffect.BrushOnUnderline&&(o=o||0,u=u||0),e.interval=0===u?1e3*o:o/100}return this._parseSoundEffect(e,t),!0}},{key:"_hasAnimInterval",value:function(e){if(!e)return!1;var t=e.getType();if(t===d.KsoAnimEffect.BrushOnUnderline)return!0;if(t===d.KsoAnimEffect.ChangeLineColor&&t===d.KsoAnimEffect.ChangeFillColor)return!1;var i=e.getInfoProperty();if(!i)return!1;var n=i.byLevel;if(!Object.isEmpty(n)&&0!==n){for(var r=e.getBehaviors(),a=-1,s=-1,o=0;o<r.length;++o){var u=r[o];a=u.getParaStart(),s=u.getParaEnd()}if(-1===a&&-1===s)return!1}var c=e.getTargetShapeId(),l=e.getParent(),h=l&&l.childs;if(h&&e.getTextRangeType()===d.TextRangeType.presTextRangeMixed&&h.find((function(e){return e.getTargetShapeId()===c&&e.getTextRangeType()!==d.TextRangeType.presTextRangeMixed})))return!1;var f=i.interval;return 1===i.textUnit&&!Object.isEmpty(f)}},{key:"_parseSoundEffect",value:function(e,t){if(!this.scene||!this.scene.baseView.isRemarkWin){var i=t.private&&t.private.soundEffect,n=i&&i.soundEffectType;if(2===n){var r=i.media;if(r){var a=r.mediaId,s=r.sha1,o=r.name;window.mediaManager.isPresetSound(s)&&e.setSoundMediaData({soundEffectType:n,mediaId:a,name:o,sha1:s})}}else 1===n&&e.setSoundMediaData({soundEffectType:n})}}},{key:"_createFakeFadeEffect",value:function(e,t,i){for(var n=this._createFakeKwoSetBehavior(t),r=this._createFakeKwoFilterBehavior(t),a=this._createSetBehavior(n,i),s=this._createFilterBehavior(r,i),o=0,u=t.getBehaviors(),c=0;c<u.length;c++){var l=u[c].getDuration();"string"==typeof l||l instanceof String&&l===d.RAW_DURATION_INFINITE?o=d.RAW_DURATION_INFINITE:l>o&&(o=l)}a&&a.setRawDuration(1),s&&s.setRawDuration(o),a&&e.addBehavior(a),s&&e.addBehavior(s)}},{key:"_parseBehaviors",value:function(e,t,i,n){for(var r=!1,a=t.getBehaviors(),s=0;s<a.length;++s){var o=a[s],u=this._createBehavior(o,i,n);u&&(e.addBehavior(u),e.isExit()&&u instanceof qe&&(r=!0))}r&&e.modifyExitSetBehavior()}},{key:"_parseEnhanceBehaviors",value:function(e,t,i){for(var n=t.getEnhanceBehaviors(),r=0;r<n.length;++r){var a=n[r],s=this._createBehavior(a,i);s&&e.addEnhanceBehavior(s)}}},{key:"_createBehavior",value:function(e,t,i){var n=null;switch(e.getType()){case d.AnimBehaviorType.Set:n=this._createSetBehavior(e,t);break;case d.AnimBehaviorType.Filter:n=this._createFilterBehavior(e,t);break;case d.AnimBehaviorType.Property:n=this._createAnimatePropBehavior(e,t);break;case d.AnimBehaviorType.Color:n=this._createAnimateColorBehavior(e,t);break;case d.AnimBehaviorType.Scale:n=this._createAnimateScaleBehavior(e,t);break;case d.AnimBehaviorType.Rotation:n=this._createAnimateRotationBehavior(e,t);break;case d.AnimBehaviorType.Motion:n=this._createAnimateMotionBehavior(e,t);break;case d.AnimBehaviorType.Command:n=this._createAnimateCommand(e,t);break;default:i&&(n=new qe)}return n&&this._setCommon(n,e),n}},{key:"setBehaviorCommon",value:function(e,t){this._createTimeFilter(t)}},{key:"_createTimeFilter",value:function(e){var t=e.getAcceleration();t<=0&&(t=e.getParent().getAccelerate());var i=e.getDeceleration();i<=0&&(i=e.getParent().getDeceleration());var n=e.getTimeFilter();n.isEmpty()&&(n=e.getParent().getTimeFilter());return null}},{key:"_createSetBehavior",value:function(t,i){var n=t.getAttrName(),r=t.getToValue(),a=e._translateToValue(n,r),s=new le(n,a);return s.setTarget(i),s}},{key:"_createFilterBehavior",value:function(e,t){var i=e.getAttrName(),n=e.getParent();if(!n)return null;var r=n.getPresetClass(),a=n.getDirection(),s=n.getType(),o=He.create(s,i,r,a);return o.setTarget(t),o}},{key:"_createAnimatePropBehavior",value:function(t,i){var n=t.getAttrName(),r=e.create(n);if(!r)return null;var a=t.getCalcMode();a&&a.length>0&&r.setCalcMode(Ae.convertCalcMode(a));var s=t.getValueType();s&&s.length>0&&r.setValueType(Ae.convertValueType(s));var o=!0,u=t.getTimeValues();if(u&&u.length>0)r.setTimeValues(u);else{var c=t.data();c.by?r.setBy(c.by):c.to?c.from?r.setFromTo(c.from,c.to):r.setTo(c.to):o=!1}return o?(r.setTarget(i),r):null}},{key:"_createAnimateColorBehavior",value:function(e,t){var i=e.data();if(!i)return null;var n=i.colorFrom?i.colorFrom:"",r=void 0;r=i.colorBy?i.colorBy:i.colorTo;var a=e.getAttrName(),s=i.colorType,o=i.colorSpace,u=i.hueDirection,c=i.colorTo,l=new Pe(a,s,c,o,u,n,r);return l.setTarget(t),l}},{key:"_createAnimateScaleBehavior",value:function(e,t){var i=e.data(),n=-1,r=-1,a=void 0,s=void 0;if(Object.isEmpty(i.toX)||Object.isEmpty(i.toY)){if(Object.isEmpty(i.byX)||Object.isEmpty(i.byY))return null;Object.isEmpty(i.fromX)||Object.isEmpty(i.fromY)?(a=i.byX,s=i.byY):(n=i.fromX,r=i.fromY,a=i.byX+n,s=i.byY+r)}else a=i.toX,s=i.toY,Object.isEmpty(i.fromX)||Object.isEmpty(i.fromY)||(n=i.fromX,r=i.fromY);var o=new Ce(a,s,n,r);return o.setTarget(t),o}},{key:"_createAnimateRotationBehavior",value:function(e,t){var i=e.data(),n=!0,r=0,a=void 0,s=void 0;if(i.fromAngle&&(r=i.fromAngle,n=!1),i.toAngle)n?s=i.toAngle:a=i.toAngle;else{if(!i.byAngle)return null;n?s=r+i.byAngle:a=r+i.byAngle}var o=new be(s,r,a);return o.setTarget(t),o}},{key:"_createAnimateMotionBehavior",value:function(e,t){var i=e.data().path,n=e.getParent(),r=n&&n.getAutoReverse(),a=new Ie(i,r);return a.setTarget(t),a}},{key:"_createAnimateVideo",value:function(e,t){}},{key:"_createAnimateCommand",value:function(e,t){var i=e.data().command,n=t.getShape(),r=n&&n.getSlide(),a=r&&r.getTiming(),s=a&&a.getTimeLine(),o=s&&s.getMediaNode(n);if(o){var u=o.getEndAfterSlide(),c=o.getHideWhenStopped(),l=new Fe(i,u,c);return l.setTarget(t),l}}},{key:"initTargetVisible",value:function(e,t){this._initTargetVisible(e,t)}},{key:"_initTargetVisible",value:function(e,t){e&&!e.hasVisibleSet()&&(t.isEntrance()?this._hasOnlyNotSetVisibilityBehavior(t)?e.show():e.hide():e.show())}},{key:"_hasOnlyNotSetVisibilityBehavior",value:function(e){var t=e.getBehaviors();if(1!==t.length)return!1;var i=t[0];return i.getType()===d.TIME_NODE_LIST_ELEMENT.SET_TIME_NODE_BEHAVIOR&&i.getAttrName()!==d.KwoAnimAttributeName.kwoAnimVisibility}},{key:"_setCommon",value:function(e,t){var i=t.getDuration();if("string"==typeof i||i instanceof String&&i===d.RAW_DURATION_INFINITE)e.setRawDuration(d.RAW_DURATION_INFINITE);else{var n=i;n>0?e.setRawDuration(n):-1e3===n?e.setUntilEnd(!0):-2e3===n&&e.setUntilNextClick(!0)}e.setRepeatCount(t.getRepeatCount()),e.setDelay(t.getDelay());var r=t.getAutoReverse();e.setAutoReverse(r);var a=void 0;switch(t.getFill()){case"remove":a=d.TIME_NODE_FILL.REMOVE;break;case"freeze":a=d.TIME_NODE_FILL.FREEZE;break;case"hold":a=d.TIME_NODE_FILL.HOLD;break;case"transition":a=d.TIME_NODE_FILL.TRANSITION;break;default:a=d.TIME_NODE_FILL.HOLD}e.setFill(a)}},{key:"_updateTriggerEffectRelationship",value:function(e,t){if(e&&t){var i=t.getEffectNodeType();d.EffectNodeType.CLICK===i?(e.lastFollowedEffect=t,e.addEffect(t)):e.lastFollowedEffect?d.EffectNodeType.WITH===i?this._isNeedPushInnermost(t)?e.lastFollowedEffect.unshiftWithEffect(t):e.lastFollowedEffect.addWithEffect(t):(e.lastFollowedEffect.addAfterEffect(t),e.lastFollowedEffect=t):(e.lastFollowedEffect=t,e.addEffect(t))}}},{key:"_updateEffectRelationship",value:function(e,t,i,n){if(e&&t){var r=t.getEffectNodeType();if(d.EffectNodeType.CLICK!==r||i||n)if(this.lastFollowedEffect)if(d.EffectNodeType.WITH===r){if(t.isMotionEffect())for(var a=t.prevEffect;a;)(a.isScaleEffect()||a.isRotateEffect())&&(a.addInnerWrapper=!0),a=a.prevEffect;this._isNeedPushInnermost(t)?this.lastFollowedEffect.unshiftWithEffect(t):this.lastFollowedEffect.addWithEffect(t)}else this.lastFollowedEffect.addAfterEffect(t),this.lastFollowedEffect=t;else this.lastFollowedEffect=t,e.isMainSequence()&&(this.transitionFollowedEffect=t),e.addEffect(t);else this.lastFollowedEffect=t,e.addEffect(t)}}},{key:"_isNeedPushInnermost",value:function(e){if(e.isWithEffect()&&(e.isRotateEffect()||e.isScaleEffect()))for(var t=e.prevEffect;t;){if(t.isPath()&&e.isWithEffect())return!0;t=t.prevEffect}return!1}},{key:"_findShape",value:function(e,t){return this.timeNodeData.findShape(e,t)}},{key:"_getAnimationTarget",value:function(e,t,i){var n=e.getId(),r=t.getCategory();return this.timeNodeData.getAnimationTarget(n,r,i)}},{key:"_buildAnimationTarget",value:function(e,t,i){return this.timeNodeData.buildAnimationTarget(this.scene,e,t,i)}},{key:"_buildTriggerTarget",value:function(e,t,i){return this.timeNodeData.buildTriggerTarget(this.scene,e,t,i)}},{key:"_createFakeKwoSetBehavior",value:function(e){var t=e.getPresetClass()===d.TIME_NODE_PRESET_CLASS.EXIT_PRESET;return{isFakeBehavior:function(){return!0},getAttrName:function(){return 8},getToValue:function(){return t?"hidden":"visible"}}}},{key:"_createFakeKwoFilterBehavior",value:function(e){return{isFakeBehavior:function(){return!0},getAttrName:function(){return""},getParent:function(){return e}}}}],[{key:"create",value:function(e){switch(e){case d.KwoAnimAttributeName.kwoAnimX:case d.KwoAnimAttributeName.kwoAnimY:case d.KwoAnimAttributeName.kwoAnimXY:case d.KwoAnimAttributeName.kwoAnimWidth:case d.KwoAnimAttributeName.kwoAnimHeight:case d.KwoAnimAttributeName.kwoAnimShapeStyleRotation:case d.KwoAnimAttributeName.kwoAnimVisibility:case d.KwoAnimAttributeName.kwoAnimXshear:case d.KwoAnimAttributeName.kwoAnimTextFontBold:return new Ae(e);default:return null}}},{key:"_translateToValue",value:function(e,t){switch(e){case d.KwoAnimAttributeName.kwoAnimVisibility:return"visible"===t;case d.KwoAnimAttributeName.kwoAnimOpacity:case d.KwoAnimAttributeName.kwoAnimTextFontColor:case d.KwoAnimAttributeName.kwoAnimShapeFillColor:case d.KwoAnimAttributeName.kwoAnimShapeFillType:case d.KwoAnimAttributeName.kwoAnimTextFontName:case d.KwoAnimAttributeName.kwoAnimTextFontBold:return t}return!1}},{key:"isSupportEffect",value:function(e){if(!e)return!1;var t=e.getType();return t!==d.KsoAnimEffect.ChangeFont&&t!==d.KsoAnimEffect.ChangeFontSize&&t!==d.KsoAnimEffect.ChangeFontStyle&&t!==d.KsoAnimEffect.VerticalGrow&&t!==d.KsoAnimEffect.GrowWithColor&&t!==d.KsoAnimEffect.Blast&&t!==d.KsoAnimEffect.StyleEmphasis&&e.getTargetShapeId()>0}},{key:"_needUseRiseUpEffectReplace",value:function(e){if(!e)return!1;var t=e.getType(),i=e.getPresetClass();return(i===d.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET||i===d.TIME_NODE_PRESET_CLASS.EXIT_PRESET)&&t!==d.KsoAnimEffect.Appear&&t!==d.KsoAnimEffect.Fly&&t!==d.KsoAnimEffect.Crawl&&t!==d.KsoAnimEffect.Fade&&t!==d.KsoAnimEffect.FadedSwivel&&t!==d.KsoAnimEffect.FadedZoom&&t!==d.KsoAnimEffect.Expand&&t!==d.KsoAnimEffect.GrowAndTurn&&t!==d.KsoAnimEffect.Spinner&&t!==d.KsoAnimEffect.Ascend&&t!==d.KsoAnimEffect.Credits&&t!==d.KsoAnimEffect.RiseUp&&t!==d.KsoAnimEffect.Zoom&&t!==d.KsoAnimEffect.Descend&&t!==d.KsoAnimEffect.Unfold&&t!==d.KsoAnimEffect.Stretchy&&t!==d.KsoAnimEffect.CenterRevolve&&t!==d.KsoAnimEffect.Bounce&&t!==d.KsoAnimEffect.Boomerang&&t!==d.KsoAnimEffect.Float&&t!==d.KsoAnimEffect.Glide&&t!==d.KsoAnimEffect.Whip&&t!==d.KsoAnimEffect.Swish&&t!==d.KsoAnimEffect.Spiral&&t!==d.KsoAnimEffect.ArcUp&&t!==d.KsoAnimEffect.Sling&&t!==d.KsoAnimEffect.Pinwheel&&t!==d.KsoAnimEffect.ThinLine&&t!==d.KsoAnimEffect.Swivel&&t!==d.KsoAnimEffect.Fold&&t!==d.KsoAnimEffect.Stretch&&t!==d.KsoAnimEffect.Flip&&t!==d.KsoAnimEffect.Blinds&&t!==d.KsoAnimEffect.Wipe&&t!==d.KsoAnimEffect.Box&&t!==d.KsoAnimEffect.Diamond&&t!==d.KsoAnimEffect.Wheel&&t!==d.KsoAnimEffect.Split&&t!==d.KsoAnimEffect.Checkerboard&&t!==d.KsoAnimEffect.Peek&&t!==d.KsoAnimEffect.FlashOnce&&t!==d.KsoAnimEffect.Wedge&&t!==d.KsoAnimEffect.Plus&&t!==d.KsoAnimEffect.EaseIn&&t!==d.KsoAnimEffect.Zip&&t!==d.KsoAnimEffect.LightSpeed}}]),e}(),ze=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;l()(this,e),this.paraStart=t,this.paraEnd=i}return f()(e,[{key:"getParaStart",value:function(){return this.paraStart}},{key:"getParaEnd",value:function(){return this.paraEnd}},{key:"getGcpStart",value:function(){return this.gcpStart}},{key:"getGcpEnd",value:function(){return this.gcpEnd}},{key:"setHeadEffect",value:function(e){this._isHeadEffect=e}},{key:"isHeadEffect",value:function(){return this._isHeadEffect}},{key:"setParaRange",value:function(e){var t=e.paraStart,i=e.paraEnd;this.paraStart=t,this.paraEnd=i}},{key:"setGcpRange",value:function(e){var t=e.gcpStart,i=e.gcpEnd;this.gcpStart=t,this.gcpEnd=i}},{key:"setIsByParaAnim",value:function(e){this._isByParaAnim=e}},{key:"setIsByCharAnim",value:function(e){this._isByCharAnim=e}},{key:"isByParaAnim",get:function(){return this._isByParaAnim}},{key:"isByCharAnim",get:function(){return this._isByCharAnim}}]),e}(),Ze=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.scene=e,i}return s()(t,e),f()(t,[{key:"release",value:function(){this.scene=null,m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"release",this).call(this)}},{key:"commitShapeDiv",value:function(){this.scene.commitSvgToDOM()}},{key:"getShapeDiv",value:function(){return this.scene.getSvgSync()}},{key:"getLastShapeDiv",value:function(){return this.scene.getLastSvgSync()}},{key:"removeLastShapeDiv",value:function(){return this.scene.removeLastSvg()}},{key:"getInitRenderRect",value:function(){return this.rect}},{key:"getScene",value:function(){return this.scene}}]),t}(E),$e=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{effectNodeType:d.EffectNodeType.TRANS,presetClass:d.TIME_NODE_PRESET_CLASS.ENTRANCE_PRESET,parentSeq:e}));return i.prevAnimation=null,i.curAnimation=null,i.prevTimeLine=null,i.curTimeLine=null,i.isNewSceneAtBottom=!1,i}return s()(t,e),f()(t,[{key:"setIsReverse",value:function(e){this.isReverse=e}},{key:"getIsReverse",value:function(e){return this.isReverse}},{key:"setIsNewSceneAtBottom",value:function(e){this.isNewSceneAtBottom=e}},{key:"getIsNewSceneAtBottom",value:function(){return this.isNewSceneAtBottom}},{key:"commitShapeDiv",value:function(){this.target.commitShapeDiv()}},{key:"releaseAnimation",value:function(){this.curAnimation&&this.curAnimation.destroy(),this.prevAnimation&&this.prevAnimation.destroy()}},{key:"startAnimation",value:function(e){var t=this;this.commitShapeDiv(),this.getAnimations(e);var i=e.getLastScene();if(i){var n=i.slide&&i.slide.getId(),r=this.target.getScene(),a=r&&r.getCoreView();n&&a&&a.workspace.editShell.doc.destroyVideoBySlideId(n)}if(this.curAnimation&&this.target){var s=this.target.getShapeDiv();s&&(this.active(e),window.APP.shell.doc.changeMediaVisible({isAll:!0,visible:!1}),this.curAnimation.play(s,{isGoToEnd:this.isShowImmediately},(function(){window.APP.shell.doc.changeMediaVisible({isAll:!0,visible:!0}),t.hasAfterEffect()?t.startAfterEffectAnimation(e):t._onEnd()})))}if(!this.isShowImmediately&&this.prevAnimation&&this.target){var o=this.target.getLastShapeDiv();o&&this.prevAnimation.play(o,{isGoToEnd:this.isShowImmediately})}for(var u=e.getCurrentScene(),c=0;c<this.afterEffects.length;++c){var l=this.afterEffects[c];l&&!l.isShowImmediately&&(u.increaseSteps(),u.getMainSequence().inc())}}},{key:"getAnimations",value:function(e){if(!this.prevAnimation||!this.curAnimation){this._init();var t=this._doGetAnimations(!1);this.curAnimation=t,this.prevAnimation=this._doGetAnimations(!0)}}},{key:"startAfterEffectAnimation",value:function(e){for(var t=this,i=0;i<this.afterEffects.length;++i){var n=this.afterEffects[i];if(n&&!n.animations){var r=n.getAnimations(e),a=n.getTarget();r&&a&&r.play(a.getShapeDiv(),{},(function(){t._onEnd()}))}else n&&n.animations&&this._onEnd()}}},{key:"_doGetAnimations",value:function(e){var t=new ee;this._getTimeLines();for(var i=e?this.prevTimeLine:this.curTimeLine,n=0;n<i.length;++n){var r=this._doCreateAnimation(i[n],e);t.add(r)}return t}},{key:"_doCreateAnimation",value:function(e,t){for(var i=this,n=[],r=0,a=e.getKeyFrameCount();r<a;++r){var s=e.getKeyFrame(r),o={keyframeTime:s.getKeyTime()},u=s.getProperties();for(var c in u){var l=u[c];o[c]=l}n.push(o)}var h=new J;return h.addKeyFrame({animation:n}),h.setPresets({duration:e.getDuration(),delay:e.getDelay(),canGoToEnd:!0}),h.on("animationStart",(function(e){e.el,e.isGoToEnd;i.target.setRunningEffect(i);var t=i.getSoundMediaData();if(!i.isShowImmediately&&t){var n=t.soundEffectType,r=oe.a.getInstance();2===n?r.play(b()({},t,{isAnimationSound:!0})):r.stop()}})),h.on("animationEnd",(function(e){e.el})),h}},{key:"_getTimeLines",value:function(){if(!this.curTimeLine||!this.prevTimeLine){var e=this._doGetTimeLine(this.behaviors,this.getRawDuration(),this.getDelay(),!1);e&&(this.curTimeLine=[],this.curTimeLine.push(e));var t=this._doGetTimeLine(this.behaviors,this.getRawDuration(),this.getDelay(),!0);t&&(this.prevTimeLine=[],this.prevTimeLine.push(t))}}},{key:"_doGetTimeLine",value:function(e,t,i,n){if(e.length<=0)return null;for(var r=new re(i,t),a=0,s=e.length;a<s;++a){var o=e[a];o.start(this);for(var u=o.getDelay()/t,c=o.getRawDuration(),l=n?o.getKeyTimesPrev():o.getKeyTimes(),h=0,f=l.length;h<f;++h){var p=u+l[h]*c/t;r.addKeyFrame(p)}}for(var m=0,d=r.getKeyFrameCount();m<d;++m){for(var v=r.getKeyFrame(m),g=v.getKeyTime()*t,y={},E=0,S=e.length;E<S;++E){var T=e[E],A=g-T.getDelay();if(A>=0){var k=A/T.getRawDuration(),_=T.getPropName();if(_){var w=n?T.getPropValuePrev(k,y):T.getPropValue(k,y);y[_]=w}}else{var N=T.getPropName();if(N&&Object.isEmpty(y[N])){var P=n?T.getPropValuePrev(0):T.getPropValue(0);y[N]=P}}}var C=y.opacity;Object.isEmpty(C)||v.setProperty("opacity",C);var b=y.translateX;Object.isEmpty(b)||v.setProperty("translateX",b);var I=y.translateY;Object.isEmpty(I)||v.setProperty("translateY",I);var R=y.rotate;Object.isEmpty(R)||v.setProperty("rotate",R);var x=y.scaleX;Object.isEmpty(x)||v.setProperty("scaleX",x);var O=y.scaleY;Object.isEmpty(O)||v.setProperty("scaleY",O)}return r}},{key:"progressToEnd",value:function(){var e=this;this.prevAnimation&&this.prevAnimation.goToEnd(null,(function(){e._onEnd()})),this.curAnimation&&this.curAnimation.goToEnd();for(var t=0;t<this.afterEffects.length;++t){var i=this.afterEffects[t];if(i&&!i.animations){var n=i.getAnimations(this.effectScheduler),r=i.getTarget();n&&r&&n.play(r.getShapeDiv(),{isGoToEnd:!0})}else i&&i.animations&&i.animations.goToEnd()}}},{key:"setFollowEffectIsImmediate",value:function(e){for(var t=0;t<this.afterEffects.length;++t){var i=this.afterEffects[t];i&&i.setShowImmediately(e)}}},{key:"hasAfterEffect",value:function(){return this.afterEffects.length>0}},{key:"setAdvanceTime",value:function(e){this.advanceTime=e}},{key:"getAdvanceTime",value:function(){return this.advanceTime}},{key:"setAdvanceOnClick",value:function(e){this.advanceOnClick=e}},{key:"canAdvanceOnClick",value:function(){return this.advanceOnClick}}]),t}(ue),Qe=function(){function e(){l()(this,e),this.inited=!1,this.isForTransAnim=!0,this.isTransitionOut=!1,this.isReverse=!1,this.target=null}return f()(e,[{key:"init",value:function(e){this.inited||(this.target=e,this.start(),this.inited=!0)}},{key:"unInit",value:function(){this.inited&&(this.end(),this.target=null,this.inited=!1)}},{key:"setIsForTransAnim",value:function(e){this.isForTransAnim=e}},{key:"getIsForTransAnim",value:function(){return this.isForTransAnim}},{key:"setTransitionInOut",value:function(e){this.isTransitionOut=1===e}},{key:"getIsTransitionOut",value:function(){return this.isTransitionOut}},{key:"setIsReverse",value:function(e){this.isReverse=e}},{key:"getIsReverse",value:function(){return this.isReverse}},{key:"isNewSceneAtBottom",value:function(){return this.getIsReverse()}},{key:"getTarget",value:function(){return this.target}},{key:"start",value:function(){}},{key:"end",value:function(){}}]),e}(),Je=function(e){function t(e,i){l()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.dir=e,n.lrMargin=i,n.w=0,n.h=0,n}return s()(t,e),f()(t,[{key:"init",value:function(e){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e),this.dir=this._getRealDirection(this.dir);var i=this.target.getScene().getScenes();if(i){var n=i.getViewportSize();this.w=n.viewBox.width,this.h=n.viewBox.height}}},{key:"_getRealDirection",value:function(e){if(!this.getIsReverse())return this.dir;switch(e){case d.TransitionType.pushDown:return d.TransitionType.pushUp;case d.TransitionType.pushUp:return d.TransitionType.pushDown;case d.TransitionType.pushRight:return d.TransitionType.pushLeft;case d.TransitionType.pushLeft:default:return d.TransitionType.pushRight}}},{key:"getKeyTimes",value:function(){return[0,1]}},{key:"getKeyTimesPrev",value:function(){return[0,1]}},{key:"getPropName",value:function(){switch(this.dir){case d.TransitionType.pushDown:case d.TransitionType.pushUp:return"translateY";case d.TransitionType.pushRight:case d.TransitionType.pushLeft:default:return"translateX"}}},{key:"getPropValue",value:function(e){switch(this.dir){case d.TransitionType.pushDown:return-this.h*(1-e);case d.TransitionType.pushUp:return this.h*(1-e);case d.TransitionType.pushRight:return-this.w*(1-e);case d.TransitionType.pushLeft:default:return this.w*(1-e)}}},{key:"getPropValuePrev",value:function(e){switch(this.dir){case d.TransitionType.pushDown:return this.h*e;case d.TransitionType.pushUp:return-this.h*e;case d.TransitionType.pushRight:return this.w*e+this.lrMargin;case d.TransitionType.pushLeft:default:return-this.w*e-this.lrMargin}}}]),t}(Qe),et=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.dir=e,i.w=0,i.h=0,i}return s()(t,e),f()(t,[{key:"init",value:function(e){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e);var i=this.target.getScene().getScenes();if(i){var n=i.getViewportSize();this.w=n.viewBox.width,this.h=n.viewBox.height}}},{key:"isNewSceneAtBottom",value:function(){return this.getIsReverse()}},{key:"getKeyTimes",value:function(){return[0,1]}},{key:"getKeyTimesPrev",value:function(){return[0,1]}},{key:"getPropName",value:function(){switch(this.dir){case d.TransitionType.coverDown:case d.TransitionType.coverUp:return"translateY";case d.TransitionType.coverLeft:case d.TransitionType.coverRight:case d.TransitionType.coverLeftDown:case d.TransitionType.coverLeftUp:case d.TransitionType.coverRightDown:return"translateX";case d.TransitionType.coverRightUp:default:return"translateX"}}},{key:"getPropValue",value:function(e){if(!this.getIsReverse()){var t=1-e;switch(this.dir){case d.TransitionType.coverDown:return-this.h*t;case d.TransitionType.coverUp:return this.h*t;case d.TransitionType.coverLeft:return this.w*t;case d.TransitionType.coverRight:return-this.w*t;case d.TransitionType.coverLeftDown:case d.TransitionType.coverLeftUp:return this.w*t;case d.TransitionType.coverRightDown:return-this.w*t;case d.TransitionType.coverRightUp:default:return-this.w*t}}}},{key:"getPropValuePrev",value:function(e){if(this.getIsReverse()){var t=e;switch(this.dir){case d.TransitionType.coverDown:return-this.h*t;case d.TransitionType.coverUp:return this.h*t;case d.TransitionType.coverLeft:return this.w*t;case d.TransitionType.coverRight:return-this.w*t;case d.TransitionType.coverLeftDown:case d.TransitionType.coverLeftUp:return this.w*t;case d.TransitionType.coverRightDown:return-this.w*t;case d.TransitionType.coverRightUp:default:return-this.w*t}}}}]),t}(Qe),tt=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.isThroughBlack=e,i}return s()(t,e),f()(t,[{key:"getKeyTimes",value:function(){return this.isThroughBlack?[0,.01,.6,.61,1]:[0,.01,.49,.5,1]}},{key:"getKeyTimesPrev",value:function(){return this.isThroughBlack?[0,.01,.3,.31,1]:[0,.01,.49,.5,1]}},{key:"getPropName",value:function(){return"opacity"}},{key:"getPropValue",value:function(e){return this.isThroughBlack?e<=.6?0:1:e<.5?0:1}},{key:"getPropValuePrev",value:function(e){return this.isThroughBlack?e<=.3?1:0:e<.5?1:0}}]),t}(Qe),it=function(){function e(){l()(this,e)}return f()(e,[{key:"calculate",value:function(e){}}],[{key:"ofIntTo",value:function(e,t){return new nt(e,t-e)}},{key:"ofFloatTo",value:function(e,t){return new rt(e,t-e)}},{key:"ofFloatBy",value:function(e,t){return new rt(e,t)}}]),e}(),nt=function(e){function t(e,i){l()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.from=e,n.by=i,n}return s()(t,e),f()(t,[{key:"calculate",value:function(e){this.calculateInt(e)}},{key:"calculateInt",value:function(e){return Math.round(this.by*e)+this.from}}]),t}(it),rt=function(e){function t(e,i){l()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.from=e,n.by=i,n}return s()(t,e),f()(t,[{key:"calculate",value:function(e){this.calculateFloat(e)}},{key:"calculateFloat",value:function(e){return this.by*e+this.from}}]),t}(it),at=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.isThroughBlack=e,i.floatInterpolator=it.ofFloatTo(0,1),i}return s()(t,e),f()(t,[{key:"init",value:function(e){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"isNewSceneAtBottom",value:function(){return!1}},{key:"getKeyTimes",value:function(){return[0,.5,1]}},{key:"getKeyTimesPrev",value:function(){return[0,.5,1]}},{key:"getPropName",value:function(){return"opacity"}},{key:"getPropValue",value:function(e){return this.isThroughBlack?e>.5?2*(e-.5):0:this.floatInterpolator.calculateFloat(e)}},{key:"getPropValuePrev",value:function(e){return this.isThroughBlack?e<=.5?1-2*e:0:1}}]),t}(Qe),st=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.dir=e,i.w=0,i.h=0,i}return s()(t,e),f()(t,[{key:"init",value:function(e){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e);var i=this.target.getScene().getScenes();if(i){var n=i.getViewportSize();this.w=n.viewBox.width,this.h=n.viewBox.height}}},{key:"isNewSceneAtBottom",value:function(){return!this.getIsReverse()}},{key:"getKeyTimes",value:function(){return[0,1]}},{key:"getKeyTimesPrev",value:function(){return[0,1]}},{key:"getPropName",value:function(){switch(this.dir){case d.TransitionType.uncoverDown:case d.TransitionType.uncoverUp:return"translateY";case d.TransitionType.uncoverLeft:case d.TransitionType.uncoverRight:case d.TransitionType.uncoverLeftDown:case d.TransitionType.uncoverLeftUp:case d.TransitionType.uncoverRightDown:return"translateX";case d.TransitionType.uncoverRightUp:default:return"translateX"}}},{key:"getPropValue",value:function(e){var t=this.getIsReverse()?1-e:e;if(!this.getIsReverse())return 0;switch(this.dir){case d.TransitionType.uncoverDown:return this.h*t;case d.TransitionType.uncoverUp:return-this.h*t;case d.TransitionType.uncoverLeft:return-this.w*t;case d.TransitionType.uncoverRight:return this.w*t;case d.TransitionType.uncoverLeftDown:case d.TransitionType.uncoverLeftUp:return-this.w*t;case d.TransitionType.uncoverRightDown:return this.w*t;case d.TransitionType.uncoverRightUp:default:return this.w*t}}},{key:"getPropValuePrev",value:function(e){if(this.getIsReverse())return 0;var t=this.getIsReverse()?1-e:e;switch(this.dir){case d.TransitionType.uncoverDown:return this.h*t;case d.TransitionType.uncoverUp:return-this.h*t;case d.TransitionType.uncoverLeft:return-this.w*t;case d.TransitionType.uncoverRight:return this.w*t;case d.TransitionType.uncoverLeftDown:case d.TransitionType.uncoverLeftUp:return-this.w*t;case d.TransitionType.uncoverRightDown:return this.w*t;case d.TransitionType.uncoverRightUp:default:return this.w*t}}}]),t}(Qe),ot=function(e){function t(e){l()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.filterGenerator=e,i.target=null,i}return s()(t,e),f()(t,[{key:"init",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.filterGenerator&&this.filterGenerator.init(this.target)}},{key:"unInit",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unInit",this).call(this),this.filterGenerator&&this.filterGenerator.unInit()}},{key:"setIsForTransAnim",value:function(e){return this.filterGenerator.setIsForTransAnim(e),this}},{key:"setIsReverse",value:function(e){return this.filterGenerator.setIsReverse(e),this}},{key:"setTransitionInOut",value:function(e){return this.filterGenerator.setTransitionInOut(e),this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"isNewSceneAtBottom",value:function(){return this.filterGenerator.isNewSceneAtBottom()}},{key:"getPropName",value:function(){return this.filterGenerator.getPropName()}},{key:"getKeyTimes",value:function(){return this.filterGenerator.getKeyTimes()}},{key:"getKeyTimesPrev",value:function(){return this.filterGenerator.getKeyTimesPrev()}},{key:"getPropValue",value:function(e){return this.filterGenerator.getPropValue(e)}},{key:"getPropValuePrev",value:function(e){return this.filterGenerator.getPropValuePrev(e)}}]),t}(ce.Behavior),ut=function(){function e(){l()(this,e)}return f()(e,null,[{key:"ofCut",value:function(e){return new ot(new tt(e))}},{key:"ofCover",value:function(e){return new ot(new et(e))}},{key:"ofUnCover",value:function(e){return new ot(new st(e))}},{key:"ofFade",value:function(e){return new ot(new at(e))}},{key:"ofPush",value:function(e,t){return new ot(new Je(e,t))}}]),e}(),ct=function(){function e(){l()(this,e)}return f()(e,null,[{key:"parse",value:function(t,i,n,r,a,s){var o=a?t.getPrevRawTransition():r,u=r&&r.getAdvanceOnClick(),c=!!Object.isEmpty(u)||u,l=a?-1:r&&r.getAdvanceTime(),h=e._create({scene:t,timeNodeData:i,transitionTarget:n,transition:o,isReverse:a,advanceOnClick:c,advanceTime:l,isExplainEditMode:s});return h.initDuration(),h}},{key:"_create",value:function(t){var i=t.scene,n=t.timeNodeData,r=t.transitionTarget,a=t.transition,s=t.isReverse,o=t.advanceOnClick,u=t.advanceTime,c=t.isExplainEditMode,l=new $e(n.getMainSequence());if(l.setTarget(r),l.addBehavior(new le(d.KwoAnimAttributeName.kwoAnimVisibility,!0,!0).setTarget(r).setRawDuration(1)),l.setAdvanceOnClick(o),l.setAdvanceTime(u),l.setIsReverse(s),i&&!i.baseView.isRemarkWin&&a&&e._parseSoundEffect(l,a),!a||!a.hasAnimation()||c)return l;var h=a.getDuration();if(h<=0)return l;var f=null,p=a.getType();switch(p){case d.TransitionType.cut:f=ut.ofCut(!1),h=1;break;case d.TransitionType.cutThroughBlack:f=ut.ofCut(!0);break;case d.TransitionType.coverLeft:case d.TransitionType.coverUp:case d.TransitionType.coverRight:case d.TransitionType.coverDown:case d.TransitionType.coverLeftUp:case d.TransitionType.coverRightUp:case d.TransitionType.coverLeftDown:case d.TransitionType.coverRightDown:var m=p;f=ut.ofCover(m),e._setSpeed(f,1,0);break;case d.TransitionType.uncoverLeft:case d.TransitionType.uncoverUp:case d.TransitionType.uncoverRight:case d.TransitionType.uncoverDown:case d.TransitionType.uncoverLeftUp:case d.TransitionType.uncoverRightUp:case d.TransitionType.uncoverLeftDown:case d.TransitionType.uncoverRightDown:var v=p;f=ut.ofUnCover(v),e._setSpeed(f,1,0);break;case d.TransitionType.fade:f=ut.ofFade(!0);break;case d.TransitionType.fadeSmoothly:f=ut.ofFade(!1);break;case d.TransitionType.pushDown:case d.TransitionType.pushLeft:case d.TransitionType.pushRight:case d.TransitionType.pushUp:var g=p;f=ut.ofPush(g,0),e._setSpeed(f,1,0);break;default:f=ut.ofFade(!1)}return f?(l.addBehavior(f.setTarget(r).setIsReverse(s).setRawDuration(h)),l.setIsNewSceneAtBottom(f.isNewSceneAtBottom()),l):l}},{key:"_parseSoundEffect",value:function(e,t){var i=t.data&&t.data.soundEffect,n=t.data&&t.data.isLoopSound,r=i&&i.soundEffectType;if(2===r){var a=i.media;if(a){var s=a.mediaId,o=a.sha1,u=a.name;window.mediaManager.isPresetSound(o)&&e.setSoundMediaData({soundEffectType:r,mediaId:s,sha1:o,isLoopSound:n,name:u})}}else 1===r&&e.setSoundMediaData({soundEffectType:r})}},{key:"_setSpeed",value:function(e,t,i){}}]),e}(),lt=function(){function e(){l()(this,e),this.mainSeq=null,this.transitionFollowedEffect=null,this.shapes=[],this.animationTargets=[],this.layoutShapeStartIndex=-1,this.slideShapeStartIndex=-1,this.interSeqs=[],this.triggerEffects=[]}return f()(e,[{key:"setMainSequence",value:function(e){this.mainSeq=e}},{key:"getMainSequence",value:function(){return this.mainSeq}},{key:"setTransitionFollowedEffect",value:function(e){this.transitionFollowedEffect=e}},{key:"getTransitionFollowedEffect",value:function(){return this.transitionFollowedEffect}},{key:"onCurrentScenePrepareToShow",value:function(){for(var e=0;e<this.animationTargets.length;++e){this.animationTargets[e].onCurrentScenePrepareToShow()}}},{key:"onCurrentSceneShow",value:function(){for(var e=0;e<this.animationTargets.length;++e){this.animationTargets[e].onCurrentSceneShow()}}},{key:"getShapeCount",value:function(){return this.animationTargets.length}},{key:"getShape",value:function(e){return this.animationTargets[e]}},{key:"getSlideShapeStartIndex",value:function(){return this.slideShapeStartIndex}},{key:"getSlideShapeCount",value:function(){return-1!==this.slideShapeStartIndex?this.shapes.length-this.slideShapeStartIndex:0}},{key:"getSlideShape",value:function(e){var t=this.slideShapeStartIndex+e;return this.shapes[t]}},{key:"findShape",value:function(e,t){for(var i=0;i<this.shapes.length;++i){var n=this.shapes[i],r=n.shape.getSlide();if(n&&n.shape.getId()===e&&r&&r.getCategory()===t)return n}return null}},{key:"buildTargets",value:function(e,t){if(this.shapes=[],t.showMasterShape()){var i=t.getLayout();if(i){if(i.showMasterShape()){var n=i.getMaster();n&&this._doBuildTargets(e,n,!0)}this.layoutShapeStartIndex=this.shapes.length,this._doBuildTargets(e,i,!0)}}this.slideShapeStartIndex=this.shapes.length,this._doBuildTargets(e,t,!1)}},{key:"_doBuildTargets",value:function(e,t,i){var n=t.getSpTree();if(n)for(var r=0,a=n.getChildCount();r<a;++r){var s=n.getChildAt(r);i&&s.isPlaceHolder()||(s.isHidden()||this.shapes.push({shape:s,commonSlide:t}))}}},{key:"buildAnimationTarget",value:function(e,t,i,n){for(var r=0;r<this.animationTargets.length;++r){var a=this.animationTargets[r];if(a&&this._isSameTarget(a,t,i,n))return a}var s=e.createShapeTarget(t,i,n);return this.animationTargets.push(s),s}},{key:"buildTriggerTarget",value:function(e,t,i,n){for(var r=0;r<this.animationTargets.length;++r){var a=this.animationTargets[r];if(a&&this._isSameTarget(a,t,i,n))return a}return e.createShapeTarget(t,i,n)}},{key:"_isSameTarget",value:function(e,t,i,n){var r=e.textRange.getGcpStart(),a=e.textRange.getGcpEnd(),s=e.textRange.getParaStart(),o=e.textRange.getParaEnd(),u=r===n.getGcpStart()&&a===n.getGcpEnd()&&s===n.getParaStart()&&o===n.getParaEnd(),c=e.getShape().getId()===t.getId(),l=e.commonSlide.getCategory()===i.getCategory();return c&&u&&l}},{key:"findLastSameAnimationTarget",value:function(e){for(var t=e.getShape(),i=e.commonSlide.getCategory(),n=this.animationTargets.length-2;n>=0;n--){var r=this.animationTargets[n];if(r.getShape().getId()===t.getId()&&r.commonSlide.getCategory()===i&&r!==e)return r}}},{key:"getAnimationTarget",value:function(e,t,i){for(var n=0;n<this.animationTargets.length;++n){var r=this.animationTargets[n],a=r&&r.commonSlide.getCategory();if((r&&r.getShape().getId())===e&&a===t){if(!i)return r;if(r.textRange.getGcpStart()===i.getGcpStart()&&r.textRange.getGcpEnd()===i.getGcpEnd()&&r.textRange.getParaStart()===i.getParaStart()&&r.textRange.getParaEnd()===i.getParaEnd())return r}}}},{key:"getAnimationTargets",value:function(){return this.animationTargets}},{key:"addTriggerEffects",value:function(e){this.triggerEffects.push(e)}},{key:"getTriggerEffects",value:function(){return this.triggerEffects}},{key:"insertInterSequence",value:function(e){this.interSeqs.push(e)}},{key:"getInterSequences",value:function(){return this.interSeqs}}]),e}(),ht=function(){function e(t){l()(this,e),this.scenes=t}var t,i,n,r;return f()(e,[{key:"buildScene",value:(r=u()(regeneratorRuntime.mark((function e(t,i,n,r,a,s){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new k(this.scenes,t,r),i&&o.setPrevRawTransition(n?n.getRawTransition():null),e.next=4,this._parseTiming(o,t,i,a,s);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,i,n,a,s){return r.apply(this,arguments)})},{key:"buildSceneForEffectPreview",value:(n=u()(regeneratorRuntime.mark((function e(t,i,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new k(this.scenes,t,n),e.next=3,this._parseEffectForPreview(r,t,i);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return n.apply(this,arguments)})},{key:"_parseTiming",value:(i=u()(regeneratorRuntime.mark((function e(t,i,n,r,a){var s,o,u,c,l,h,f,p,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new lt,o=new Ye,u=i.getTransition(),c=n?null:u,l=window.APP.presentation.getAdvanceMode(),h=t.canAdvancePlay&&(!l||l===d.ShowAdvanceMode.onTime)&&c&&!isNaN(Number(c.getAdvanceTime())),o.parse(s,t,i,r||h,a,h),s.onCurrentScenePrepareToShow(),t.setTimeNodeData(s),e.next=11,t.createSlideState();case 11:o.parseInterEffect(),f=new Ze(t),p=!h&&r&&!a||t.isExplainEditMode?null:u,m=ct.parse(t,s,f,p,n,t.isExplainEditMode),(v=s.getTransitionFollowedEffect())&&m.addAfterEffect(v),t.setTransitionTarget(f),t.setTransitionEffect(m),s.onCurrentSceneShow();case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,a){return i.apply(this,arguments)})},{key:"_parseEffectForPreview",value:(t=u()(regeneratorRuntime.mark((function e(t,i,n,r){var a,s,o,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new lt,(s=new Ye).parseEffectForPreView(a,t,i,n,r),a.onCurrentScenePrepareToShow(),t.setTimeNodeData(a),e.next=7,t.createSlideState();case 7:s.parseInterEffect(),o=new Ze(t),u=ct.parse(t,a,o,null,!1),(c=a.getTransitionFollowedEffect())&&u.addAfterEffect(c),t.setTransitionTarget(o),t.setTransitionEffect(u),a.onCurrentSceneShow();case 15:case"end":return e.stop()}}),e,this)}))),function(e,i,n,r){return t.apply(this,arguments)})},{key:"isSupportEffect",value:function(e){return Ye.isSupportEffect(e)}}]),e}(),ft=function(){function e(t,i){l()(this,e),this.baseView=t}return f()(e,[{key:"getLayout",value:function(){var e=this.baseView.getContainerSize();return this.baseView.slideLayout({containerSize:e})}},{key:"getSlideSize",value:function(){return this.baseView.slideTiSize}},{key:"removeSvg",value:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"appendSvg",value:function(e){e&&this.$container.appendChild(e)}},{key:"insertBeforeSvg",value:function(e,t){e&&(this.$container.contains(t)?this.$container.insertBefore(e,t):this.$container.appendChild(e))}},{key:"hideSvg",value:function(e){e.style.opcity="0"}},{key:"showSvg",value:function(e){e.style.opcity="1"}},{key:"empty",value:function(){var e=this,t=this.$container.querySelectorAll(".play_root");Array.from(t).forEach((function(t){t.parentNode===e.$container&&t.remove()}))}},{key:"setViewTransform",value:function(e){var t=e.svg,i=e.scale,n=void 0===i?1:i,r=e.offsetX,a=e.offsetY,s=t||this.$container.querySelector(".play_svg_container");s&&(s.style.transform="translate("+r+"px, "+a+"px) scale("+n+")")}},{key:"transform",value:function(e,t){var i=t.scale,n=void 0===i?1:i,r=t.offsetX,a=t.offsetY;e.style.transform="translate("+r+"px, "+a+"px) scale("+n+")"}},{key:"setSvgBlack",value:function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);var t=document.createElement("div"),i=this.getLayout().viewBox;t.style.background="black",t.style.width=i.width+"px",t.style.height=i.height+"px",t.style.position="absolute",t.style.top="0",e.appendChild(t)}},{key:"setAttribute",value:function(e,t){Object.keys(t).forEach((function(i){if(t.hasOwnProperty(i)){var n=t[i];e.setAttribute(i,n)}}))}},{key:"$container",get:function(){return this.baseView.$playerContainer}}]),e}(),pt=function(){function e(t,i){l()(this,e),this.svgRenderCtx=new ft(t,i),this.viewportSize=this.svgRenderCtx.getLayout(),this.sceneBuilder=new ht(this),this.sceneMap={},this.lastSvg=null,this.svg=null,this.isFirstTimeToPlay=!0}var t,i,n,r,a;return f()(e,[{key:"release",value:function(){this.sceneBuilder=null,this.sceneMap=null,this.svgRenderCtx.empty()}},{key:"updateViewportSize",value:function(){this._viewportSize=this.svgRenderCtx.getLayout()}},{key:"getViewportSize",value:function(){return this._viewportSize=this._viewportSize||this.svgRenderCtx.getLayout(),this._viewportSize}},{key:"getViewportLogicalSize",value:function(){return this.svgRenderCtx.getSlideSize()}},{key:"createScene",value:(a=u()(regeneratorRuntime.mark((function e(t,i,n,r,a,s){var o,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.value();case 2:if(o=e.sent,u=r&&r.isExplainEditMode,!(this.isFirstTimeToPlay&&o&&this._needMakePrevScene(o))||u){e.next=7;break}return e.next=7,this._makePrevScene(o,n,i,r,a,!1,!0);case 7:if(this.isFirstTimeToPlay=!1,!o){e.next=16;break}if(!(c=o.data)){e.next=16;break}return e.next=13,this.sceneBuilder.buildScene(c,n,i,r,a,s);case 13:return l=e.sent,this.sceneMap[c.getId()]=l,e.abrupt("return",l);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,i,n,r,s){return a.apply(this,arguments)})},{key:"createSceneForTransitionEffectPreview",value:(r=u()(regeneratorRuntime.mark((function e(t,i,n,r,a,s){var o,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.value();case 2:if(o=e.sent,!s){e.next=11;break}return u=t.isFirst(),e.next=7,t.prevIgnoreSlideHiddenStatus();case 7:if(!(c=e.sent)){e.next=11;break}return e.next=11,this._makePrevScene(c,n,i,r,a,s,u);case 11:if(!o){e.next=19;break}if(!(l=o.data)){e.next=19;break}return e.next=16,this.sceneBuilder.buildScene(l,n,i,r,a,s);case 16:return h=e.sent,this.sceneMap[l.getId()]=h,e.abrupt("return",h);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,i,n,a,s){return r.apply(this,arguments)})},{key:"createSceneForEffectPreview",value:(n=u()(regeneratorRuntime.mark((function e(t,i,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.value();case 2:if(!(r=e.sent)){e.next=7;break}if(!(a=r.data)){e.next=7;break}return e.abrupt("return",this.sceneBuilder.buildSceneForEffectPreview(a,i,n));case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return n.apply(this,arguments)})},{key:"getScene",value:(i=u()(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.value();case 2:if(!(i=e.sent)){e.next=7;break}if(!(n=i.data)){e.next=7;break}return e.abrupt("return",this.sceneMap[n.getId()]);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getSceneBySlideId",value:function(e){return this.sceneMap[e]}},{key:"getRenderContext",value:function(){return this.svgRenderCtx}},{key:"commitRenderBuffer",value:function(e){var t=e.getSvgSync();t&&this.svg!==t&&(t.hide(),this.lastSvg=this.svg,this.svg=t)}},{key:"_makeSvgBlack",value:function(){this.svgRenderCtx.setSvgBlack(this.svg)}},{key:"commitPrevSceneSvgToDOM",value:function(){this.svgRenderCtx.appendSvg(this.svg)}},{key:"commitSvgToDOM",value:function(e){e.isShownAtBottom()?this.svgRenderCtx.insertBeforeSvg(this.svg,this.lastSvg):this.svgRenderCtx.appendSvg(this.svg)}},{key:"removeLastSvg",value:function(){this.lastSvg&&(this.lastSvg.remove(),this.lastSvg=null)}},{key:"removeSceneSvg",value:function(e){e&&e.state&&e.state.svg&&e.state.svg.remove()}},{key:"getLastSvg",value:function(){return this.lastSvg}},{key:"_needMakePrevScene",value:function(e){var t=e&&e.data,i=t&&t.getTransition(),n=i&&i.getType();return n===d.TransitionType.uncoverLeft||n===d.TransitionType.uncoverUp||n===d.TransitionType.uncoverRight||n===d.TransitionType.uncoverDown||n===d.TransitionType.uncoverLeftUp||n===d.TransitionType.uncoverRightUp||n===d.TransitionType.uncoverLeftDown||n===d.TransitionType.uncoverRightDown}},{key:"_makePrevScene",value:(t=u()(regeneratorRuntime.mark((function e(t,i,n,r,a,s,o){var u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=t.data)){e.next=10;break}return e.next=4,this.sceneBuilder.buildScene(u,i,n,r,a,s);case 4:return c=e.sent,e.next=7,c.createSlideState();case 7:this.commitRenderBuffer(c),this.commitPrevSceneSvgToDOM(c),o&&this._makeSvgBlack();case 10:case"end":return e.stop()}}),e,this)}))),function(e,i,n,r,a,s,o){return t.apply(this,arguments)})},{key:"isSupportEffect",value:function(e){return this.sceneBuilder.isSupportEffect(e)}}]),e}(),mt=function(){function e(){l()(this,e),this.currentSceneIter=null,this.scenes=null,this.sceneScheduler=null,this.lastStepTimeMs=0}var t,i,n,r,a,s,o,c,h;return f()(e,[{key:"init",value:function(e,t,i){this.baseView=e,this.cb=i,this.currentSceneIter=null,this.scenes=new pt(e,t),this.sceneScheduler=new g(this.scenes,this)}},{key:"play",value:(h=u()(regeneratorRuntime.mark((function e(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments[2];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentSceneIter=t,e.next=3,this.scenes.createScene(this.currentSceneIter,null,!1,this.baseView,!1,!1);case 3:(i=e.sent)&&this.sceneScheduler.switchToScene(i,r,n),this.isSceneSwitching=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"preview",value:(c=u()(regeneratorRuntime.mark((function e(t,i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentSceneIter=t,this.previewCb=i,e.next=4,this.scenes.createScene(this.currentSceneIter,null,!1,this.baseView,!0);case 4:(n=e.sent)&&this.sceneScheduler.switchToScene(n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"previewEffect",value:(o=u()(regeneratorRuntime.mark((function e(t,i,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentSceneIter=t,this.previewCb=n,e.next=4,this.scenes.createSceneForEffectPreview(this.currentSceneIter,i,this.baseView);case 4:(r=e.sent)&&this.sceneScheduler.switchToScene(r);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return o.apply(this,arguments)})},{key:"previewTransitionEffect",value:(s=u()(regeneratorRuntime.mark((function e(t,i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentSceneIter=t,this.previewCb=i,e.next=4,this.scenes.createSceneForTransitionEffectPreview(this.currentSceneIter,null,!1,this.baseView,!0,!0);case 4:(n=e.sent)&&this.sceneScheduler.switchToScene(n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"canStepForward",value:function(){return!(!this.sceneScheduler.canStepNext()&&this.currentSceneIter.isLast())}},{key:"stepForward",value:(a=u()(regeneratorRuntime.mark((function e(){var t,i,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments[2];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.sceneScheduler&&this.sceneScheduler.getCurrentScene(),(i=t&&t.getTransitionEffect())&&i.canAdvanceOnClick()||!s){e.next=4;break}return e.abrupt("return",!0);case 4:if(n=!this.sceneScheduler.stepNext(r,!1,a),(r||this._checkStepInterval())&&t&&t.getSvgSync()){e.next=7;break}return e.abrupt("return",!0);case 7:if(!n){e.next=11;break}return e.next=10,this._gotoNextScene();case 10:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_gotoNextScene",value:(r=u()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentSceneIter.isLast()){e.next=5;break}return this._onEnd(),e.abrupt("return",!1);case 5:return this.currentSceneIter.next(),e.next=8,this._switchTo(this.currentSceneIter,-1,!1,!0,!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"canStepBackward",value:function(){return!(!this.sceneScheduler.canStepBack()&&this.currentSceneIter.isBegin())}},{key:"stepBackward",value:(n=u()(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.sceneScheduler&&this.sceneScheduler.getCurrentScene(),(t||this._checkStepInterval())&&i&&i.getSvgSync()){e.next=3;break}return e.abrupt("return",!0);case 3:if(this.sceneScheduler.stepBack()){e.next=8;break}return e.next=7,this._gotoPreviousScene();case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_gotoPreviousScene",value:(i=u()(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentSceneIter.isBegin()){e.next=5;break}return this._onBegin(),e.abrupt("return",!1);case 5:return this.currentSceneIter.prev(),e.next=8,this.scenes.getScene(this.currentSceneIter);case 8:return t=e.sent,e.next=11,this._switchTo(this.currentSceneIter,t?t.getSteps():-1,!0,!1,!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_checkStepInterval",value:function(){var e=performance.now();return!(e-this.lastStepTimeMs<50)&&(this.lastStepTimeMs=e,!0)}},{key:"getSteps",value:function(){var e=this.sceneScheduler&&this.sceneScheduler.getCurrentScene();return e&&e.getSteps()}},{key:"getCurrStepEffectInterType",value:function(){var e=this.sceneScheduler&&this.sceneScheduler.getCurrentScene(),t=e&&e.getCurrStepEffect();return t&&t.getEffectNodeType()}},{key:"switchTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments[2];return this.currentSceneIter=e,this._switchTo(e,t,!1,!1,i)}},{key:"_switchTo",value:(t=u()(regeneratorRuntime.mark((function e(t,i,n,r,a,s){var o,u,c,l,h,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.sceneScheduler.getCurrentScene(),e.next=3,this.scenes.getScene(t);case 3:return u=e.sent,e.next=6,this.scenes.createScene(t,o,n,this.baseView,s,!1);case 6:if((c=e.sent)&&this.sceneScheduler.switchToScene(c,a,i),r||!u){e.next=14;break}return e.next=11,this.scenes.getScene(this.currentSceneIter);case 11:l=e.sent,(h=l&&l.getInterSequences())&&h.forEach((function(e){var t=u.getInterSeqSteps(e);t>-1&&f.sceneScheduler.seqStepTo(l,e,t)}));case 14:case"end":return e.stop()}}),e,this)}))),function(e,i,n,r,a,s){return t.apply(this,arguments)})},{key:"stop",value:function(){this.scenes&&(this.scenes.release(),this.scenes=null),this.sceneScheduler&&(this.sceneScheduler.release(),this.sceneScheduler=null),this.baseView=null,oe.a.getInstance().stop()}},{key:"_onBegin",value:function(){}},{key:"_onEnd",value:function(){}},{key:"onEffectPlayFinished",value:function(e,t){var i=this.sceneScheduler&&this.sceneScheduler.getCurrentScene(),n=t?-1:i&&i.getAdvanceTime();this.cb&&this.cb.onEffectPlayFinished(e,n,t),e&&this.previewCb&&(this.previewCb(!0),delete this.previewCb)}},{key:"getAnimateStepsAmount",value:function(){return this.sceneScheduler&&this.sceneScheduler.mainSeq?this.sceneScheduler.getEffectsAmount():-1}},{key:"getAnimationTargetVisible",value:function(e,t){var i=this.scenes.getSceneBySlideId(e);if(i){var n=i.slide,r=i.getAnimationTarget(t,n.getCategory());if(r)return r.isVisible()}return!0}},{key:"getEffectNodeDurationByStep",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.scenes.getSceneBySlideId(e);if(n){var r=n.getMainSequence(),a=r.getEffectByStep(t);if(a){var s=function e(t){var n=t.getRawDuration(),r=t.getRepeatCount(),a=r>0?n*r:n,s=t.getDelay();return!i&&t.isMedia()&&(a=0,s=0),a+=s,t.withEffects.forEach((function(t){var i=e(t);a=Math.max(i,a)})),t.afterEffects.forEach((function(t){return a+=e(t)})),a};return s(a)}}return 0}},{key:"getCurrentSceneSlideId",value:function(){var e=this.sceneScheduler&&this.sceneScheduler.getCurrentScene();return e&&e.slide&&e.slide.getId()}},{key:"getInvisibleShapes",value:function(e){var t=this.scenes&&this.scenes.getSceneBySlideId(e);return t?t.getSlideAnimationTargets().filter((function(e){var t=e.getRunningEffect(),i=e.getShapeDiv();return t?t.isInvisivleWhenLastKeyFrame():i&&""!==i.style.opacity?0===Number(i.style.opacity):!e.isVisible()})).map((function(e){return e.getShape()})):[]}},{key:"isSupportEffect",value:function(e){return this.scenes.isSupportEffect(e)}},{key:"getTargetCurrentRect",value:function(e,t){var i=this.sceneScheduler&&this.sceneScheduler.getCurrentScene();if(i){var n=i.getAnimationTarget(e,t);if(n)return n.getCurrentShapeRect()}return null}},{key:"playTriggerAnim",value:function(e,t,i){var n=this.sceneScheduler&&this.sceneScheduler.getCurrentScene();if(n){var r=n.getInterSequences().find((function(i){return i.getId()===e&&i.getSlideCategory()===t}));r&&(this.sceneScheduler.seqStepNext(n,r),i&&i(r.getCursor()))}}},{key:"stepToTriggerSeq",value:function(e,t,i){var n=this.sceneScheduler&&this.sceneScheduler.getCurrentScene();if(n){var r=n.getInterSequences().find((function(i){return i.getId()===e&&i.getSlideCategory()===t}));if(r&&r.effects.length-1>=i)return this.sceneScheduler.seqStepTo(n,r,i),r.getCursor()}}},{key:"getInterSeqSteps",value:function(e,t){var i=this.sceneScheduler&&this.sceneScheduler.getCurrentScene();if(i){var n=i.getInterSequences().find((function(i){return i.getId()===e&&i.getSlideCategory()===t}));if(n)return n.getCursor()}}},{key:"getAllInterSeqSteps",value:function(e){var t=void 0;if(t=e?this.scenes&&this.scenes.getSceneBySlideId(e):this.sceneScheduler&&this.sceneScheduler.getCurrentScene())return t.getInterSequences().map((function(e){return{targetShapeId:e.getId(),slideCategory:e.getSlideCategory(),steps:e.getCursor(),animateStepsAmount:e.effects.length}}))}},{key:"updateViewportSize",value:function(){this.scenes&&this.scenes.updateViewportSize()}}]),e}(),dt=function(){function e(){l()(this,e)}return f()(e,[{key:"onUpdateFPS",value:function(e){}},{key:"onSceneSwitched",value:function(e,t){}}]),e}(),vt=function(e){function t(){return l()(this,t),r()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),f()(t,[{key:"init",value:function(e,i,n){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e,i,n)}},{key:"play",value:function(e,i,n){return m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this,e,i,n)}},{key:"setAutoPlay",value:function(e,i){return m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setAutoPlay",this).call(this,e,i)}},{key:"stop",value:function(){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this)}},{key:"stepForward",value:function(){return m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stepForward",this).apply(this,arguments)}},{key:"stepBackward",value:function(){return m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stepBackward",this).apply(this,arguments)}},{key:"switchTo",value:function(e,i,n){return m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"switchTo",this).call(this,e,i,n)}},{key:"getAnimationTargetVisivle",value:function(e,i){return m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getAnimationTargetVisivle",this).call(this,e,i)}},{key:"playTriggerAnim",value:function(e,i,n){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"playTriggerAnim",this).call(this,e,i,n)}},{key:"stepToTriggerSeq",value:function(e,i,n){return m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stepToTriggerSeq",this).call(this,e,i,n)}},{key:"getInterSeqSteps",value:function(e,i){return m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getInterSeqSteps",this).call(this,e,i)}}]),t}(mt),gt=(function(e){function t(){return l()(this,t),r()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,e),f()(t,[{key:"onSceneSwitched",value:function(e,i){m()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onSceneSwitched",this).call(this,e)}}])}(dt),new vt),yt=i(292),Et=function(){function e(t,i){l()(this,e),this.index=t,this.baseView=i}var t,i,n,r;return f()(e,[{key:"prev",value:(r=u()(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.index-1,t=Math.max(0,t);case 2:if(!(t>=0)){e.next=10;break}if(!this.getSlideHiddenStatus(t)){e.next=7;break}t--,e.next=8;break;case 7:return e.abrupt("break",10);case 8:e.next=2;break;case 10:return this.index=Math.max(0,t),e.next=13,this.value();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"next",value:(n=u()(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.index+1,i=this.slidesLoader.getSlideCount(),t=Math.min(i-1,t);case 3:if(!(t<i)){e.next=11;break}if(!this.getSlideHiddenStatus(t)){e.next=8;break}t++,e.next=9;break;case 8:return e.abrupt("break",11);case 9:e.next=3;break;case 11:return this.index=Math.min(i-1,t),e.next=14,this.value();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getSlideHiddenStatus",value:function(e){var t=this.slidesLoader.private.childs[e];return t&&t.getHiddenStatus()}},{key:"value",value:(i=u()(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadSlideDataByIdx(this.index);case 3:return t=e.sent,e.abrupt("return",{index:this.index,data:t});case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{index:this.index,data:null});case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return i.apply(this,arguments)})},{key:"loadSlideDataByIdx",value:function(e){var t=this;return new Promise((function(i,n){var r=t.slidesLoader,a=r.getSlideIdxProxy(e),s=r.getSlideByIdxProxy(a);s?i(s):a?a.once(a.constructor.EventTypes.DATA_LOADED,(function(){s=r.getSlideByIdxProxy(a),i(s)})):n("error index: "+e)}))}},{key:"isLast",value:function(){for(var e=this.slideCount,t=!0,i=this.index+1;i<e;){if(!this.getSlideHiddenStatus(i)){t=!1;break}i++}return t||this.index>=e-1}},{key:"isBegin",value:function(){for(var e=!0,t=this.index-1;t>=0;){if(!this.getSlideHiddenStatus(t)){e=!1;break}t--}return e||0===this.index}},{key:"isFirst",value:function(){return 0===this.index}},{key:"prevIgnoreSlideHiddenStatus",value:(t=u()(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.max(0,this.index),t-=1,this.index=Math.max(0,t),e.next=5,this.value();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"add",value:function(t){return new e(this.index+t,this.baseView)}},{key:"minus",value:function(t){return new e(this.index-t,this.baseView)}},{key:"slidesLoader",get:function(){return this.baseView.slidesLoader}},{key:"slideCount",get:function(){var e=this.slidesLoader.getSlideCount(),t=window.APP.workspace.presentation.slidesPreviewLimit();return t>0&&t<=e&&(e=t),e}}]),e}(),St="WPP_PLAY_FORWARD",Tt="WPP_PLAY_BACKWARD",At="WPP_PLAY_SWITCHTO",kt=function(e){function t(e){var i=e.startIndex,n=e.baseView,a=e.$ctn,s=e.cb;l()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.playTriggerAnim=function(e,t){gt.playTriggerAnim(e,t,(function(i){o.fire("playEvent",{action:"trigger",targetShapeId:e,slideCategory:t,steps:i})}))},o.stepToTriggerSeq=function(e,t,i){var n=gt.stepToTriggerSeq(e,t,i);Object.isEmpty(n)||o.fire("playEvent",{action:"trigger",targetShapeId:e,slideCategory:t,steps:n})},o.baseView=n,n&&n.slidesLoader||console.error(o.constructor.name,"baseView not found slidesLoader or coreView"),o.playIterator=new Et(i,n),gt.init(n,a,s),o}var i,n,a;return s()(t,e),f()(t,[{key:"play",value:function(e,t){var i=this;return gt.play(this.playIterator,e,t).then((function(e){return i.fire("playEvent",{action:"start"}),e}))}},{key:"stepForward",value:function(){var e=this;return gt.canStepForward()&&window.report(yt.TYPE.COUNT,St,1),gt.stepForward.apply(gt,arguments).then((function(t){return e.fire("playEvent",{action:"forward",canGoforward:t}),t}))}},{key:"stepBackward",value:function(e){var t=this;return gt.canStepBackward()&&window.report(yt.TYPE.COUNT,Tt,1),gt.stepBackward(e).then((function(e){return t.fire("playEvent",{action:"backward",canGobackward:e}),e}))}},{key:"stepTo",value:function(e,t,i,n){var r=this;return this.playIterator=new Et(e,this.baseView),window.report(yt.TYPE.COUNT,At,1),gt.switchTo(this.playIterator,t,i).then((function(){n&&n(),r.fire("playEvent",{action:"switchTo"})}))}},{key:"destroy",value:function(){gt.stop(),this.off()}},{key:"getPlayInfo",value:function(){return{slideIndex:this.playIterator.index,slideId:gt.getCurrentSceneSlideId(),animateIndex:gt.getSteps(),animateType:gt.getCurrStepEffectInterType(),autoPlay:gt.isAutoPlay,canBackward:gt.canStepBackward(),canForward:gt.canStepForward(),animateStepsAmount:gt.getAnimateStepsAmount(),allInterSeqSteps:gt.getAllInterSeqSteps()}}},{key:"setAutoPlay",value:function(){this.fire("playEvent",{action:"effectFinish"})}},{key:"previewEffect",value:(a=u()(regeneratorRuntime.mark((function e(t,i,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Et(t,this.baseView),e.next=3,gt.previewEffect(r,i,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,i){return a.apply(this,arguments)})},{key:"preview",value:(n=u()(regeneratorRuntime.mark((function e(t,i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Et(t,this.baseView),e.next=3,gt.preview(n,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"previewTransitionEffect",value:(i=u()(regeneratorRuntime.mark((function e(t,i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Et(t,this.baseView),e.next=3,gt.previewTransitionEffect(n,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getAnimationTargetVisible",value:function(e,t){return gt.getAnimationTargetVisible(e,t)}},{key:"getEffectNodeDurationByStep",value:function(e,t,i){return gt.getEffectNodeDurationByStep(e,t,i)}},{key:"getInvisibleShapes",value:function(e){return gt.getInvisibleShapes(e)}},{key:"isSupportEffect",value:function(e){return gt.isSupportEffect(e)}},{key:"getTargetCurrentRect",value:function(e,t){return gt.getTargetCurrentRect(e,t)}},{key:"getInterSeqSteps",value:function(e,t){return gt.getInterSeqSteps(e,t)}},{key:"updateViewportSize",value:function(){return gt.updateViewportSize()}}]),t}(z.a);t.default=kt;window.AnimePlayer=kt}}]);